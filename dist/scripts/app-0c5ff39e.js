"use strict";function data(e,t,a){return{label:e,menu:!1,order:10,parent:a,icon:t}}angular.module("db",["pouchdb","utility"]),angular.module("db").service("pouchDBbService",["pouchdb",function(){}]),angular.module("db").service("pouchdb",["config","pouchDB","$rootScope","$window",function(e,t,a,i){function r(){return i.openDatabase}var l=this,s=e.db||"vmsClient",n={auto_compaction:!0};n.adapter=r()?"websql":"idb";var o=t(s,n);l.addTimeInfo=function(e){var t=(new Date).toJSON();return e.createdOn||(e.createdOn=t),e.modifiedOn=t,e},l.save=function(e){function t(e){return e._id?l.update(e).catch(function(){return o.put(e).then(function(t){return e._id=t.id,e._rev=t.rev,e})}):l.insert(e)}return e=l.addTimeInfo(e),t(e)},l.get=function(e){return o.get(e)},l.delete=function(e){return o.get(e._id).then(function(e){return o.remove(e)})},l.insert=function(e){return e=l.addTimeInfo(e),o.post(e).then(function(t){return e._id=t.id,e._rev=t.rev,e})},l.insertWithId=function(e,t){return e=l.addTimeInfo(e),o.put(e,t)},l.update=function(e){return e=l.addTimeInfo(e),o.get(e._id).then(function(t){return e._rev=t._rev,o.put(e,e._id).then(function(t){return e._id=t.id,e._rev=t.rev,e})})},l.getView=function(e,t){return o.query(e,t)},l.saveDocs=function(e,t){var a={all_or_nothing:!0};return t&&(a=t),o.bulkDocs(e,a)}}]),angular.module("db").service("couchDBService",function(){}),angular.module("db").service("apiService",["$http","configService","$cookies","log","$q","utility",function(e,t,a,i,r,l){function s(e){var t="";if(e&&!l.isEmptyObject(e)){var a=[];for(var i in e)e.hasOwnProperty(i)&&a.push([i,e[i]].join("="));a.length>0&&(t=["?",a.join("&")].join(""))}return t}function n(e){var t={Authorization:["Token",a.getObject("vi-token")].join(" ")};return angular.isDefined(e)&&"login"===e&&delete t.Authorization,{timeout:9e3,headers:t}}var o=t.api.url,d=this;this.put=function(t,a){var l=r.defer(),s=[o,t,a._id].join("/");return e.put(s,a,n()).then(function(e){var t=e;e.hasOwnProperty("data")&&(t=e.data),l.resolve(t)},function(e){(-1===e.status||0===e.status)&&i.error("serverNotAvailable");var t=e;e.hasOwnProperty("data")&&(t=e.data),l.reject(t)}),l.promise},d.post=function(t,a){var l=r.defer();return e.post([o,t].join("/"),a,n(t)).then(function(e){var t=e;e.hasOwnProperty("data")&&(t=e.data),l.resolve(t)},function(e){(-1===e.status||0===e.status)&&i.error("serverNotAvailable");var t=e;e.hasOwnProperty("data")&&(t=e.data),l.reject(t)}),l.promise},d.all=function(t,a){a=a||{};var l=r.defer();return e.get([[o,t].join("/"),s(a)].join(""),n()).then(function(e){var t=e;e.hasOwnProperty("data")&&(t=e.data),l.resolve(t)},function(e){(-1===e.status||0===e.status)&&i.error("serverNotAvailable");var t=e;e.hasOwnProperty("data")&&(t=e.data),l.reject(t)}),l.promise},d.get=function(t,a,l){l=l||{};var d=r.defer();return e.get([[o,t,a].join("/"),s(l)].join(""),n()).then(function(e){var t=e;e.hasOwnProperty("data")&&(t=e.data),d.resolve(t)},function(e){(-1===e.status||0===e.status)&&i.error("serverNotAvailable");var t=e;e.hasOwnProperty("data")&&(t=e.data),d.reject(t)}),d.promise},d.remove=function(t,a,l){var d=r.defer();return e.delete([[o,t,a].join("/"),s(l)].join(""),n()).then(function(e){var t=e;e.hasOwnProperty("data")&&(t=e.data),d.resolve(t)},function(e){(-1===e.status||0===e.status)&&i.error("serverNotAvailable");var t=e;e.hasOwnProperty("data")&&(t=e.data),d.reject(t)}),d.promise}}]),angular.module("users",["core","db","utility","form","viLoggedTable"]),angular.module("users").config(["$stateProvider",function(e){e.state("users.all",{url:"/all",parent:"users",templateUrl:"app/users/all/all.html",controller:"UserAllCtrl",controllerAs:"allCtrl",resolve:{currentState:["userService",function(e){return e.getState().catch(function(){return{}})}]}})}]),angular.module("users").controller("UserAllCtrl",["userService","dialog","log","changesService","currentState","utility","table",function(e,t,a,i,r,l,s){function n(){c.pagination=m.pagination||{},c.pagination.maxSize=c.pagination.maxSize||100,c.pagination.itemsPerPage=c.pagination.itemsPerPage||10,c.pagination.currentPage=c.pagination.currentPage||1,c.orderByColumn=m.orderByColumn||{},0===Object.keys(m.orderByColumn||{}).length&&(c.orderByColumn.date_joined=c.orderByColumn.date_joined||{reverse:!0})}function o(t){return c.orderByColumn.hasOwnProperty(t)&&"[object Object]"===Object.prototype.toString.call(c.orderByColumn[t])?c.orderByColumn[t].reverse=!c.orderByColumn[t].reverse:(c.orderByColumn={},c.orderByColumn[t]={reverse:!0}),m.orderByColumn=c.orderByColumn,e.setState(m).catch(function(e){console.log(e)}),c.orderByColumn}function d(e){e=e||{};var t=e.column,a=e.page,i=e.filterParams,r={};if(r.page=angular.isDefined(c.pagination.currentPage)?c.pagination.currentPage:1,r.limit=angular.isDefined(c.pagination.itemsPerPage)?c.pagination.itemsPerPage:10,a&&(r.page=a),t){var l=o(t);r.order_by=l[t].reverse?t:["-",t].join("")}if(i&&"[object Object]"===Object.prototype.toString.call(i))for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s]);return r}var c=this,m=r||{};c.items=[],c.search={},c.inProgress=!1,c.filterFields=s.users,n(),c.updateView=function(t){var i=t||{};"[object String]"===Object.prototype.toString.call(t)&&(i={column:t}),c.inProgress=!0;var r=d(i);e.all(r).then(function(t){c.items=t.results,c.pagination.totalItems=t.count,c.pagination.itemsPerPage=parseInt(c.pagination.itemsPerPage,10),c.pagination.numPages=Math.ceil(parseInt(c.pagination.totalItems,10)/parseInt(c.pagination.itemsPerPage,10)),m.pagination=c.pagination,m.orderByColumn=c.orderByColumn,m.lastCheckTime=(new Date).getTime(),e.setState(m).catch(function(e){console.log(e)}),c.inProgress=!1}).catch(function(e){c.inProgress=!1,a.error(e)})},c.remove=function(i){t.confirm("Do you want to remove this record permanently?").then(function(){e.remove(i).then(function(){c.updateView(),a.success("recordRemovedSuccessfully")}).catch(function(e){a.error(e.detail||e)})})},c.updateView(),i.pollForChanges(c,e,"userprofile"),c.header=["Username","First Name","Last Name","Email","Phone","Department","Floor"],c.getList=function(){var t=d("date_joined","all");return e.all(t).then(function(e){return e.results.map(function(e){return{username:e.username,first_name:e.first_name,last_name:e.last_name,email:e.email,phone:e.phone,department:e.department.name,floor:e.department.floor}})})},c.filename=l.getFileName("users"),c.startSearch=function(){var e={filterParams:{}},t=Object.keys(c.search);if(t.length>0)for(var a in c.search)c.search.hasOwnProperty(a)&&void 0!==c.search[a]&&c.search[a].length>2&&(e.filterParams[a]=c.search[a]);Object.keys(e.filterParams).length>0?(e.filterParams.search=!0,c.updateView(e)):c.updateView()},c.clear=function(){c.search={},c.updateView()},c.searchPage=function(){var e={filterParams:{}};void 0!==c.q&&""!==c.q&&(e.filterParams.q=c.q,c.updateView(e))}}]),angular.module("users").config(["$stateProvider",function(e){e.state("users.profile",{url:"/profile",parent:"users",templateUrl:"app/users/profile/profile.html",controller:"UserProfileCtrl",controllerAs:"profileCtrl",data:data("Profile","fa fa-user","users.all")}).state("users.detail",{url:"/detail?_id",parent:"users",templateUrl:"app/users/profile/profile.html",controller:"UserProfileCtrl",controllerAs:"profileCtrl",data:data("Profile","fa fa-user","users.all")}).state("users.remove",{url:"/remove?_id",parent:"users",templateUrl:"app/users/profile/profile.html",controller:"RemoveUserProfileCtrl",controllerAs:"removeProfileCtrl"})}]),angular.module("users").controller("UserProfileCtrl",["userService","authService","$stateParams","appointmentService","utility","log",function(e,t,a,i,r,l){function s(){n.getRejected(),n.getInProgress(),n.getUpcoming(),n.getAwaitingApproval()}var n=this,o=a._id;o?e.get(o).then(function(e){n.profile=e}).catch(function(){}):n.profile=t.currentUser(),n.getInProgress=function(){o=o||t.currentUser()._id,i.inProgress({host:o}).then(function(e){n.inProgress=e.results})},n.getUpcoming=function(){o=o||t.currentUser()._id,i.upcoming({host:o}).then(function(e){n.upcoming=e.results})},n.getAwaitingApproval=function(){o=o||t.currentUser()._id,i.awaitingApproval({host:o}).then(function(e){n.awaitingApproval=e.results})},n.getRejected=function(){o=o||t.currentUser()._id,i.rejected({host:o}).then(function(e){n.rejected=e.results})},n.timeSince=function(e){return r.timeSince(e)},n.updateApp=function(e,t){var a=angular.copy(e);e.is_approved="true"===t,e.host=a.host._id,e.visitor=a.visitor._id,i.save(e).then(function(){e.status===i.status.PENDING&&(i.sms(a,"approval"),i.email(a,"approval")),s()}).catch(function(e){console.log(e),l.error(e.detail||e)})},s()}]).controller("RemoveUserProfileCtrl",["userService","$state","$stateParams","authService",function(e,t,a,i){var r=a._id;r&&i.currentUser()._id!==r&&e.remove(r).then(function(){t.go("users.all")}).catch(function(e){console.log(e)})}]),angular.module("db").service("driverService",["config","apiService","couchDBService","pouchDBbService",function(e,t,a,i){var r=this;r.getService=function(){return{api:t,couchDB:a,pouchDB:i}},r.getDriver=function(){return e.driver||"api"},r.get=function(){var e=r.getService(),t=r.getDriver();return e.hasOwnProperty(t)?e[t]:e.pouchDB}}]),angular.module("visitorsGroup",["core","db","utility","form"]),angular.module("visitorsGroup").config(["$stateProvider",function(e){e.state("visitorsGroup.profile",{url:"/profile",parent:"visitorsGroup",templateUrl:"app/visitors-group/profile/profile.html",controller:"VisitorsGroupProfileCtrl",controllerAs:"profileCtrl"}).state("visitorsGroup.detail",{url:"/detail?_id",parent:"visitorsGroup",templateUrl:"app/visitors-group/profile/profile.html",controller:"VisitorsGroupProfileCtrl",controllerAs:"profileCtrl"}).state("visitorsGroup.remove",{url:"/remove?_id",parent:"visitorsGroup",templateUrl:"app/visitors-group/profile/profile.html",controller:"RemoveVisitorsGroupProfileCtrl",controllerAs:"removeProfileCtrl"})}]),angular.module("visitorsGroup").controller("VisitorsGroupProfileCtrl",["visitorsGroupService","$stateParams",function(e,t){var a=this;e.get(t._id).then(function(e){a.profile=e}).catch(function(){})}]).controller("RemoveVisitorsGroupProfileCtrl",["visitorsGroupService","$state","$stateParams","authService",function(e,t,a){var i=a._id;e.remove(i).then(function(){t.go("visitorsGroup.all")}).catch(function(e){console.log(e)})}]),angular.module("visitorsGroup").config(["$stateProvider",function(e){e.state("visitorsGroup.add",{parent:"visitorsGroup",url:"/add",templateUrl:"app/visitors-group/form/form.html",controller:"VGFormCtrl",controllerAs:"formCtrl",data:data("Add Visitors Group","fa fa-plus-square","visitorsGroup.all")}).state("visitorsGroup.edit",{parent:"visitorsGroup",url:"/edit?_id",templateUrl:"app/visitors-group/form/form.html",controller:"VGFormCtrl",controllerAs:"formCtrl",data:data("Edit Visitors Group","fa fa-edit-square","visitorsGroup.all")})}]),angular.module("visitorsGroup").controller("VGFormCtrl",["visitorsGroupService","$state","$stateParams","utility","formService",function(e,t,a,i,r){var l=1,s=this;s.errorMsg={},s.viewModel={},s.column=12/l,s.model=e.model,s.form=r.modelToForm(s.model,l);var n=a._id;n&&e.get(n).then(function(e){s.viewModel=e}).catch(function(e){console.log(e)}),s.save=function(){e.validate(s.viewModel).then(function(a){i.isEmptyObject(a)?e.save(s.viewModel).then(function(){t.go("visitorsGroup.all")}).catch(function(e){angular.merge(s.errorMsg,e)}):s.errorMsg=a}).catch(function(e){console.log(e)})},s.validateField=function(t){s.errorMsg[t]="",s.model.hasOwnProperty(t)&&e.validateField(s.viewModel[t],t,s.viewModel._id).then(function(e){s.errorMsg[t]=e}).catch(function(e){console.log(e)})},s.cancel=function(){t.go("visitorsGroup.all")}}]),angular.module("visitorsGroup").config(["$stateProvider",function(e){e.state("visitorsGroup.all",{url:"/all",parent:"visitorsGroup",templateUrl:"app/visitors-group/all/all.html",controller:"VisitorsGroupAllCtrl",controllerAs:"allCtrl"})}]),angular.module("visitorsGroup").controller("VisitorsGroupAllCtrl",["visitorsGroupService",function(e){function t(e){return a.orderByColumn[e]?a.orderByColumn[e].reverse=!a.orderByColumn[e].reverse:(a.orderByColumn={},a.orderByColumn[e]={reverse:!0}),a.orderByColumn}var a=this;a.users=[],a.pagination={maxSize:100},a.orderByColumn={date_joined:!0},a.updateView=function(i){var r={};if(angular.isDefined(a.pagination.currentPage)?r.page=a.pagination.currentPage:a.pagination.currentPage=1,angular.isDefined(a.pagination.itemsPerPage)?r.limit=a.pagination.itemsPerPage:a.pagination.itemsPerPage=10,i){var l=t(i);r.order_by=l[i].reverse?i:["-",i].join("")}e.all(r).then(function(e){a.items=e.results,a.pagination.totalItems=e.count,a.pagination.numPages=Math.ceil(a.pagination.totalItems/a.pagination.itemsPerPage)}).catch(function(e){console.log(e)})},a.updateView()}]),angular.module("visitors",["core","db","utility","form","viLoggedTable"]),angular.module("visitors").config(["$stateProvider",function(e){e.state("visitors.profile",{url:"/profile",parent:"visitors",templateUrl:"app/visitors/profile/profile.html",controller:"VisitorProfileCtrl",controllerAs:"profileCtrl",data:data("Profile","fa fa-user-square","visitors.all")}).state("visitors.detail",{url:"/detail?_id",parent:"visitors",templateUrl:"app/visitors/profile/profile.html",controller:"VisitorProfileCtrl",controllerAs:"profileCtrl",data:data("Profile","fa fa-user-square","visitors.all")}).state("visitors.remove",{url:"/remove?_id",parent:"visitors",templateUrl:"app/visitors/profile/profile.html",controller:"RemoveVisitorProfileCtrl",controllerAs:"removeProfileCtrl"})}]),angular.module("visitors").controller("VisitorProfileCtrl",["visitorService","authService","$stateParams",function(e,t,a){var i=this;a._id?e.get(a._id).then(function(e){i.profile=e}).catch(function(){}):i.profile=t.currentUser()}]).controller("RemoveVisitorProfileCtrl",["visitorService","$state","$stateParams","authService",function(e,t,a,i){var r=a._id;r&&i.currentUser()._id!==r&&e.remove(r).then(function(){t.go("visitors.all")}).catch(function(e){console.log(e)})}]),angular.module("visitors").config(["$stateProvider",function(e){e.state("visitors.add",{parent:"visitors",url:"/add?visitor",templateUrl:"app/visitors/form/form.html",controller:"VFormCtrl",controllerAs:"formCtrl",data:data("Add Visitor","fa fa-plus-square","visitors.all")}).state("visitors.edit",{parent:"visitors",url:"/edit?_id&visitor",templateUrl:"app/visitors/form/form.html",controller:"VFormCtrl",controllerAs:"formCtrl",data:data("Edit Visitor","fa fa-edit-square","visitors.all")})}]),angular.module("visitors").controller("VFormCtrl",["visitorService","companyService","$state","$stateParams","utility","visitorsGroupService","formService","$scope","$window","$timeout","dialogs",function(e,t,a,i,r,l,s,n,o,d,c){var m=2,p=this;p.upload={status:!0},p.errorMsg={},p.viewModel={},p.viewModel.company=p.viewModel.company||{},p.column=12/m,p.companyResponse={},p.phone={prefixes:s.phonePrefixes()},p.model=e.model,p.form=s.modelToForm(p.model,m);var u=i._id;u&&e.get(u).then(function(t){p.viewModel=t,p.viewModel["company.name"]=p.viewModel.company.name,p.viewModel["company.address"]=p.viewModel.company.address;var a=e.recoverPhone(p.viewModel.phone);p.viewModel=angular.merge({},p.viewModel,a)}).catch(function(e){console.log(e)}),l.choices().then(function(e){p.model.type.choices=e}).catch(function(){}),p.save=function(){p.viewModel.phone=e.getPhone(p.viewModel["phone.prefix"],p.viewModel["phone.suffix"]),e.validate(p.viewModel).then(function(t){t=e.updateForPhone(t),t=e.updateForPrefix(t,p.viewModel["phone.prefix"]),r.isEmptyObject(t)?(e.isEmpty(p.viewModel["company.name"])||(p.viewModel.company={name:p.viewModel["company.name"]}),e.isEmpty(p.viewModel["company.address"])||e.isEmpty(p.viewModel["company.name"])||(p.viewModel.company.address=p.viewModel["company.address"]),e.save(p.viewModel).then(function(){a.go("visitors.all")}).catch(function(e){angular.merge(p.errorMsg,e)})):p.errorMsg=t}).catch(function(e){console.log(e)})},p.cancel=function(){a.go("visitors.all")},p.validateField=function(t){if(p.errorMsg[t]="",p.model.hasOwnProperty(t)){if("phone.suffix"===t)"Others"===p.viewModel["phone.prefix"]?(p.model["phone.suffix"].minLength=6,p.model["phone.suffix"].maxLength=15):(p.model["phone.suffix"].maxLength=7,p.model["phone.suffix"].minLength=7);else if("phone.prefix"===t&&"Others"===p.viewModel["phone.prefix"])return[];e.validateField(p.model[t],p.viewModel[t],p.viewModel._id).then(function(e){p.errorMsg[t]="phone.prefix"===t&&e.length>0?["Please select from list"]:e}).catch(function(e){console.log(e)})}"phone.prefix"!==t&&"phone.suffix"!==t||e.isEmpty(p.viewModel["phone.prefix"])||e.isEmpty(p.viewModel["phone.suffix"])||e.validateField(p.viewModel[t],t,p.viewModel._id).then(function(e){p.errorMsg.phone=e.length?e:""}).catch(function(e){console.log(e)})},p.getCompanies=function(e){return t.all({q:e}).then(function(e){return e.results.map(function(e){return p.companyResponse[e.name]=e,e.name})}).catch(function(){})},p.updateCompany=function(e){p.viewModel["company.address"]=p.companyResponse[e].address},p.placeholder=s.placeholder,p.openImageDialog=function(){var e=c.create("app/visitors/form/partials/camera/camera.html","VModalImage",{vm:p,$timeout:d},{size:"lg"},"formCtrl").result;e.then(function(e){p.viewModel.image=e}).catch(function(e){console.log(e)})}}]).controller("VModalImage",["$scope","$modalInstance","data","$window","$timeout","cameraService",function(e,t,a,i,r,l){function s(){e.videoStream.stop(),l.instance={}}var n=a.vm;e.takeImage=n.viewModel.image,e.closeCameraNow=function(){s(),n.upload.status=t.close(e.takeImage)},e.$on("picTaken",function(t,a){e.takeImage=a.image}),e.$on("camSuccess",function(){e.videoStream=l.instance.stream.getVideoTracks()[0]}),e.closeWindow=function(){s(),t.dismiss("closed")},e.setFiles=function(t){var a=t.files[0];if(a.type.match("image*")){var l=new i.FileReader;l.onload=function(t){r(function(){var a=document.createElement("img");a.src=t.target.result;var i=document.createElement("canvas"),r=i.getContext("2d");r.drawImage(a,0,0);var l=280,s=300,o=a.width,d=a.height;o>d?o>l&&(d*=l/o,o=l):d>s&&(o*=s/d,d=s),i.width=o,i.height=d;var c=i.getContext("2d");c.drawImage(a,0,0,o,d),n.viewModel.image=i.toDataURL("image/png"),e.takeImage=i.toDataURL("image/png")},1e3)},l.readAsDataURL(a)}}}]),angular.module("visitors").config(["$stateProvider",function(e){e.state("visitors.all",{url:"/all",parent:"visitors",templateUrl:"app/visitors/all/all.html",controller:"VisitorAllCtrl",controllerAs:"allCtrl",resolve:{currentState:["visitorService",function(e){return e.getState().catch(function(){return{}})}]}})}]),angular.module("visitors").controller("VisitorAllCtrl",["visitorService","currentState","dialog","log","utility","table",function(e,t,a,i,r,l){function s(){d.pagination=c.pagination||{},d.pagination.maxSize=d.pagination.maxSize||100,d.pagination.itemsPerPage=d.pagination.itemsPerPage||10,d.pagination.currentPage=d.pagination.currentPage||1,d.orderByColumn=c.orderByColumn||{},0===Object.keys(c.orderByColumn||{}).length&&(d.orderByColumn.date_joined=d.orderByColumn.date_joined||{reverse:!0})}function n(t){return d.orderByColumn.hasOwnProperty(t)&&"[object Object]"===Object.prototype.toString.call(d.orderByColumn[t])?d.orderByColumn[t].reverse=!d.orderByColumn[t].reverse:(d.orderByColumn={},d.orderByColumn[t]={reverse:!0}),c.orderByColumn=d.orderByColumn,e.setState(c).catch(function(e){console.log(e)}),d.orderByColumn}function o(e){e=e||{};var t=e.column,a=e.page,i=e.filterParams,r={};if(r.page=angular.isDefined(d.pagination.currentPage)?d.pagination.currentPage:1,r.limit=angular.isDefined(d.pagination.itemsPerPage)?d.pagination.itemsPerPage:10,a&&(r.page=a),t){var l=n(t);r.order_by=l[t].reverse?t:["-",t].join("")}if(i&&"[object Object]"===Object.prototype.toString.call(i))for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s]);return r}var d=this,c=t||{};d.items=[],d.search={},d.inProgress=!1,d.filterFields=l.visitors,s(),d.updateView=function(t){var a=t||{};"[object String]"===Object.prototype.toString.call(t)&&(a={column:t}),d.inProgress=!0;var r=o(a);e.all(r).then(function(t){d.items=t.results,d.pagination.totalItems=t.count,d.pagination.itemsPerPage=parseInt(d.pagination.itemsPerPage,10),d.pagination.numPages=Math.ceil(parseInt(d.pagination.totalItems,10)/parseInt(d.pagination.itemsPerPage,10)),c.pagination=d.pagination,c.orderByColumn=d.orderByColumn,c.lastCheckTime=(new Date).getTime(),e.setState(c).catch(function(e){console.log(e)}),d.inProgress=!1}).catch(function(e){d.inProgress=!1,i.error(e)})},d.updateView(),d.remove=function(t){a.confirm("Do you want to remove this record permanently?").then(function(){e.remove(t).then(function(){d.updateView(),i.success("recordRemovedSuccessfully")}).catch(function(e){i.error(e.detail||e)})})},d.header=["First Name","Last Name","Email","Phone","Company","Address"],d.getList=function(){var t=o("created","all");return e.all(t).then(function(e){return e.results.map(function(e){return{first_name:e.first_name,last_name:e.last_name,email:e.email,phone:e.phone,company:e.company.name,address:e.company.address}})})},d.filename=r.getFileName("visitors"),d.startSearch=function(){d.is_active_search=Object.keys(d.search).length>0;var e={filterParams:{}},t=Object.keys(d.search);if(t.length>0)for(var a in d.search)d.search.hasOwnProperty(a)&&void 0!==d.search[a]&&d.search[a].length>2?e.filterParams[a]=d.search[a]:d.search.hasOwnProperty(a)&&void 0!==d.search[a]&&-1!==["start_date","end_date"].indexOf(a)&&(e.filterParams[a]=$filter("date")(d.search[a],"yyyy-MM-dd"));Object.keys(e.filterParams).length>0?(e.filterParams.search=!0,d.updateView(e)):d.updateView()},d.clear=function(){d.search={},d.updateView()},d.searchPage=function(){var e={filterParams:{}};void 0!==d.q&&""!==d.q&&(e.filterParams.q=d.q,d.updateView(e))}}]),angular.module("users").config(["$stateProvider",function(e){e.state("users.add",{parent:"users",url:"/add",templateUrl:"app/users/form/form.html",controller:"FormCtrl",controllerAs:"formCtrl",data:data("Add User","fa fa-plus-square","users.all")}).state("users.edit",{parent:"users",url:"/edit?_id",templateUrl:"app/users/form/form.html",controller:"FormCtrl",controllerAs:"formCtrl",data:data("Edit User","fa fa-edit-square","users.all")}).state("users.changePassword",{parent:"users",url:"/edit?_id",templateUrl:"app/users/form/form.html",controller:"FormCtrl",controllerAs:"formCtrl",data:data("Edit User","fa fa-edit-square","users.all")})}]),angular.module("users").controller("FormCtrl",["userService","$state","$stateParams","utility","formService","departmentService","$scope","$window","$timeout","dialogs",function(e,t,a,i,r,l,s,n,o,d){var c=e.currentUser(),m=2,p=this;p.errorMsg={},p.viewModel={},p.column=12/m,p.model=e.model,l.choices().then(function(e){p.model.department.choices=e}).catch(function(){}),p.form=r.modelToForm(p.model,m,{instance:this});var u=a._id;u&&e.get(u).then(function(e){p.viewModel=e,p.viewModel.department=p.viewModel.department._id||"",p.model.password.required=!1,p.model.password2.required=!1,p.form=r.modelToForm(p.model,m,{instance:this})}).catch(function(e){console.log(e)}),p.save=function(){e.validate(p.viewModel).then(function(a){i.isEmptyObject(a)?e.save(p.viewModel).then(function(a){a._id===c._id&&e.updateCurrentUser(a),t.go("users.all")}).catch(function(e){angular.merge(p.errorMsg,e)}):p.errorMsg=a}).catch(function(e){console.log(e)})},p.validateField=function(t){p.errorMsg[t]="",p.model.hasOwnProperty(t)&&e.validateField(p.viewModel[t],t,p.viewModel._id).then(function(a){return a=a||[],0===a.length&&-1!==["password","password2"].indexOf(t)?e.validatePasswordMatch(p.viewModel.password,p.viewModel.password2):a}).then(function(e){"[object Object]"===toString.call(e)?(p.errorMsg.password=e.password||[],p.errorMsg.password2=e.password2||[]):p.errorMsg[t]=e}).catch(function(e){console.log(e)})},p.placeholder=r.placeholder,p.cancel=function(){t.go("users.all")},p.openImageDialog=function(){var e=d.create("app/users/form/partials/camera/camera.html","UModalImage",{vm:p,$timeout:o},{size:"lg"},"formCtrl").result;e.then(function(e){p.viewModel.image=e}).catch(function(e){console.log(e)})}}]).controller("UModalImage",["$scope","$modalInstance","data","$window","$timeout","cameraService",function(e,t,a,i,r,l){function s(){e.videoStream.stop(),l.instance={}}var n=a.vm;e.takeImage=n.viewModel.image,e.closeCameraNow=function(){s(),t.close(e.takeImage)},e.$on("picTaken",function(t,a){e.takeImage=a.image}),e.$on("camSuccess",function(){e.videoStream=l.instance.stream.getVideoTracks()[0]}),e.closeWindow=function(){s(),t.dismiss("closed")},e.setFiles=function(t){var a=t.files[0];if(a.type.match("image*")){var l=new i.FileReader;l.onload=function(t){r(function(){var a=document.createElement("img");a.src=t.target.result;var i=document.createElement("canvas"),r=i.getContext("2d");r.drawImage(a,0,0);var l=280,s=300,o=a.width,d=a.height;o>d?o>l&&(d*=l/o,o=l):d>s&&(o*=s/d,d=s),i.width=o,i.height=d;var c=i.getContext("2d");c.drawImage(a,0,0,o,d),n.viewModel.image=i.toDataURL("image/png"),e.takeImage=i.toDataURL("image/png")},1e3)},l.readAsDataURL(a)}}}]),angular.module("departments",["core"]),angular.module("departments").config(["$stateProvider",function(e){e.state("departments.add",{parent:"departments",url:"/add",templateUrl:"app/departments/form/form.html",controller:"DFormCtrl",controllerAs:"formCtrl",data:data("Add Department","fa fa-plus-square","departments.all")}).state("departments.edit",{parent:"departments",url:"/edit?_id",templateUrl:"app/departments/form/form.html",controller:"DFormCtrl",controllerAs:"formCtrl",data:data("Edit Department","fa fa-edit-square","departments.all")})}]),angular.module("departments").controller("DFormCtrl",["userService","$state","$stateParams","utility","formService","departmentService",function(e,t,a,i,r,l){var s=1,n=this;n.errorMsg={},n.viewModel={},n.column=12/s,n.model=l.model,n.form=r.modelToForm(n.model,s);var o=a._id;o&&l.get(o).then(function(e){n.viewModel=e}).catch(function(e){console.log(e)}),n.save=function(){l.validate(n.viewModel).then(function(e){i.isEmptyObject(e)?l.save(n.viewModel).then(function(){t.go("departments.all")}).catch(function(e){angular.merge(n.errorMsg,e)}):n.errorMsg=e}).catch(function(e){console.log(e)})},n.validateField=function(e){n.errorMsg[e]="",n.model.hasOwnProperty(e)&&l.validateField(n.viewModel[e],e,n.viewModel._id).then(function(t){n.errorMsg[e]=t}).catch(function(e){console.log(e)})},n.cancel=function(){t.go("departments.all")}}]),angular.module("departments").config(["$stateProvider",function(e){e.state("departments.profile",{url:"/profile",parent:"departments",templateUrl:"app/departments/profile/profile.html",controller:"DepartmentProfileCtrl",controllerAs:"profileCtrl"}).state("departments.detail",{url:"/detail?_id",parent:"departments",templateUrl:"app/departments/profile/profile.html",controller:"UserProfileCtrl",controllerAs:"profileCtrl"}).state("departments.remove",{url:"/remove?_id",parent:"departments",templateUrl:"app/departments/profile/profile.html",controller:"RemoveUserProfileCtrl",controllerAs:"removeProfileCtrl"})}]),angular.module("departments").controller("DepartmentProfileCtrl",["userService","authService","$stateParams",function(e,t,a){var i=this;a._id?e.get(a._id).then(function(e){i.profile=e}).catch(function(){}):i.profile=t.currentUser()}]).controller("RemoveDepartmentProfileCtrl",["userService","$state","$stateParams","dialog",function(e,t,a){var i=a._id;i&&e.remove(i).then(function(){t.go("departments.all")}).catch(function(e){t.go("departments.all"),console.log(e)})}]),angular.module("departments").config(["$stateProvider",function(e){e.state("departments.all",{url:"/all",parent:"departments",templateUrl:"app/departments/all/all.html",controller:"DepartmentAllCtrl",controllerAs:"allCtrl"})}]),angular.module("departments").controller("DepartmentAllCtrl",["departmentService","dialog","log",function(e,t,a){function i(e){return r.orderByColumn[e]?r.orderByColumn[e].reverse=!r.orderByColumn[e].reverse:(r.orderByColumn={},r.orderByColumn[e]={reverse:!0}),r.orderByColumn}var r=this;r.items=[],r.pagination={maxSize:100},r.orderByColumn={created:!0},r.updateView=function(t){var a={};if(angular.isDefined(r.pagination.currentPage)?a.page=r.pagination.currentPage:r.pagination.currentPage=1,angular.isDefined(r.pagination.itemsPerPage)?a.limit=r.pagination.itemsPerPage:r.pagination.itemsPerPage=10,t){var l=i(t);a.order_by=l[t].reverse?t:["-",t].join("")}e.all(a).then(function(e){r.items=e.results,r.pagination.totalItems=e.count,r.pagination.numPages=Math.ceil(r.pagination.totalItems/r.pagination.itemsPerPage)}).catch(function(e){console.log(e)})},r.remove=function(i){t.confirm("Do you want to remove this record permanently?").then(function(){e.remove(i).then(function(){r.updateView(),a.success("recordRemovedSuccessfully")}).catch(function(e){a.error(e.detail||e)})})},r.updateView()}]),angular.module("company",["core","utility"]),angular.module("company").config(["$stateProvider",function(e){e.state("company.add",{parent:"company",url:"/add",templateUrl:"app/company/form/form.html",controller:"CFormCtrl",controllerAs:"formCtrl",data:data("Add Company","fa fa-plus-square","company.all")}).state("company.edit",{parent:"company",url:"/edit?_id",templateUrl:"app/company/form/form.html",controller:"CFormCtrl",controllerAs:"formCtrl",data:data("Edit Company","fa fa-edit-square","company.all")})}]),angular.module("company").controller("CFormCtrl",["companyService","$state","$stateParams","utility","formService",function(e,t,a,i,r){var l=1,s=this;s.errorMsg={},s.viewModel={},s.column=12/l,s.model=e.model,s.form=r.modelToForm(s.model,l);var n=a._id;n&&e.get(n).then(function(e){s.viewModel=e}).catch(function(e){console.log(e)}),s.save=function(){e.validate(s.viewModel).then(function(a){console.log(a),i.isEmptyObject(a)?e.save(s.viewModel).then(function(){t.go("company.all")}).catch(function(e){angular.merge(s.errorMsg,e)}):s.errorMsg=a}).catch(function(e){console.log(e)})},s.validateField=function(t){s.errorMsg[t]="",s.model.hasOwnProperty(t)&&e.validateField(s.viewModel[t],t,s.viewModel._id).then(function(e){s.errorMsg[t]=e}).catch(function(e){console.log(e)})},s.cancel=function(){t.go("company.all")}}]),angular.module("company").config(["$stateProvider",function(e){e.state("company.all",{url:"/all",parent:"company",templateUrl:"app/company/all/all.html",controller:"CompanyAllCtrl",controllerAs:"allCtrl"})}]),angular.module("company").controller("CompanyAllCtrl",["companyService",function(e){function t(e){return a.orderByColumn[e]?a.orderByColumn[e].reverse=!a.orderByColumn[e].reverse:(a.orderByColumn={},a.orderByColumn[e]={reverse:!0}),a.orderByColumn}var a=this;a.companies=[],a.pagination={maxSize:100},a.orderByColumn={created:!0},a.updateView=function(i){var r={};if(angular.isDefined(a.pagination.currentPage)?r.page=a.pagination.currentPage:a.pagination.currentPage=1,angular.isDefined(a.pagination.itemsPerPage)?r.limit=a.pagination.itemsPerPage:a.pagination.itemsPerPage=10,i){var l=t(i);r.order_by=l[i].reverse?i:["-",i].join("")}e.all(r).then(function(e){a.companies=e.results,a.pagination.totalItems=e.count,a.pagination.numPages=Math.ceil(a.pagination.totalItems/a.pagination.itemsPerPage)}).catch(function(e){console.log(e)})},a.updateView()}]),angular.module("appointments",["core","db","utility","form","viLoggedTable"]),angular.module("appointments").config(["$stateProvider",function(e){e.state("appointments.detail",{url:"/detail?_id",templateUrl:"app/appointments/logs/checkin.html",controller:"CheckInCtrl",controllerAs:"logCtrl",data:data("Appointment Detail",null,"appointments.all")}).state("appointments.remove",{url:"/remove?_id",parent:"appointments",templateUrl:"app/appointments/profile/profile.html",controller:"RemoveAppointmentsProfileCtrl",controllerAs:"removeProfileCtrl"})}]),angular.module("appointments").controller("AppointmentsProfileCtrl",["appointmentService","authService","$stateParams",function(e,t,a){{var i=this;
a._id}a._id&&(i.item=e.get())}]).controller("RemoveAppointmentsProfileCtrl",["userService","$state","$stateParams","authService",function(e,t,a,i){var r=a._id;r&&i.currentUser()._id!==r&&e.remove(r).then(function(){t.go("appointments.all")}).catch(function(e){console.log(e)})}]),angular.module("appointments").config(["$stateProvider",function(e){e.state("appointments.checkin",{url:"/checkin?_id",templateUrl:"app/appointments/logs/checkin.html",controller:"CheckInCtrl",controllerAs:"logCtrl",data:data("Check Out Appointment",null,"appointments.all")}).state("appointments.checkout",{url:"/checkout?_id",templateUrl:"app/appointments/logs/checkout.html",controller:"CheckOutCtrl",controllerAs:"logCtrl"})}]),angular.module("appointments").controller("CheckInCtrl",["appointmentService","$stateParams","$state","dialogs",function(e,t,a,i){var r=this;r.teamMembers=[],r.status=e.status,e.get(t._id).then(function(e){r.item=e,r.teamMembers=e.teams}).catch(function(){}),r.checkIn=function(){e.saveLog({checked_in:(new Date).toJSON(),appointment:r.item._id,label_code:(new Date).getTime().toString().slice(0,-1)}).then(function(){a.go("appointments.all")}).catch(function(e){console.log(e),log.error("[object Object]"===Object.prototype.toString.call(e)&&e.detail?e.detail||e:"unknownError")})},r.checkOut=function(){var t=angular.copy(r.item.latest),i=angular.copy(r.item);i.visitor=r.item.visitor._id,i.host=r.item.host._id,i.is_expired=!0,t.check_out=(new Date).toJSON(),e.saveLog(t).then(function(){return e.save(i)}).then(function(){a.go("appointments.all")}).catch(function(e){console.log(e),log.error("[object Object]"===Object.prototype.toString.call(e)&&e.detail?e.detail||e:"unknownError")})},r.printLabel=function(){var e=i.create("app/appointments/logs/partials/pass-template.html","PrintLabelCtrl",r.item,"lg");e.result.then(function(){},function(){})},r.updateApp=function(t,a){console.log(t);var i=angular.copy(r.item);t.is_approved="true"===a,t.host=r.item.host._id,t.visitor=r.item.visitor._id,e.save(t).then(function(t){t.is_approved===!0?r.item.status=e.status.UPCOMING:t.is_approved===!1&&(r.item.status=e.status.REJECTED),r.item._rev=t._rev,r.item.is_approved=t.is_approved,r.item.is_expired=t.is_expired,r.item.status===e.status.UPCOMING&&(e.sms(i,"approval"),e.email(i,"approval"))}).catch(function(e){console.log(e),log.error("[object Object]"===Object.prototype.toString.call(e)&&e.detail?e.detail||e:"unknownError")})}}]).controller("PrintLabelCtrl",["$scope","$modalInstance","data","$timeout",function(e,t,a,i){e.appointment=a;var r=e.appointment.logs[0]||{},l=r.label_code.toString();l.length>12&&(l=l.slice(0,-1)),i(function(){JsBarcode("#barcode").options({font:"OCR-B"}).EAN13(l,{fontSize:11,textMargin:0,height:20}).render()},2e3)}]).controller("CheckOutCtrl",["appointmentService",function(){}]),angular.module("appointments").config(["$stateProvider",function(e){e.state("appointments.add",{parent:"appointments",url:"/add?visitor",templateUrl:"app/appointments/form/form.html",controller:"AFormCtrl",controllerAs:"formCtrl",data:data("Add Appointments","fa fa-plus-square","appointments.all")}).state("appointments.edit",{parent:"appointments",url:"/edit?_id&visitor",templateUrl:"app/appointments/form/form.html",controller:"AFormCtrl",controllerAs:"formCtrl",data:data("Edit Appointments","fa fa-plus-square","appointments.all")})}]),angular.module("appointments").controller("AFormCtrl",["appointmentService","$state","$stateParams","utility","formService","userService","visitorService","$filter","$scope","dialogs",function(e,t,a,i,r,l,s,n,o,d){function c(e){e.preventDefault(),e.stopPropagation(),this.opened=!this.opened}function m(){var e=[];if(!r.isEmpty(f.viewModel.purpose)&&"personal"===f.viewModel.purpose.toLowerCase()){var t=moment(f.viewModel.start_date).weekday(),a=moment.weekdaysShort(t),i=n("date")(f.viewModel.start_time,"HH:mm:ss").substr(0,2),l=n("date")(f.viewModel.end_time,"HH:mm:ss").substr(0,2);"Tue"!==a&&"Thu"!==a?e.push("Personal visitors are only allowed on Tuesday and Thursday between 1pm and 3pm"):(13>i||i>15||l>15)&&e.push("Personal visits are only allowed between the hours of 1pm and 3pm on Tuesday and Thursday")}return{purpose:e}}function p(e){e&&(f.viewModel=e,f.selected.host=f.viewModel.host,f.selected.visitor=f.viewModel.visitor);var t=angular.isString(f.viewModel.start_date)?f.viewModel.start_date:n("date")(f.viewModel.start_date,"yyyy-MM-dd"),a=angular.isString(f.viewModel.end_date)?f.viewModel.end_date:n("date")(f.viewModel.end_date,"yyyy-MM-dd"),i=angular.isString(f.viewModel.start_time)?f.viewModel.start_time:n("date")(f.viewModel.start_time,"HH:mm:ss"),r=angular.isString(f.viewModel.end_time)?f.viewModel.end_time:n("date")(f.viewModel.end_time,"HH:mm:ss");f.viewModel.host=[f.selected.host.last_name,f.selected.host.first_name].join(" "),f.viewModel.visitor=[f.selected.visitor.last_name,f.selected.visitor.first_name].join(" "),f.viewModel.start_time=moment([t,i].join(" "),"YYYY-MM-DD HH:mm:ss").toDate(),f.viewModel.end_time=moment([a,r].join(" "),"YYYY-MM-DD HH:mm:ss").toDate(),f.teamMembers=f.viewModel.teams}var u=2,f=this;f.errorMsg={},f.viewModel={},f.viewModel.start_date=new Date,f.viewModel.end_date=new Date,f.viewModel.start_time=new Date,f.viewModel.end_time=moment().add(30,"m").toDate(),f.viewModel.purpose=f.viewModel.purpose||"official",f.teamMembers=[],f.column=12/u,f.selected={},f.model=e.model,f.form=r.modelToForm(f.model,u),f.visitor={exists:!r.isEmpty(a.visitor),_id:a.visitor},f.visitor.exists&&s.get(f.visitor._id).then(function(e){f.selected.visitor=e,f.viewModel.visitor=[e.last_name,e.first_name].join(" "),f.model.visitor.formType="text"}).catch();var v=a._id;v&&e.get(v).then(function(e){p(e)}).catch(function(e){console.log(e)}),f.save=function(){e.validate(f.viewModel).then(function(a){if(m(),i.isEmptyObject(a)){f.viewModel.host=f.selected.host._id,f.viewModel.visitor=f.selected.visitor._id,f.viewModel.start_date=n("date")(f.viewModel.start_date,"yyyy-MM-dd"),f.viewModel.end_date=n("date")(f.viewModel.end_date,"yyyy-MM-dd"),f.viewModel.start_time=n("date")(f.viewModel.start_time,"HH:mm:ss"),f.viewModel.end_time=n("date")(f.viewModel.end_time,"HH:mm:ss"),o.currentUser._id===f.selected.host._id&&(f.viewModel.is_approved=!0),f.teamMembers.length>0&&(f.viewModel.teams=f.teamMembers.map(function(e){return e._id}));var r=angular.copy(f.viewModel);r.visitor=f.selected.visitor,r.host=f.selected.host,e.save(f.viewModel).then(function(){v||(e.sms(r,"created"),e.email(r,"created")),t.go("appointments.all")}).catch(function(e){p(),angular.merge(f.errorMsg,e)})}else f.errorMsg=a}).catch(function(e){console.log(e)})},f.validateField=function(t){f.errorMsg[t]=[];var a={};-1!==["start_time","end_time"].indexOf(t)?(f.errorMsg.start_time=[],f.errorMsg.end_time=[],new Date(f.viewModel.start_time).getTime()>new Date(f.viewModel.end_time).getTime()&&(f.viewModel.end_time=moment(f.viewModel.start_time).add(30,"m")),a=e.dateTimeValidation(f.viewModel.start_time,f.viewModel.end_time,"time",f.viewModel)):-1!==["start_date","end_date"].indexOf(t)?(f.errorMsg.start_date=[],f.errorMsg.end_date=[],new Date(f.viewModel.start_date).getTime()>new Date(f.viewModel.end_date).getTime()&&(f.viewModel.end_date=f.viewModel.start_date),a=e.dateTimeValidation(f.viewModel.start_date,f.viewModel.end_date,"date",f.viewModel)):"purpose"===t&&(a=e.dateTimeValidation(f.viewModel.start_date,f.viewModel.end_date,"date",f.viewModel)),f.model.hasOwnProperty(t)&&e.validateField(f.viewModel[t],t,f.viewModel._id).then(function(e){f.errorMsg[t]=e,f.errorMsg=angular.merge(f.errorMsg,a)}).catch(function(e){console.log(e)})},f.date={start_date:{opened:!1,open:c},end_date:{opened:!1,open:c}},f.time={start_time:{hstep:1,mstep:15,ismeridian:!0,toggleMode:function(){this.ismeridian=!this.ismeridian}},end_time:{hstep:1,mstep:15,ismeridian:!0,toggleMode:function(){this.ismeridian=!this.ismeridian}}},f.typeahead={host:{get:function(e){return l.all({q:e,"only-fields":"first_name,last_name,phone"}).then(function(e){return e.results.map(function(e){return{name:[e.last_name,e.first_name].join(" "),_id:e._id}})}).catch(function(e){console.log(e)})},onSelect:function(e){f.selected.host=e},editable:!1,disabled:!1},visitor:{get:function(e){return s.all({q:e,"only-fields":"first_name,last_name,phone"}).then(function(e){return e.results.map(function(e){return{name:[e.last_name,e.first_name].join(" "),_id:e._id}})}).catch(function(e){console.log(e)})},onSelect:function(e){f.selected.visitor=e},editable:!1,disabled:f.visitor.exists}},f.placeholder=r.placeholder,f.cancel=function(){t.go("appointments.all")},f.addMember=function(){var e=d.create("app/appointments/form/partials/visitor.html","TeamMembersCtrl",{vm:f},{size:"sm"},"formCtrl").result;e.then(function(e){var t=f.teamMembers.filter(function(t){return e._id===t._id});0===t.length&&f.teamMembers.push(e)}).catch(function(e){console.log(e)})}}]).controller("TeamMembersCtrl",["$scope","$modalInstance","data","visitorService","formService",function(e,t,a,i,r){var l=this,s=1;l.model=angular.copy(i.model),l.errorMsg={},l.viewModel={},l.column=12/s;for(var n in l.model)l.model.hasOwnProperty(n)&&-1===["last_name","first_name","phone"].indexOf(n)&&(l.model[n].hidden=!0),l.model.hasOwnProperty(n)&&-1!==["last_name","first_name","phone"].indexOf(n)&&(l.model[n].formType="typeahead-remote"),"phone"===n&&(l.model[n].template="app/appointments/form/partials/phone.html");l.phone={prefixes:r.phonePrefixes()},l.form=r.modelToForm(l.model,s),l.save=function(){l.viewModel._id?t.close(l.viewModel):(l.viewModel.phone=i.getPhone(l.viewModel["phone.prefix"],l.viewModel["phone.suffix"]),i.validate(l.viewModel).then(function(e){e=i.updateForPhone(e),e=i.updateForPrefix(e,l.viewModel["phone.prefix"]),utility.isEmptyObject(e)?(i.isEmpty(l.viewModel["company.name"])||(l.viewModel.company={name:l.viewModel["company.name"]}),i.isEmpty(l.viewModel["company.address"])||i.isEmpty(l.viewModel["company.name"])||(l.viewModel.company.address=l.viewModel["company.address"]),i.save(l.viewModel).then(function(e){t.close(e)}).catch(function(e){angular.merge(l.errorMsg,e)})):l.errorMsg=e}).catch(function(e){console.log(e)}))},l.cancel=function(){t.dismiss("closed")},l.validateField=function(e){if(l.errorMsg[e]="",l.model.hasOwnProperty(e)){if("phone.suffix"===e)"Others"===l.viewModel["phone.prefix"]?(l.model["phone.suffix"].minLength=6,l.model["phone.suffix"].maxLength=15):(l.model["phone.suffix"].maxLength=7,l.model["phone.suffix"].minLength=7);else if("phone.prefix"===e&&"Others"===l.viewModel["phone.prefix"])return[];i.validateField(l.model[e],l.viewModel[e],l.viewModel._id).then(function(t){l.errorMsg[e]="phone.prefix"===e&&t.length>0?["Please select from list"]:t}).catch(function(e){console.log(e)})}"phone.prefix"!==e&&"phone.suffix"!==e||i.isEmpty(l.viewModel["phone.prefix"])||i.isEmpty(l.viewModel["phone.suffix"])||i.validateField(l.viewModel[e],e,l.viewModel._id).then(function(e){l.errorMsg.phone=e.length?e:""}).catch(function(e){console.log(e)})},l.foundInList={},l.typeahead={last_name:{get:function(e){return i.all({q:e,"only-fields":"first_name,last_name,phone"}).then(function(e){return e.results.map(function(e){return l.foundInList[e._id]=e,{name:[e.last_name,e.first_name].join(" "),_id:e._id}})}).catch(function(e){console.log(e)})},onSelect:function(e){console.log(e)},editable:!0,disabled:!1},"phone.suffix":{get:function(e){var t=l.viewModel["phone.prefix"]||"";console.log(l.viewModel);var a=[t,e].join("");return i.all({q:a,"only-fields":"first_name,last_name,phone"}).then(function(e){return e.results.map(function(e){return l.foundInList[e._id]=e,{name:[[e.last_name,e.first_name].join(" "),e.phone].join("<br>"),_id:e._id}})}).catch(function(e){console.log(e)})},onSelect:function(e){l.viewModel=l.foundInList[e._id],l.viewModel["company.name"]=l.viewModel.company.name,l.viewModel["company.address"]=l.viewModel.company.address;var t=i.recoverPhone(l.viewModel.phone);l.viewModel=angular.merge({},l.viewModel,t)},editable:!0},first_name:{get:function(e){return i.all({q:e,"only-fields":"first_name,last_name,phone"}).then(function(e){return e.results.map(function(e){return l.foundInList[e._id]=e,{name:[[e.last_name,e.first_name].join(" "),e.phone].join("<br>"),_id:e._id}})}).catch(function(e){console.log(e)})},onSelect:function(e){l.viewModel=l.foundInList[e._id],l.viewModel["company.name"]=l.viewModel.company.name,l.viewModel["company.address"]=l.viewModel.company.address;var t=i.recoverPhone(l.viewModel.phone);l.viewModel=angular.merge({},l.viewModel,t)},editable:!0}}}]),angular.module("appointments").config(["$stateProvider",function(e){e.state("appointments.all",{url:"/all",parent:"appointments",templateUrl:"app/appointments/all/all.html",controller:"AppointmentsAllCtrl",controllerAs:"allCtrl",resolve:{currentState:["appointmentService",function(e){return e.getState().catch(function(){return{}})}]}})}]),angular.module("appointments").controller("AppointmentsAllCtrl",["appointmentService","changesService","currentState","dialog","log","utility","table","$filter",function(e,t,a,i,r,l,s,n){function o(){p.pagination=u.pagination||{},p.pagination.maxSize=p.pagination.maxSize||100,p.pagination.itemsPerPage=p.pagination.itemsPerPage||10,p.pagination.currentPage=p.pagination.currentPage||1,p.orderByColumn=u.orderByColumn||{},0===Object.keys(u.orderByColumn||{}).length&&(p.orderByColumn.date_joined=p.orderByColumn.date_joined||{reverse:!0})}function d(t){return p.orderByColumn.hasOwnProperty(t)&&"[object Object]"===Object.prototype.toString.call(p.orderByColumn[t])?p.orderByColumn[t].reverse=!p.orderByColumn[t].reverse:(p.orderByColumn={},p.orderByColumn[t]={reverse:!0}),u.orderByColumn=p.orderByColumn,e.setState(u).catch(function(e){console.log(e)}),p.orderByColumn}function c(e){e=e||{};var t=e.column,a=e.page,i=e.filterParams,r={};if(r.page=angular.isDefined(p.pagination.currentPage)?p.pagination.currentPage:1,r.limit=angular.isDefined(p.pagination.itemsPerPage)?p.pagination.itemsPerPage:10,a&&(r.page=a),t){var l=d(t);r.order_by=l[t].reverse?t:["-",t].join("")}if(i&&"[object Object]"===Object.prototype.toString.call(i))for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s]);return r}function m(e){e.preventDefault(),e.stopPropagation(),this.opened=!this.opened}var p=this,u=a||{};p.items=[],p.search={},p.inProgress=!1,p.filterFields=s.appointments,o(),p.updateView=function(t){var a=t||{};"[object String]"===Object.prototype.toString.call(t)&&(a={column:t}),p.inProgress=!0;var i=c(a);e.all(i).then(function(t){p.items=t.results,p.pagination.totalItems=t.count,p.pagination.itemsPerPage=parseInt(p.pagination.itemsPerPage,10),p.pagination.numPages=Math.ceil(parseInt(p.pagination.totalItems,10)/parseInt(p.pagination.itemsPerPage,10)),u.pagination=p.pagination,u.orderByColumn=p.orderByColumn,u.lastCheckTime=(new Date).getTime(),e.setState(u).catch(function(e){console.log(e)}),p.inProgress=!1}).catch(function(e){p.inProgress=!1,r.error(e)})},p.status=e.status,p.updateView(),t.pollForChanges(p,e,"appointments"),p.remove=function(t){i.confirm("Do you want to remove this record permanently?").then(function(){e.remove(t).then(function(){p.updateView(),r.success("recordRemovedSuccessfully")}).catch(function(e){r.error(e.detail||e)})})},p.header=["Host Name","Visitors Name","Date","Start Time","End Time","Host Department","Floor"],p.getList=function(){var t=c("created","all");return e.all(t).then(function(e){return e.results.map(function(e){return{host:[e.host.first_name,e.host.last_name].join(" "),visitor:[e.visitor.first_name,e.visitor.last_name].join(" "),date:e.start_date,start_time:e.start_time,end_time:e.end_time,department:e.host.department.name,floor:e.host.department.floor}})})},p.filename=l.getFileName("appointments"),p.startSearch=function(){p.is_active_search=Object.keys(p.search).length>0;var e={filterParams:{}},t=Object.keys(p.search);if(t.length>0)for(var a in p.search)p.search.hasOwnProperty(a)&&void 0!==p.search[a]&&p.search[a].length>2?e.filterParams[a]=p.search[a]:p.search.hasOwnProperty(a)&&void 0!==p.search[a]&&-1!==["start_date","end_date"].indexOf(a)&&(e.filterParams[a]=n("date")(p.search[a],"yyyy-MM-dd"));Object.keys(e.filterParams).length>0?(e.filterParams.search=!0,p.updateView(e)):p.updateView()},p.clear=function(){p.search={},p.updateView()},p.searchPage=function(){var e={filterParams:{}};void 0!==p.q&&""!==p.q&&(e.filterParams.q=p.q,p.updateView(e))},p.date={start_date:{opened:!1,open:m},end_date:{opened:!1,open:m}}}]),function(e){e.fn.aceWizard=e.fn.ace_wizard=function(t){return this.each(function(){var a=e(this);a.wizard(),ace.vars.old_ie&&a.find("ul.steps > li").last().addClass("last-child");var i=t&&t.buttons?e(t.buttons):a.siblings(".wizard-actions").eq(0),r=a.data("fu.wizard");r.$prevBtn.remove(),r.$nextBtn.remove(),r.$prevBtn=i.find(".btn-prev").eq(0).on(ace.click_event,function(){r.previous()}).attr("disabled","disabled"),r.$nextBtn=i.find(".btn-next").eq(0).on(ace.click_event,function(){r.next()}).removeAttr("disabled"),r.nextText=r.$nextBtn.text();var l=t&&(t.selectedItem&&t.selectedItem.step||t.step);l&&(r.currentStep=l,r.setState())}),this}}(window.jQuery),function(e,t){var a=function(a,i){function r(e){e.preventDefault(),e.stopPropagation();var t=k.offset(),a=t[v],i=y?e.pageY:e.pageX;i>a+D?(D=i-a-N+B,D>$&&(D=$)):(D=i-a-B,0>D&&(D=0)),p.update_scroll()}function l(t){t.preventDefault(),t.stopPropagation(),at=tt=y?t.pageY:t.pageX,V=!0,e("html").off("mousemove.ace_scroll").on("mousemove.ace_scroll",s),e(R).off("mouseup.ace_scroll").on("mouseup.ace_scroll",n),k.addClass("active"),H&&p.$element.trigger("drag.start")}function s(e){e.preventDefault(),e.stopPropagation(),at=y?e.pageY:e.pageX,at-tt+D>$?at=tt+$-D:0>at-tt+D&&(at=tt-D),D+=at-tt,tt=at,0>D?D=0:D>$&&(D=$),p.update_scroll()}function n(t){t.preventDefault(),t.stopPropagation(),V=!1,e("html").off(".ace_scroll"),e(R).off(".ace_scroll"),k.removeClass("active"),H&&p.$element.trigger("drag.end"),x&&Z&&!K&&d()}function o(e){var t=+new Date;if(Q&&t-rt>1e3){var a=M[C];X!=a&&(X=a,et=!0,p.reset(!0)),rt=t}x&&Z&&(null!=it&&(clearTimeout(it),it=null),k.addClass("not-idle"),K||1!=e||d())}function d(){null!=it&&(clearTimeout(it),it=null),it=setTimeout(function(){it=null,k.removeClass("not-idle")},J)}function c(){k.css("visibility","hidden").addClass("scroll-hover"),q=y?parseInt(k.outerWidth())||0:parseInt(k.outerHeight())||0,k.css("visibility","").removeClass("scroll-hover")}function m(){if(Y!==!1){var e=S.offset(),t=e.left,a=e.top;y?F||(t+=S.outerWidth()-q):F||(a+=S.outerHeight()-q),Y===!0?k.css({top:parseInt(a),left:parseInt(t)}):"left"===Y?k.css("left",parseInt(t)):"top"===Y&&k.css("top",parseInt(a))}}var p=this,u=ace.helper.getAttrSettings(a,e.fn.ace_scroll.defaults),f=e.extend({},e.fn.ace_scroll.defaults,i,u);this.size=0,this.lock=!1,this.lock_anyway=!1,this.$element=e(a),this.element=a;var v,g,h,b,w,C,y=!0,_=!1,x=!1,P=!1,S=null,M=null,k=null,A=null,E=null,I=null,T=null,N=0,D=0,$=0,B=0,O=!0,U=!1,j="",F=!1,q=0,z=1,L=!1,V=!1,R="onmouseup"in window?window:"html",H=f.dragEvent||!1,G=i.scrollEvent||!1,W=f.detached||!1,Y=f.updatePos||!1,Z=f.hideOnIdle||!1,J=f.hideDelay||1500,K=!1,Q=f.observeContent||!1,X=0,et=!0;this.create=function(t){if(!P){t&&(f=e.extend({},e.fn.ace_scroll.defaults,t)),this.size=parseInt(this.$element.attr("data-size"))||f.size||200,y=!f.horizontal,v=y?"top":"left",g=y?"height":"width",h=y?"maxHeight":"maxWidth",b=y?"clientHeight":"clientWidth",w=y?"scrollTop":"scrollLeft",C=y?"scrollHeight":"scrollWidth",this.$element.addClass("ace-scroll"),"static"==this.$element.css("position")?(L=this.element.style.position,this.element.style.position="relative"):L=!1;var a=null;W?a=e('<div class="scroll-track scroll-detached"><div class="scroll-bar"></div></div>').appendTo("body"):(this.$element.wrapInner('<div class="scroll-content" />'),this.$element.prepend('<div class="scroll-track"><div class="scroll-bar"></div></div>')),S=this.$element,W||(S=this.$element.find(".scroll-content").eq(0)),y||S.wrapInner("<div />"),M=S.get(0),W?(k=a,m()):k=this.$element.find(".scroll-track").eq(0),A=k.find(".scroll-bar").eq(0),E=k.get(0),I=A.get(0),T=I.style,y||k.addClass("scroll-hz"),f.styleClass&&(j=f.styleClass,k.addClass(j),F=!!j.match(/scroll\-left|scroll\-top/)),0==q&&(k.show(),c()),k.hide(),k.on("mousedown",r),A.on("mousedown",l),S.on("scroll",function(){O&&(D=parseInt(Math.round(this[w]*z)),T[v]=D+"px"),O=!1,G&&this.$element.trigger("scroll",[M])}),f.mouseWheel&&(this.lock=f.mouseWheelLock,this.lock_anyway=f.lockAnyway,this.$element.on(e.event.special.mousewheel?"mousewheel.ace_scroll":"mousewheel.ace_scroll DOMMouseScroll.ace_scroll",function(t){if(!_){if(o(!0),!x)return!p.lock_anyway;V&&(V=!1,e("html").off(".ace_scroll"),e(R).off(".ace_scroll"),H&&p.$element.trigger("drag.end")),t.deltaY=t.deltaY||0;var a=t.deltaY>0||t.originalEvent.detail<0||t.originalEvent.wheelDelta>0?1:-1,i=!1,r=M[b],l=M[w];p.lock||(i=-1==a?M[C]<=l+r:0==l),p.move_bar(!0);var s=parseInt(r/8);return 80>s&&(s=80),s>p.size&&(s=p.size),s+=1,M[w]=l-a*s,i&&!p.lock_anyway}}));var i=ace.vars.touch&&"ace_drag"in e.event.special&&f.touchDrag;if(i){var s="",n=i?"ace_drag":"swipe";this.$element.on(n+".ace_scroll",function(e){if(_)return void(e.retval.cancel=!0);if(o(!0),!x)return void(e.retval.cancel=this.lock_anyway);if(s=e.direction,y&&("up"==s||"down"==s)||!y&&("left"==s||"right"==s)){var t=y?e.dy:e.dx;0!=t&&(Math.abs(t)>20&&i&&(t=2*t),p.move_bar(!0),M[w]=M[w]+t)}})}Z&&k.addClass("idle-hide"),Q&&k.on("mouseenter.ace_scroll",function(){K=!0,o(!1)}).on("mouseleave.ace_scroll",function(){K=!1,0==V&&d()}),this.$element.on("mouseenter.ace_scroll touchstart.ace_scroll",function(){et=!0,Q?o(!0):f.hoverReset&&p.reset(!0),k.addClass("scroll-hover")}).on("mouseleave.ace_scroll touchend.ace_scroll",function(){k.removeClass("scroll-hover")}),y||S.children(0).css(g,this.size),S.css(h,this.size),_=!1,P=!0}},this.is_active=function(){return x},this.is_enabled=function(){return!_},this.move_bar=function(e){O=e},this.get_track=function(){return E},this.reset=function(e){if(!_){P||this.create();var t=this.size;if(!e||et){if(et=!1,W){var a=parseInt(Math.round((parseInt(S.css("border-top-width"))+parseInt(S.css("border-bottom-width")))/2.5));t-=a}var i=y?M[C]:t;if(y&&0==i||!y&&0==this.element.scrollWidth)return void k.removeClass("scroll-active");var r=y?t:M.clientWidth;y||S.children(0).css(g,t),S.css(h,this.size),i>r?(x=!0,k.css(g,r).show(),z=parseFloat((r/i).toFixed(5)),N=parseInt(Math.round(r*z)),B=parseInt(Math.round(N/2)),$=r-N,D=parseInt(Math.round(M[w]*z)),T[g]=N+"px",T[v]=D+"px",k.addClass("scroll-active"),0==q&&c(),U||(f.reset&&(M[w]=0,T[v]=0),U=!0),W&&m()):(x=!1,k.hide(),k.removeClass("scroll-active"),S.css(h,""))}}},this.disable=function(){M[w]=0,T[v]=0,_=!0,x=!1,k.hide(),this.$element.addClass("scroll-disabled"),k.removeClass("scroll-active"),S.css(h,"")},this.enable=function(){_=!1,this.$element.removeClass("scroll-disabled")},this.destroy=function(){x=!1,_=!1,P=!1,this.$element.removeClass("ace-scroll scroll-disabled scroll-active"),this.$element.off(".ace_scroll"),W||(y||S.find("> div").children().unwrap(),S.children().unwrap(),S.remove()),k.remove(),L!==!1&&(this.element.style.position=L),null!=it&&(clearTimeout(it),it=null)},this.modify=function(t){t&&(f=e.extend({},f,t)),this.destroy(),this.create(),et=!0,this.reset(!0)},this.update=function(a){a&&(f=e.extend({},f,a)),this.size=a.size||this.size,this.lock=a.mouseWheelLock||this.lock,this.lock_anyway=a.lockAnyway||this.lock_anyway,a.styleClass!=t&&(j&&k.removeClass(j),j=a.styleClass,j&&k.addClass(j),F=!!j.match(/scroll\-left|scroll\-top/))},this.start=function(){M[w]=0},this.end=function(){M[w]=M[C]},this.hide=function(){k.hide()},this.show=function(){k.show()},this.update_scroll=function(){O=!1,T[v]=D+"px",M[w]=parseInt(Math.round(D/z))};var tt=-1,at=-1,it=null,rt=0;return this.track_size=function(){return 0==q&&c(),q},this.create(),et=!0,this.reset(!0),X=M[C],this};e.fn.ace_scroll=function(i,r){var l,s=this.each(function(){var t=e(this),s=t.data("ace_scroll"),n="object"==typeof i&&i;s||t.data("ace_scroll",s=new a(this,n)),"string"==typeof i&&(l=s[i](r))});return l===t?s:l},e.fn.ace_scroll.defaults={size:200,horizontal:!1,mouseWheel:!0,mouseWheelLock:!1,lockAnyway:!1,styleClass:!1,observeContent:!1,hideOnIdle:!1,hideDelay:1500,hoverReset:!0,reset:!1,dragEvent:!1,touchDrag:!0,touchSwipe:!1,scrollEvent:!1,detached:!1,updatePos:!0}}(window.jQuery),function(e,t){function a(t,a){var r=this,l=e(t),s="right",n=!1,o=l.hasClass("fade"),d=ace.helper.getAttrSettings(t,e.fn.ace_aside.defaults);if(this.settings=e.extend({},e.fn.ace_aside.defaults,a,d),!this.settings.background||a.scroll_style||d.scroll_style||(this.settings.scroll_style="scroll-white no-track"),this.container=this.settings.container,this.container)try{e(this.container).get(0)==document.body&&(this.container=null)}catch(c){}this.container&&(this.settings.backdrop=!1,l.addClass("aside-contained"));var m=l.find(".modal-dialog"),p=l.find(".modal-content"),u=300;this.initiate=function(){t.className=t.className.replace(/(\s|^)aside\-(right|top|left|bottom)(\s|$)/gi,"$1$3"),s=this.settings.placement,s&&(s=e.trim(s.toLowerCase())),s&&/right|top|left|bottom/.test(s)||(s="right"),l.attr("data-placement",s),l.addClass("aside-"+s),/right|left/.test(s)?(n=!0,l.addClass("aside-vc")):l.addClass("aside-hz"),this.settings.fixed&&l.addClass("aside-fixed"),this.settings.background&&l.addClass("aside-dark"),this.settings.offset&&l.addClass("navbar-offset"),this.settings.transition||l.addClass("transition-off"),l.addClass("aside-hidden"),this.insideContainer(),m=l.find(".modal-dialog"),p=l.find(".modal-content"),this.settings.body_scroll||l.on("mousewheel.aside DOMMouseScroll.aside touchmove.aside pointermove.aside",function(t){return e.contains(p[0],t.target)?void 0:(t.preventDefault(),!1)}),0==this.settings.backdrop&&l.addClass("no-backdrop")},this.show=function(){if(0==this.settings.backdrop)try{l.data("bs.modal").$backdrop.remove()}catch(t){}this.container?e(this.container).addClass("overflow-hidden"):l.css("position","fixed"),l.removeClass("aside-hidden")},this.hide=function(){this.container&&(this.container.addClass("overflow-hidden"),ace.vars.firefox&&t.offsetHeight),f(),ace.vars.transition&&!o&&l.one("bsTransitionEnd",function(){l.addClass("aside-hidden"),l.css("position",""),r.container&&r.container.removeClass("overflow-hidden")}).emulateTransitionEnd(u)},this.shown=function(){if(f(),e("body").removeClass("modal-open").css("padding-right",""),"invisible"==this.settings.backdrop)try{l.data("bs.modal").$backdrop.css("opacity",0)}catch(t){}var a=n?p.height():m.height();ace.vars.touch?p.addClass("overflow-scroll").css("max-height",a+"px"):p.hasClass("ace-scroll")||p.ace_scroll({size:a,reset:!0,mouseWheelLock:!0,lockAnyway:!this.settings.body_scroll,styleClass:this.settings.scroll_style,observeContent:!0,hideOnIdle:!ace.vars.old_ie,hideDelay:1500}),i.off("resize.modal.aside").on("resize.modal.aside",function(){if(ace.vars.touch)p.css("max-height",(n?p.height():m.height())+"px");else{p.ace_scroll("disable");var e=n?p.height():m.height();p.ace_scroll("update",{size:e}).ace_scroll("enable").ace_scroll("reset")}}).triggerHandler("resize.modal.aside"),r.container&&ace.vars.transition&&!o&&l.one("bsTransitionEnd",function(){r.container.removeClass("overflow-hidden")}).emulateTransitionEnd(u)},this.hidden=function(){i.off(".aside"),(!ace.vars.transition||o)&&(l.addClass("aside-hidden"),l.css("position",""))},this.insideContainer=function(){var t=e(".main-container"),a=l.find(".modal-dialog");if(a.css({right:"",left:""}),t.hasClass("container")){var r=!1;1==n&&(a.css(s,parseInt((i.width()-t.width())/2)),r=!0),r&&ace.vars.firefox&&ace.helper.redraw(t[0])}},this.flip=function(){var e={right:"left",left:"right",top:"bottom",bottom:"top"};l.removeClass("aside-"+s).addClass("aside-"+e[s]),s=e[s]};var f=function(){var e=l.find(".aside-trigger");if(0!=e.length){e.toggleClass("open");var t=e.find(ace.vars[".icon"]);0!=t.length&&t.toggleClass(t.attr("data-icon1")+" "+t.attr("data-icon2"))}};this.initiate(),this.container&&(this.container=e(this.container)),l.appendTo(this.container||"body")}var i=e(window);e(document).on("show.bs.modal",".modal.aside",function(){e(".aside.in").modal("hide"),e(this).ace_aside("show")}).on("hide.bs.modal",".modal.aside",function(){e(this).ace_aside("hide")}).on("shown.bs.modal",".modal.aside",function(){e(this).ace_aside("shown")}).on("hidden.bs.modal",".modal.aside",function(){e(this).ace_aside("hidden")}),e(window).on("resize.aside_container",function(){e(".modal.aside").ace_aside("insideContainer")}),e(document).on("settings.ace.aside",function(t,a){"main_container_fixed"==a&&e(".modal.aside").ace_aside("insideContainer")}),e.fn.aceAside=e.fn.ace_aside=function(i,r){var l,s=this.each(function(){var t=e(this),s=t.data("ace_aside"),n="object"==typeof i&&i;s||t.data("ace_aside",s=new a(this,n)),"string"==typeof i&&"function"==typeof s[i]&&(l=r instanceof Array?s[i].apply(s,r):s[i](r))});return l===t?s:l},e.fn.ace_aside.defaults={fixed:!1,background:!1,offset:!1,body_scroll:!1,transition:!0,scroll_style:"scroll-dark no-track",container:null,backdrop:!1,placement:"right"}}(window.jQuery),function(e,t){function a(t,a){var i=t.find(".widget-main").eq(0);e(window).off("resize.widget.scroll");var r=ace.vars.old_ie||ace.vars.touch;if(a){var l=i.data("ace_scroll");l&&i.data("save_scroll",{size:l.size,lock:l.lock,lock_anyway:l.lock_anyway});var s=t.height()-t.find(".widget-header").height()-10;s=parseInt(s),i.css("min-height",s),r?(l&&i.ace_scroll("disable"),i.css("max-height",s).addClass("overflow-scroll")):(l?i.ace_scroll("update",{size:s,mouseWheelLock:!0,lockAnyway:!0}):i.ace_scroll({size:s,mouseWheelLock:!0,lockAnyway:!0}),i.ace_scroll("enable").ace_scroll("reset")),e(window).on("resize.widget.scroll",function(){var e=t.height()-t.find(".widget-header").height()-10;e=parseInt(e),i.css("min-height",e),r?i.css("max-height",e).addClass("overflow-scroll"):i.ace_scroll("update",{size:e}).ace_scroll("reset")})}else{i.css("min-height","");var n=i.data("save_scroll");n&&i.ace_scroll("update",{size:n.size,mouseWheelLock:n.lock,lockAnyway:n.lock_anyway}).ace_scroll("enable").ace_scroll("reset"),r?i.css("max-height","").removeClass("overflow-scroll"):n||i.ace_scroll("disable")}}var i=function(t){this.$box=e(t);this.reload=function(){var e=this.$box,t=!1;"static"==e.css("position")&&(t=!0,e.addClass("position-relative")),e.append('<div class="widget-box-overlay"><i class="'+ace.vars.icon+'loading-icon fa fa-spinner fa-spin fa-2x white"></i></div>'),e.one("reloaded.ace.widget",function(){e.find(".widget-box-overlay").remove(),t&&e.removeClass("position-relative")})},this.close=function(){var e=this.$box,t=300;e.fadeOut(t,function(){e.trigger("closed.ace.widget"),e.remove()})},this.toggle=function(e,t){var a=this.$box,i=a.find(".widget-body").eq(0),r=null,l="undefined"!=typeof e?e:a.hasClass("collapsed")?"show":"hide",s="show"==l?"shown":"hidden";if("undefined"==typeof t&&(t=a.find("> .widget-header a[data-action=collapse]").eq(0),0==t.length&&(t=null)),t){r=t.find(ace.vars[".icon"]).eq(0);var n,o=null,d=null;(o=r.attr("data-icon-show"))?d=r.attr("data-icon-hide"):(n=r.attr("class").match(/fa\-(.*)\-(up|down)/))&&(o="fa-"+n[1]+"-down",d="fa-"+n[1]+"-up")}var c=250,m=200;"show"==l?(r&&r.removeClass(o).addClass(d),i.hide(),a.removeClass("collapsed"),i.slideDown(c,function(){a.trigger(s+".ace.widget")})):(r&&r.removeClass(d).addClass(o),i.slideUp(m,function(){a.addClass("collapsed"),a.trigger(s+".ace.widget")}))},this.hide=function(){this.toggle("hide")},this.show=function(){this.toggle("show")},this.fullscreen=function(){var e=this.$box.find("> .widget-header a[data-action=fullscreen]").find(ace.vars[".icon"]).eq(0),t=null,i=null;(t=e.attr("data-icon1"))?i=e.attr("data-icon2"):(t="fa-expand",i="fa-compress"),this.$box.hasClass("fullscreen")?(e.addClass(t).removeClass(i),this.$box.removeClass("fullscreen"),a(this.$box,!1)):(e.removeClass(t).addClass(i),this.$box.addClass("fullscreen"),a(this.$box,!0)),this.$box.trigger("fullscreened.ace.widget")
}};e.fn.widget_box=function(a,r){var l,s=this.each(function(){var t=e(this),s=t.data("widget_box"),n="object"==typeof a&&a;s||t.data("widget_box",s=new i(this,n)),"string"==typeof a&&(l=s[a](r))});return l===t?s:l},e(document).on("click.ace.widget",".widget-header a[data-action]",function(t){t.preventDefault();var a=e(this),r=a.closest(".widget-box");if(0!=r.length&&!r.hasClass("ui-sortable-helper")){var l=r.data("widget_box");l||r.data("widget_box",l=new i(r.get(0)));var s=a.data("action");if("collapse"==s){var n,o=r.hasClass("collapsed")?"show":"hide";if(r.trigger(n=e.Event(o+".ace.widget")),n.isDefaultPrevented())return;l.toggle(o,a)}else if("close"==s){var n;if(r.trigger(n=e.Event("close.ace.widget")),n.isDefaultPrevented())return;l.close()}else if("reload"==s){a.blur();var n;if(r.trigger(n=e.Event("reload.ace.widget")),n.isDefaultPrevented())return;l.reload()}else if("fullscreen"==s){var n;if(r.trigger(n=e.Event("fullscreen.ace.widget")),n.isDefaultPrevented())return;l.fullscreen()}else"settings"==s&&r.trigger("setting.ace.widget")}})}(window.jQuery),function(e,t){function a(a,r){function l(){this.mobile_view=this.mobile_style<4&&this.is_mobile_view(),this.collapsible=!this.mobile_view&&this.is_collapsible(),this.minimized=!this.collapsible&&this.$sidebar.hasClass(m)||3==this.mobile_style&&this.mobile_view&&this.$sidebar.hasClass(p),this.horizontal=!(this.mobile_view||this.collapsible)&&this.$sidebar.hasClass(u)}var s=this;this.$sidebar=e(a),this.$sidebar.attr("data-sidebar","true"),this.$sidebar.attr("id")||this.$sidebar.attr("id","id-sidebar-"+ ++i);var n=ace.helper.getAttrSettings(a,e.fn.ace_sidebar.defaults,"sidebar-");this.settings=e.extend({},e.fn.ace_sidebar.defaults,r,n),this.minimized=!1,this.collapsible=!1,this.horizontal=!1,this.mobile_view=!1,this.vars=function(){return{minimized:this.minimized,collapsible:this.collapsible,horizontal:this.horizontal,mobile_view:this.mobile_view}},this.get=function(e){return this.hasOwnProperty(e)?this[e]:void 0},this.set=function(e,t){this.hasOwnProperty(e)&&(this[e]=t)},this.ref=function(){return this};var o=function(a){var i,r,l=e(this).find(ace.vars[".icon"]);l.length>0&&(i=l.attr("data-icon1"),r=l.attr("data-icon2"),a!==t?a?l.removeClass(i).addClass(r):l.removeClass(r).addClass(i):l.toggleClass(i).toggleClass(r))},d=function(){var t=s.$sidebar.find(".sidebar-collapse");return 0==t.length&&(t=e('.sidebar-collapse[data-target="#'+(s.$sidebar.attr("id")||"")+'"]')),t=0!=t.length?t[0]:null};this.toggleMenu=function(e,t){if(!this.collapsible){this.minimized=!this.minimized;try{ace.settings.sidebar_collapsed(a,this.minimized,!(e===!1||t===!1))}catch(i){this.minimized?this.$sidebar.addClass("menu-min"):this.$sidebar.removeClass("menu-min")}e||(e=d()),e&&o.call(e,this.minimized),ace.vars.old_ie&&ace.helper.redraw(a)}},this.collapse=function(e,t){this.collapsible||(this.minimized=!1,this.toggleMenu(e,t))},this.expand=function(e,t){this.collapsible||(this.minimized=!0,this.toggleMenu(e,t))},this.toggleResponsive=function(t){if(this.mobile_view&&3==this.mobile_style){if(this.$sidebar.hasClass("menu-min")){this.$sidebar.removeClass("menu-min");var a=d();a&&o.call(a)}if(this.minimized=!this.$sidebar.hasClass("responsive-min"),this.$sidebar.toggleClass("responsive-min responsive-max"),t||(t=this.$sidebar.find(".sidebar-expand"),0==t.length&&(t=e('.sidebar-expand[data-target="#'+(this.$sidebar.attr("id")||"")+'"]')),t=0!=t.length?t[0]:null),t){var i,r,l=e(t).find(ace.vars[".icon"]);l.length>0&&(i=l.attr("data-icon1"),r=l.attr("data-icon2"),l.toggleClass(i).toggleClass(r))}e(document).triggerHandler("settings.ace",["sidebar_collapsed",this.minimized])}},this.is_collapsible=function(){var t;return this.$sidebar.hasClass("navbar-collapse")&&null!=(t=e('.navbar-toggle[data-target="#'+(this.$sidebar.attr("id")||"")+'"]').get(0))&&t.scrollHeight>0},this.is_mobile_view=function(){var t;return null!=(t=e('.menu-toggler[data-target="#'+(this.$sidebar.attr("id")||"")+'"]').get(0))&&t.scrollHeight>0},this.$sidebar.on(ace.click_event+".ace.submenu",".nav-list",function(t){var a=this,i=e(t.target).closest("a");if(i&&0!=i.length){var r=s.minimized&&!s.collapsible;if(i.hasClass("dropdown-toggle")){t.preventDefault();var l=i.siblings(".submenu").get(0);if(!l)return!1;var n=e(l),o=0,d=l.parentNode.parentNode;if(r&&d==a||n.parent().hasClass("hover")&&"absolute"==n.css("position")&&!s.collapsible)return!1;var c=0==l.scrollHeight;return c&&e(d).find("> .open > .submenu").each(function(){this==l||e(this.parentNode).hasClass("active")||(o-=this.scrollHeight,s.hide(this,s.settings.duration,!1))}),c?(s.show(l,s.settings.duration),0!=o&&(o+=l.scrollHeight)):(s.hide(l,s.settings.duration),o-=l.scrollHeight),0!=o&&("true"!=s.$sidebar.attr("data-sidebar-scroll")||s.minimized||s.$sidebar.ace_sidebar_scroll("prehide",o)),!1}if("tap"==ace.click_event&&r&&i.get(0).parentNode.parentNode==a){var m=i.find(".menu-text").get(0);if(null!=m&&t.target!=m&&!e.contains(m,t.target))return t.preventDefault(),!1}if(ace.vars.ios_safari&&"false"!==i.attr("data-link"))return document.location=i.attr("href"),t.preventDefault(),!1}});var c=!1;this.show=function(t,a,i){if(i=i!==!1,i&&c)return!1;var r,l=e(t);if(l.trigger(r=e.Event("show.ace.submenu")),r.isDefaultPrevented())return!1;i&&(c=!0),a=a||this.settings.duration,l.css({height:0,overflow:"hidden",display:"block"}).removeClass("nav-hide").addClass("nav-show").parent().addClass("open"),t.scrollTop=0,a>0&&l.css({height:t.scrollHeight,"transition-property":"height","transition-duration":a/1e3+"s"});var s=function(t,a){t&&t.stopPropagation(),l.css({"transition-property":"","transition-duration":"",overflow:"",height:""}),a!==!1&&l.trigger(e.Event("shown.ace.submenu")),i&&(c=!1)};return a>0&&e.support.transition.end?l.one(e.support.transition.end,s):s(),ace.vars.android&&setTimeout(function(){s(null,!1),ace.helper.redraw(t)},a+20),!0},this.hide=function(t,a,i){if(i=i!==!1,i&&c)return!1;var r,l=e(t);if(l.trigger(r=e.Event("hide.ace.submenu")),r.isDefaultPrevented())return!1;i&&(c=!0),a=a||this.settings.duration,l.css({height:t.scrollHeight,overflow:"hidden",display:"block"}).parent().removeClass("open"),t.offsetHeight,a>0&&l.css({height:0,"transition-property":"height","transition-duration":a/1e3+"s"});var s=function(t,a){t&&t.stopPropagation(),l.css({display:"none",overflow:"",height:"","transition-property":"","transition-duration":""}).removeClass("nav-show").addClass("nav-hide"),a!==!1&&l.trigger(e.Event("hidden.ace.submenu")),i&&(c=!1)};return a>0&&e.support.transition.end?l.one(e.support.transition.end,s):s(),ace.vars.android&&setTimeout(function(){s(null,!1),ace.helper.redraw(t)},a+20),!0},this.toggle=function(e,t){if(t=t||s.settings.duration,0==e.scrollHeight){if(this.show(e,t))return 1}else if(this.hide(e,t))return-1;return 0};var m="menu-min",p="responsive-min",u="h-sidebar",f=function(){this.mobile_style=1,this.$sidebar.hasClass("responsive")&&!e('.menu-toggler[data-target="#'+this.$sidebar.attr("id")+'"]').hasClass("navbar-toggle")?this.mobile_style=2:this.$sidebar.hasClass(p)?this.mobile_style=3:this.$sidebar.hasClass("navbar-collapse")&&(this.mobile_style=4)};f.call(s),e(window).on("resize.sidebar.vars",function(){l.call(s)}).triggerHandler("resize.sidebar.vars")}var i=0;e(document).on(ace.click_event+".ace.menu",".menu-toggler",function(t){var a=e(this),i=e(a.attr("data-target"));if(0!=i.length){t.preventDefault(),i.toggleClass("display"),a.toggleClass("display");var r=ace.click_event+".ace.autohide",l="true"===i.attr("data-auto-hide");return a.hasClass("display")?(l&&e(document).on(r,function(t){return i.get(0)==t.target||e.contains(i.get(0),t.target)?void t.stopPropagation():(i.removeClass("display"),a.removeClass("display"),void e(document).off(r))}),"true"==i.attr("data-sidebar-scroll")&&i.ace_sidebar_scroll("reset")):l&&e(document).off(r),!1}}).on(ace.click_event+".ace.menu",".sidebar-collapse",function(t){var a=e(this).attr("data-target"),i=null;a&&(i=e(a)),(null==i||0==i.length)&&(i=e(this).closest(".sidebar")),0!=i.length&&(t.preventDefault(),i.ace_sidebar("toggleMenu",this))}).on(ace.click_event+".ace.menu",".sidebar-expand",function(t){var a=e(this).attr("data-target"),i=null;if(a&&(i=e(a)),(null==i||0==i.length)&&(i=e(this).closest(".sidebar")),0!=i.length){var r=this;t.preventDefault(),i.ace_sidebar("toggleResponsive",this);var l=ace.click_event+".ace.autohide";"true"===i.attr("data-auto-hide")&&(i.hasClass("responsive-max")?e(document).on(l,function(t){return i.get(0)==t.target||e.contains(i.get(0),t.target)?void t.stopPropagation():(i.ace_sidebar("toggleResponsive",r),void e(document).off(l))}):e(document).off(l))}}),e.fn.ace_sidebar=function(i,r){var l,s=this.each(function(){var t=e(this),s=t.data("ace_sidebar"),n="object"==typeof i&&i;s||t.data("ace_sidebar",s=new a(this,n)),"string"==typeof i&&"function"==typeof s[i]&&(l=r instanceof Array?s[i].apply(s,r):s[i](r))});return l===t?s:l},e.fn.ace_sidebar.defaults={duration:300}}(window.jQuery),function(e,t){function a(t,a){var l=this,s=e(window),n=e(t),o=n.find(".nav-list"),d=n.find(".sidebar-toggle").eq(0),c=n.find(".sidebar-shortcuts").eq(0),m=o.get(0);if(m){var p=ace.helper.getAttrSettings(t,e.fn.ace_sidebar_scroll.defaults);this.settings=e.extend({},e.fn.ace_sidebar_scroll.defaults,a,p);var u=l.settings.scroll_to_active;this.only_if_fixed=l.settings.only_if_fixed;var f=n.ace_sidebar("ref");n.attr("data-sidebar-scroll","true");var v=function(){return"absolute"==n.first("li.hover > .submenu").css("position")},g=null,h=null,b=null;this.is_scrolling=!1;var w=!1;this.sidebar_fixed=r(t,"fixed");var C,y,_=function(){var e=o.parent().offset();return l.sidebar_fixed&&(e.top-=ace.helper.scrollTop()),s.innerHeight()-e.top-(l.settings.include_toggle?0:d.outerHeight())},x=function(){return m.scrollHeight},P=function(e){if(!w&&!(l.only_if_fixed&&!l.sidebar_fixed||v())){if(o.wrap('<div class="nav-wrap-up" />'),l.settings.include_shortcuts&&0!=c.length&&o.parent().prepend(c),l.settings.include_toggle&&0!=d.length&&o.parent().append(d),g=o.parent().ace_scroll({size:_(),reset:!0,mouseWheelLock:!0,lockAnyway:l.settings.lock_anyway,styleClass:l.settins.scroll_style,hoverReset:!1}).closest(".ace-scroll").addClass("nav-scroll"),b=g.data("ace_scroll"),h=g.find(".scroll-content").eq(0),i&&!l.settings.include_toggle){var t=d.get(0);t&&h.on("scroll.safari",function(){ace.helper.redraw(t)})}w=!0,1==e&&(l.reset(),u&&l.scroll_to_active(),u=!1)}};this.scroll_to_active=function(){if(b&&b.is_active())try{var e,t=f.vars(),a=n.find(".nav-list");t.minimized&&!t.collapsible?e=a.find("> .active"):(e=o.find("> .active.hover"),0==e.length&&(e=o.find(".active:not(.open)")));var i=e.outerHeight();a=a.get(0);for(var r=e.get(0);r!=a;)i+=r.offsetTop,r=r.parentNode;var l=i-g.height();l>0&&h.scrollTop(l)}catch(s){}},this.reset=function(e){if(e===!0&&(this.sidebar_fixed=r(t,"fixed")),this.only_if_fixed&&!this.sidebar_fixed||v())return void this.disable();w||P(),n.addClass("sidebar-scroll");var a=f.vars(),i=!a.minimized&&!a.collapsible&&!a.horizontal&&(C=_())<(y=m.parentNode.scrollHeight);this.is_scrolling=!0,i&&b&&(b.update({size:C}),b.enable(),b.reset()),i&&b.is_active()||this.is_scrolling&&this.disable()},this.disable=function(){this.is_scrolling=!1,b&&b.disable(),n.removeClass("sidebar-scroll")},this.prehide=function(e){if(this.is_scrolling&&!f.get("minimized"))if(x()+e<_())this.disable();else if(0>e){var t=h.scrollTop()+e;if(0>t)return;h.scrollTop(t)}},this._reset=function(e){e===!0&&(this.sidebar_fixed=r(t,"fixed")),ace.vars.webkit?setTimeout(function(){l.reset()},0):this.reset()},this.get=function(e){return this.hasOwnProperty(e)?this[e]:void 0},this.set=function(e,t){this.hasOwnProperty(e)&&(this[e]=t)},this.ref=function(){return this},this.updateStyle=function(e){null!=b&&b.update({styleClass:e})},n.on("hidden.ace.submenu.sidebar_scroll shown.ace.submenu.sidebar_scroll",".submenu",function(e){e.stopPropagation(),f.get("minimized")||l._reset()}),P(!0)}}var i=ace.vars.safari&&navigator.userAgent.match(/version\/[1-5]/i),r="getComputedStyle"in window?function(e,t){return e.offsetHeight,window.getComputedStyle(e).position==t}:function(t,a){return t.offsetHeight,e(t).css("position")==a};e(document).on("settings.ace.sidebar_scroll",function(t,a,i){e(".sidebar[data-sidebar-scroll=true]").each(function(){var t=e(this),l=t.ace_sidebar_scroll("ref");if("sidebar_collapsed"==a)"true"==t.attr("data-sidebar-hover")&&t.ace_sidebar_hover("reset"),1==i?l.disable():l.reset();else if("sidebar_fixed"===a||"navbar_fixed"===a){var s=l.get("is_scrolling"),n=r(this,"fixed");l.set("sidebar_fixed",n),n&&!s?l.reset():!n&&l.get("only_if_fixed")&&l.disable()}})}),e(window).on("resize.ace.sidebar_scroll",function(){e(".sidebar[data-sidebar-scroll=true]").each(function(){var t=e(this).ace_sidebar_scroll("ref"),a=r(this,"fixed");t.set("sidebar_fixed",a),t.reset()})}),e.fn.ace_sidebar_scroll||(e.fn.ace_sidebar_scroll=function(i,r){var l,s=this.each(function(){var t=e(this),s=t.data("ace_sidebar_scroll"),n="object"==typeof i&&i;s||t.data("ace_sidebar_scroll",s=new a(this,n)),"string"==typeof i&&"function"==typeof s[i]&&(l=s[i](r))});return l===t?s:l},e.fn.ace_sidebar_scroll.defaults={scroll_to_active:!0,include_shortcuts:!0,include_toggle:!1,scroll_style:"",lock_anyway:!1,only_if_fixed:!0})}(window.jQuery),function(e,t){function a(t,a){var l=this,s=e(window),n=e(t),o=n.find(".nav-list"),d=n.find(".sidebar-toggle").eq(0),c=n.find(".sidebar-shortcuts").eq(0),m=o.get(0);if(m){var p=ace.helper.getAttrSettings(t,e.fn.ace_sidebar_scroll.defaults);this.settings=e.extend({},e.fn.ace_sidebar_scroll.defaults,a,p);var u=l.settings.scroll_to_active,f=n.ace_sidebar("ref");n.attr("data-sidebar-scroll","true");var v=null,g=null,h=null,b=null,w=null,C=null;this.is_scrolling=!1;var y=!1;this.sidebar_fixed=r(t,"fixed");var _,x,P=function(){var e=o.parent().offset();return l.sidebar_fixed&&(e.top-=ace.helper.scrollTop()),s.innerHeight()-e.top-(l.settings.include_toggle?0:d.outerHeight())},S=function(){return m.clientHeight},M=function(t){if(!y&&l.sidebar_fixed){o.wrap('<div class="nav-wrap-up pos-rel" />'),o.after("<div><div></div></div>"),o.wrap('<div class="nav-wrap" />'),l.settings.include_toggle||d.css({"z-index":1}),l.settings.include_shortcuts||c.css({"z-index":99}),v=o.parent().next().ace_scroll({size:P(),mouseWheelLock:!0,hoverReset:!1,dragEvent:!0,styleClass:l.settings.scroll_style,touchDrag:!1}).closest(".ace-scroll").addClass("nav-scroll"),C=v.data("ace_scroll"),g=v.find(".scroll-content").eq(0),h=g.find(" > div").eq(0),w=e(C.get_track()),b=w.find(".scroll-bar").eq(0),l.settings.include_shortcuts&&0!=c.length&&(o.parent().prepend(c).wrapInner("<div />"),o=o.parent()),l.settings.include_toggle&&0!=d.length&&(o.append(d),o.closest(".nav-wrap").addClass("nav-wrap-t")),o.css({position:"relative"}),1==l.settings.scroll_outside&&v.addClass("scrollout"),m=o.get(0),m.style.top=0,g.on("scroll.nav",function(){m.style.top=-1*this.scrollTop+"px"}),o.on(e.event.special.mousewheel?"mousewheel.ace_scroll":"mousewheel.ace_scroll DOMMouseScroll.ace_scroll",function(e){return l.is_scrolling&&C.is_active()?v.trigger(e):!l.settings.lock_anyway}),o.on("mouseenter.ace_scroll",function(){w.addClass("scroll-hover")}).on("mouseleave.ace_scroll",function(){w.removeClass("scroll-hover")});var a=g.get(0);if(o.on("ace_drag.nav",function(t){if(!l.is_scrolling||!C.is_active())return void(t.retval.cancel=!0);if(0!=e(t.target).closest(".can-scroll").length)return void(t.retval.cancel=!0);if("up"==t.direction||"down"==t.direction){C.move_bar(!0);var i=t.dy;i=parseInt(Math.min(_,i)),Math.abs(i)>2&&(i=2*i),0!=i&&(a.scrollTop=a.scrollTop+i,m.style.top=-1*a.scrollTop+"px")}}),l.settings.smooth_scroll&&o.on("touchstart.nav MSPointerDown.nav pointerdown.nav",function(){o.css("transition-property","none"),b.css("transition-property","none")}).on("touchend.nav touchcancel.nav MSPointerUp.nav MSPointerCancel.nav pointerup.nav pointercancel.nav",function(){o.css("transition-property","top"),b.css("transition-property","top")}),i&&!l.settings.include_toggle){var r=d.get(0);r&&g.on("scroll.safari",function(){ace.helper.redraw(r)})}if(y=!0,1==t&&(l.reset(),u&&l.scroll_to_active(),u=!1),"number"==typeof l.settings.smooth_scroll&&l.settings.smooth_scroll>0&&(o.css({"transition-property":"top","transition-duration":(l.settings.smooth_scroll/1e3).toFixed(2)+"s"}),b.css({"transition-property":"top","transition-duration":(l.settings.smooth_scroll/1500).toFixed(2)+"s"}),v.on("drag.start",function(e){e.stopPropagation(),o.css("transition-property","none")}).on("drag.end",function(e){e.stopPropagation(),o.css("transition-property","top")})),ace.vars.android){var s=ace.helper.scrollTop();2>s&&(window.scrollTo(s,0),setTimeout(function(){l.reset()},20));var n,p=ace.helper.winHeight();e(window).on("scroll.ace_scroll",function(){l.is_scrolling&&C.is_active()&&(n=ace.helper.winHeight(),n!=p&&(p=n,l.reset()))})}}};this.scroll_to_active=function(){if(C&&C.is_active())try{var e,t=f.vars(),a=n.find(".nav-list");t.minimized&&!t.collapsible?e=a.find("> .active"):(e=o.find("> .active.hover"),0==e.length&&(e=o.find(".active:not(.open)")));var i=e.outerHeight();a=a.get(0);for(var r=e.get(0);r!=a;)i+=r.offsetTop,r=r.parentNode;var l=i-v.height();l>0&&(m.style.top=-l+"px",g.scrollTop(l))}catch(s){}},this.reset=function(e){if(e===!0&&(this.sidebar_fixed=r(t,"fixed")),!this.sidebar_fixed)return void this.disable();y||M();var a=f.vars(),i=!a.collapsible&&!a.horizontal&&(_=P())<(x=m.clientHeight);this.is_scrolling=!0,i&&(h.css({height:x,width:8}),v.prev().css({"max-height":_}),C.update({size:_}),C.enable(),C.reset()),i&&C.is_active()?n.addClass("sidebar-scroll"):this.is_scrolling&&this.disable()},this.disable=function(){this.is_scrolling=!1,v&&(v.css({height:"","max-height":""}),h.css({height:"",width:""}),v.prev().css({"max-height":""}),C.disable()),parseInt(m.style.top)<0&&l.settings.smooth_scroll&&e.support.transition.end?o.one(e.support.transition.end,function(){n.removeClass("sidebar-scroll"),o.off(".trans")}):n.removeClass("sidebar-scroll"),m.style.top=0},this.prehide=function(e){if(this.is_scrolling&&!f.get("minimized"))if(S()+e<P())this.disable();else if(0>e){var t=g.scrollTop()+e;if(0>t)return;m.style.top=-1*t+"px"}},this._reset=function(e){e===!0&&(this.sidebar_fixed=r(t,"fixed")),ace.vars.webkit?setTimeout(function(){l.reset()},0):this.reset()},this.set_hover=function(){w&&w.addClass("scroll-hover")},this.get=function(e){return this.hasOwnProperty(e)?this[e]:void 0},this.set=function(e,t){this.hasOwnProperty(e)&&(this[e]=t)},this.ref=function(){return this},this.updateStyle=function(e){null!=C&&C.update({styleClass:e})},n.on("hidden.ace.submenu.sidebar_scroll shown.ace.submenu.sidebar_scroll",".submenu",function(e){e.stopPropagation(),f.get("minimized")||(l._reset(),"shown"==e.type&&l.set_hover())}),M(!0)}}var i=ace.vars.safari&&navigator.userAgent.match(/version\/[1-5]/i),r="getComputedStyle"in window?function(e,t){return e.offsetHeight,window.getComputedStyle(e).position==t}:function(t,a){return t.offsetHeight,e(t).css("position")==a};e(document).on("settings.ace.sidebar_scroll",function(t,a){e(".sidebar[data-sidebar-scroll=true]").each(function(){var t=e(this),i=t.ace_sidebar_scroll("ref");if("sidebar_collapsed"==a&&r(this,"fixed"))"true"==t.attr("data-sidebar-hover")&&t.ace_sidebar_hover("reset"),i._reset();else if("sidebar_fixed"===a||"navbar_fixed"===a){var l=i.get("is_scrolling"),s=r(this,"fixed");i.set("sidebar_fixed",s),s&&!l?i._reset():s||i.disable()}})}),e(window).on("resize.ace.sidebar_scroll",function(){e(".sidebar[data-sidebar-scroll=true]").each(function(){var t=e(this);"true"==t.attr("data-sidebar-hover")&&t.ace_sidebar_hover("reset");var a=e(this).ace_sidebar_scroll("ref"),i=r(this,"fixed");a.set("sidebar_fixed",i),a._reset()})}),e.fn.ace_sidebar_scroll||(e.fn.ace_sidebar_scroll=function(i,r){var l,s=this.each(function(){var t=e(this),s=t.data("ace_sidebar_scroll"),n="object"==typeof i&&i;s||t.data("ace_sidebar_scroll",s=new a(this,n)),"string"==typeof i&&"function"==typeof s[i]&&(l=s[i](r))});return l===t?s:l},e.fn.ace_sidebar_scroll.defaults={scroll_to_active:!0,include_shortcuts:!0,include_toggle:!1,smooth_scroll:150,scroll_outside:!1,scroll_style:"",lock_anyway:!1})}(window.jQuery),function(e){var t=e(".navbar").eq(0),a=e(".navbar-container").eq(0),i=e(".sidebar").eq(0),r=e(".main-container").get(0),l=e(".breadcrumbs").eq(0),s=e(".page-content").get(0),n=8;t.length>0&&(e(window).on("resize.auto_padding",function(){if("fixed"==t.css("position")){var e=ace.vars.nav_collapse?a.outerHeight():t.outerHeight();if(e=parseInt(e),r.style.paddingTop=e+"px",ace.vars.non_auto_fixed&&i.length>0&&(i.get(0).style.top="fixed"==i.css("position")?e+"px":""),l.length>0)if("fixed"==l.css("position")){var o=n+l.outerHeight()+parseInt(l.css("margin-top"));o=parseInt(o),s.style.paddingTop=o+"px",ace.vars.non_auto_fixed&&(l.get(0).style.top=e+"px")}else s.style.paddingTop="",ace.vars.non_auto_fixed&&(l.get(0).style.top="")}else r.style.paddingTop="",s.style.paddingTop="",ace.vars.non_auto_fixed&&(i.length>0&&(i.get(0).style.top=""),l.length>0&&(l.get(0).style.top=""))}).triggerHandler("resize.auto_padding"),e(document).on("settings.ace.auto_padding",function(a,i){("navbar_fixed"==i||"breadcrumbs_fixed"==i)&&(ace.vars.webkit&&(t.get(0).offsetHeight,l.length>0&&l.get(0).offsetHeight),e(window).triggerHandler("resize.auto_padding"))}))}(window.jQuery),angular.module("log",["toastr"]),angular.module("log").constant("WARNING_MESSAGES",{templateLoadFail:{title:"Loading templates failed",message:"could not load template. This is due to either internal or not template has been set.",remedy:"try again or add a new template, if this persist contact support"}}),angular.module("log").constant("SUCCESS_MESSAGES",{authSuccess:{title:"Authentication",message:"Login success"},userCreated:{title:"Users",message:"User created"},userUpdated:{title:"Users",message:"User updated"},userRemoved:{title:"Users",message:"User deleted"},logoutSuccess:{title:"Logout Success",message:"You've been logged out of the system successfully!"},recordRemovedSuccessfully:{title:"Record Removed",message:"Record Removed Successfully"}}),angular.module("log").constant("INFO_MESSAGES",{}),angular.module("log").constant("ERROR_MESSAGES",{stateChangeError:{title:"Application error",message:"Could not load page",remedy:"Please try that again"},unknownError:{title:"Error",message:"An error has occurred",remedy:"Please try again"},authInvalid:{title:"Authentication",message:"Invalid username or password",remedy:"Please try again"},networkError:{title:"Network",message:"Network error",remedy:"Please check your internet connection and try again"},userExists:{title:"Users",message:"A user with the specified email exists",remedy:"Please use another email address"},invalidUserId:{title:"Users",message:"Invalid user id",remedy:"Please select a valid user from the list"},unauthorizedAccess:{title:"Unauthorized access",message:"You are not allowed to access or perform this operation",remedy:"Please, re-login, try again if you have access and contact support if it persists"},updateConflict:{title:"Document update conflict",message:"The document you want to modified has been updated or created",remedy:"Please, refresh and try again"},serverNotAvailable:{title:"Server Offline",message:"Please, check your connection again, it looks like you are offline",remedy:"check if your internet connection or the api server is running"}}),angular.module("db").service("pouchUtil",["$q",function(e){function t(e,t){function a(e){return e[t]}return e.rows.map(a)}this.key=function(e){return{startkey:e,endkey:e+"￰"}},this.pluckIDs=function(e){return t(e,"id")},this.pluckValues=function(e){return t(e,"value")},this.pluckDocs=function(e){return t(e,"doc")},this.rejectIfEmpty=function(t){return 0===t.length?e.reject({code:404,msg:"No document found"}):t}}]),angular.module("db").service("dbService",["config","pouchDB","driverService","utility","$cookies",function(e,t,a,i,r){var l=this,s=a.get();l.get=function(e,t,a){return s.get(e,t,a)},l.all=function(e,t){return s.all(e,t)},l.save=function(e,t,a){return a=a||{},a.extra=a.hasOwnProperty("extra")?a.extra:!0,t.hasOwnProperty("_id")?a.extra&&(t.modified=(new Date).toJSON(),t.modified_by=l.currentUser()._id,t.created_by=t.created_by||l.currentUser()._id):(t._id=i.getUUID(),a.extra&&(t.created=(new Date).toJSON(),t.created_by=l.currentUser()._id)),s.put(e,t,a)},l.remove=function(e,t){return s.remove(e,t)},l.currentUser=function(){return r.getObject("vi-user")},l.db=s,l.tables={APPOINTMENT:"appointment",APPOINTMENT_LOGS:"appointment-logs",COMPANIES:"company",DEPARTMENT:"department",ENTRANCE:"entrance",MESSENGER:"messenger",RESTRICTED_ITEMS:"restricted-items",USER:"user",VEHICLES:"vehicle",VISITOR:"visitor",VISITORS_TYPES:"visitor-types"}}]),angular.module("navbar",["core","config"]),angular.module("navbar").service("navbarService",["$state",function(e){this.get=function(){function t(e){return!e.abstract&&e.data&&e.data.label}function a(e){var t=!1,a=e.name.split(".")[0];return r[a]||(r[a]=t=!0),t}function i(e){return{name:e.name,label:e.data.label}}var r={},l=e.get();return l.filter(t).filter(a).map(i)}}]),angular.module("navbar").controller("NavbarCtrl",["$state","config","navbarService",function(e,t,a){this.name=t.name,this.items=a.get()}]),angular.module("visitorsGroup").config(["$stateProvider",function(e){e.state("visitorsGroup",{url:"/visitors-group",parent:"index","abstract":!0,templateUrl:"app/visitors-group/visitors-group.html",data:{label:"Visitor Categories",menu:!0,icon:"fa fa-sitemap",link:"visitorsGroup.all",order:5}})}]),angular.module("visitorsGroup").service("visitorsGroupService",["dbService","validationService","authService",function(e,t){var a=e.tables.VISITORS_TYPES,i=this;i.model={name:t.BASIC({required:!0,unique:!0,fieldName:"name",serviceInstance:i,label:"Group",formType:"text"}),black_listed:t.BASIC({required:!1,fieldName:"black_listed",serviceInstance:i,label:"Black Listed ?",formType:"checkbox"})},i.get=function(t){return e.get(a,t)},i.all=function(t,i){return e.all(a,t,i)},i.remove=function(t,i){return e.remove(a,t,i)},i.save=function(t,i){return e.save(a,t,i)},i.validateField=function(e,a,r){return t.validateField(i.model[a],e,r)},i.choices=function(){return i.all().then(function(e){for(var t=[],a=e.count;a--;){var i=e.results[a];t.push({value:i._id,text:i.name})}return t})},i.validate=function(e){return t.validateFields(i.model,e,e._id).then(function(e){return t.eliminateEmpty(angular.merge({},e))})}}]),angular.module("visitors").config(["$stateProvider",function(e){e.state("visitors",{url:"/visitors",parent:"index","abstract":!0,templateUrl:"app/visitors/visitors.html",data:{label:"Visitors",menu:!0,icon:"fa fa-street-view",link:"visitors.all",order:4}})}]),angular.module("visitors").service("visitorService",["dbService","validationService","pouchdb",function(e,t,a){function i(e){var t={};for(var a in e)e.hasOwnProperty(a)&&e[a].length>0&&(t[a]=e[a]);return t}var r="visitor",l=[r,"_cache"].join(""),s=this;s.model={first_name:t.BASIC({required:!0,fieldName:"first_name",pattern:/^[a-zA-Z]/,label:"First Name",formType:"text"}),last_name:t.BASIC({required:!0,fieldName:"last_name",pattern:/^[a-zA-Z]/,label:"Last Name",formType:"text"}),phone:t.BASIC({required:!0,unique:!0,fieldName:"phone",serviceInstance:s,label:"Phone",formType:"text",custom:!0,template:"app/visitors/form/partials/phone.html"}),email:t.EMAIL({required:!1,unique:!0,fieldName:"email",serviceInstance:s,label:"Email",formType:"text"}),gender:t.BASIC({required:!1,label:"Gender",fieldName:"gender",formType:"select",choices:[{value:"Male",text:"Male"},{value:"Female",text:"Female"}]}),"company.name":t.BASIC({required:!1,label:"Company Name",fieldName:"company.address",formType:"typeahead",custom:!0,template:"app/visitors/form/partials/company.html"}),"company.address":t.BASIC({required:!1,label:"Company Address",formType:"textarea",fieldName:"company.address"}),occupation:t.BASIC({required:!1,label:"Occupation",formType:"text",fieldName:"occupation"}),type:t.BASIC({required:!1,label:"Visitor Type",formType:"select",fieldName:"type"}),black_listed:t.BASIC({required:!1,label:"Black Listed?",formType:"checkbox",fieldName:"group"}),"phone.prefix":t.BASIC({required:!0,pattern:/^[0-9]/,label:"Phone Prefix",formType:"text",fieldName:"phone.prefix",hidden:!0}),"phone.suffix":t.BASIC({required:!0,checkLength:!0,maxLength:7,minLength:7,pattern:/^[0-9]/,label:"Phone Suffix",formType:"text",fieldName:"phone.suffix",hidden:!0})},s.get=function(t,a){return e.get(r,t,a)},s.all=function(t){return e.all(r,t)},s.remove=function(t,a){return e.remove(r,t,a)},s.save=function(t,a){return e.save(r,t,a)},s.validateField=function(e,a,i){return t.validateField(e,a,i)},s.validate=function(e){return t.validateFields(s.model,e,e._id).then(function(e){return i(angular.merge({},e))})},s.getPassCode=function(){},s.updateForPhone=function(e){return(e.hasOwnProperty("phone.prefix")||e.hasOwnProperty("phone.suffix"))&&(e.phone=[]),e},s.updateForPrefix=function(e,t){return e.hasOwnProperty("phone.prefix")&&"Others"===t&&(e["phone.prefix"]=[]),e},s.getPhone=function(e,t){var a=[];return s.isEmpty(e)||s.isEmpty(t)||("Others"!==e&&a.push(e),a.push(t)),a.join("")},s.recoverPhone=function(e){var t={};return e.length>7?(t["phone.prefix"]=e.slice(0,4),t["phone.suffix"]=e.slice(4,e.length)):e.length<=7&&(t["phone.prefix"]="Others",t["phone.suffix"]=e),t},s.isEmpty=t.isEmpty,this.setState=function(e){return e._id=l,a.save(e)},this.getState=function(){return a.get(l)}}]).service("visitorGroupsService",["dbService",function(e){var t=this,a="visitor-group";t.get=function(t,i){return e.get(a,t,i)},t.all=function(t){return e.all(a,t)},t.remove=function(t,i){return e.remove(a,t,i)},t.save=function(t,i){return e.save(a,t,i)},this.setState=function(e){return e._id=CACHEDB,pouchdb.save(e)},this.getState=function(){return pouchdb.get(CACHEDB)}}]),angular.module("users").config(["$stateProvider",function(e){e.state("users",{url:"/users",parent:"index","abstract":!0,templateUrl:"app/users/users.html",data:{label:"Users",menu:!0,icon:"fa fa-users",link:"users.all",order:2}})}]),angular.module("users").service("userService",["dbService","validationService","authService","$q","cache","pouchdb",function(e,t,a,i,r,l){function s(t){var a=i.defer(),r=[e.all(e.tables.APPOINTMENT,{host:t})];return i.all(r).then(function(e){var t=[];e[0].count>0&&t.push("User has been tied to appointments before, kindly delete the appointment"),0===t.length?a.resolve([]):a.reject(t.join("\n"))}).catch(function(e){a.reject(e)}),a.promise}var n="user",o=[n,"_cache"].join(""),d=this;d.model={username:t.USERNAME({required:!0,unique:!0,fieldName:"username",serviceInstance:d,label:"Username",formType:"text"}),email:t.EMAIL({required:!0,unique:!0,fieldName:"email",serviceInstance:d,label:"Email",formType:"text"}),password:t.BASIC({required:!0,fieldName:"password",serviceInstance:d,label:"Password",formType:"password"}),password2:t.BASIC({required:!0,fieldName:"password2",serviceInstance:d,label:"Confirm Password",formType:"password"}),first_name:t.BASIC({required:!0,fieldName:"first_name",pattern:"/^[a-zA-Z]/",label:"First Name",formType:"text"}),last_name:t.BASIC({required:!0,fieldName:"last_name",pattern:"/^[a-zA-Z]/",label:"Last Name",formType:"text"}),phone:t.BASIC({required:!0,unique:!0,fieldName:"phone",serviceInstance:d,label:"Phone",formType:"text"}),work_phone:t.BASIC({required:!1,unique:!0,fieldName:"work_phone",serviceInstance:d,label:"Work Phone",formType:"text"}),home_phone:t.BASIC({required:!1,unique:!0,fieldName:"home_phone",serviceInstance:d,label:"Home Phone",formType:"text"}),gender:t.BASIC({required:!1,label:"Gender",fieldName:"gender",formType:"select",choices:[{value:"Male",text:"Male"},{value:"Female",text:"Female"}]}),department:t.BASIC({required:!1,label:"Department",fieldName:"department",formType:"select",choices:[]}),is_superuser:t.BASIC({required:!1,label:"Super User",formType:"checkbox",fieldName:"is_superuser"}),is_staff:t.BASIC({required:!1,label:"Admin Access",formType:"checkbox",fieldName:"is_staff"}),is_active:t.BASIC({required:!1,label:"User Active",formType:"checkbox",fieldName:"is_active"})},d.get=function(t,a){return e.get(n,t,a)
},d.all=function(t){return e.all(n,t)},d.remove=function(t,a){return s(t).then(function(){return e.remove(n,t,a)})},d.save=function(t,a){return e.save(n,t,a)},d.currentUser=function(){return a.currentUser()},d.updateCurrentUser=function(e){return a.updateCurrentUser(e)},d.validateField=function(e,a,i){return t.validateField(d.model[a],e,i)},d.validate=function(e){var a={};return e.hasOwnProperty("password")&&(""===e.password?a.password=["This field is required"]:e.password!==e.password2&&(a.password=["Passwords does not match"],a.password2=["Passwords does not match"])),t.validateFields(d.model,e,e._id).then(function(e){return t.eliminateEmpty(angular.merge({},e,a))})},d.validatePasswordMatch=function(e,a){var r=i.defer(),l={};return t.isEmpty(e)||t.isEmpty(a)||e===a||(l.password=["Passwords does not match"],l.password2=["Passwords does not match"]),r.resolve(l),r.promise},this.cache=function(){return r.VIEW_KEY=n,r},this.setState=function(e){return e._id=o,l.save(e)},this.getState=function(){return l.get(o)}}]),angular.module("settings",["core","db","utility","form"]),angular.module("settings").config(["$stateProvider",function(e){e.state("settings",{parent:"index",url:"/settings",templateUrl:"app/settings/settings.html",controller:"SettingsCtrl",controllerAs:"formCtrl",data:{label:"System Settings",menu:!0,link:"settings",icon:"fa fa-cogs",order:8}})}]),angular.module("settings").service("settingService",["validationService","dbService",function(e,t){var a=this,i="settings";a.ID=null,a.option={extra:!1},this.model={},a.get=function(e){return a.option=e||a.option,t.get(i,a.ID,a.option)},a.all=function(e){return a.option=e||a.option,t.all(i,a.option)},a.remove=function(){return t.remove(i,a.ID,a.option)},a.save=function(e,r){return e._id=a.ID,a.option=r||a.option,t.save(i,e,a.option)},a.validateField=function(t,i){return e.validateField(a.model[i],t)},a.validate=function(t){return e.validateFields(a.model,t,t._id).then(function(t){return e.eliminateEmpty(angular.merge({},t))})}}]).service("systemSettings",["validationService",function(e){var t=this;t.ID="system",t.COLUMN=1,t.model={dbSettingSource:e.BASIC({pattern:"/^[a-zA-Z]/",fieldName:"dbSource",serviceInstance:t,label:"Database Settings Source",formType:"select",choices:[{value:"environment",text:"Environment Variables"},{value:"system",text:"System Form"}]}),authSource:e.BASIC({pattern:"/^[a-zA-Z]/",fieldName:"authSource",serviceInstance:t,label:"Where to Authenticate Users",formType:"select",choices:[{value:"api",text:"System Database"},{value:"ldap",text:"LDAP Database"},{value:"any",text:"Any Available Source"}]}),refreshRate:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Page Refresh Rate",fieldName:"refreshRate",formType:"number",placeholder:"enter number in seconds"})},t.templateName="system.html",t.formHeader="System Settings"}]).service("emailSettings",["validationService",function(e){var t=this;t.ID="email",t.model={host:e.BASIC({pattern:"/^[a-zA-Z]/",fieldName:"host",serviceInstance:t,label:"Host",formType:"text"}),port:e.INT({fieldName:"port",serviceInstance:t,label:"Port",formType:"number"}),user:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Username",fieldName:"user",formType:"text"}),password:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Password",fieldName:"password",formType:"password"}),fromName:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Email From Name",fieldName:"fromName",formType:"text"}),replyTo:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Reply To Email",fieldName:"replyTo",formType:"text"}),use_tls:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Use TLS to send email",fieldName:"use_tls",formType:"checkbox","default":!0})},t.templateName="email.html",t.formHeader="Email Settings"}]).service("databaseSettings",["validationService",function(e){var t=this;t.ID="database",t.model={host:e.BASIC({pattern:"/^[a-zA-Z]/",fieldName:"host",serviceInstance:t,label:"Host",formType:"text"}),user:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Username",fieldName:"user",formType:"text"}),password:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Password",fieldName:"password",formType:"password"}),port:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Port",fieldName:"port",formType:"text"}),type:e.BASIC({pattern:"/^[a-zA-Z]/",label:"DB Server Type",fieldName:"type",formType:"select",choices:[{value:"mssql",text:"SQL Server"},{value:"postgres",text:"PostgresSQL"},{value:"sqlite",text:"Sqlite"},{value:"mysql",text:"MySQL"}]})},t.templateName="database.html",t.formHeader="Database Settings"}]).service("smsSettings",["validationService",function(e){var t=this;t.ID="sms",t.model={host:e.BASIC({pattern:"/^[a-zA-Z]/",fieldName:"host",serviceInstance:t,label:"Host",formType:"text"}),user:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Username",fieldName:"user",formType:"text"}),password:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Password",fieldName:"password",formType:"password"}),smsAPIURL:e.BASIC({pattern:"/^[a-zA-Z]/",label:"SMS API URL",fieldName:"smsAPIURL",formType:"text"})},t.templateName="sms.html",t.formHeader="SMS Settings"}]).service("ldapSettings",["validationService",function(e){var t=this;t.ID="ldap",t.model={host:e.BASIC({pattern:"/^[a-zA-Z]/",fieldName:"host",serviceInstance:t,label:"Host",formType:"text",placeholder:"IP or domain without ldap://"}),user:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Username",fieldName:"user",formType:"text"}),password:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Password",fieldName:"password",formType:"password"}),port:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Port",fieldName:"port",formType:"text",placeholder:"389"}),baseDN:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Base Domain Name",fieldName:"baseDN",formType:"text",placeholder:"example.com"})},t.templateName="ldap.html",t.formHeader="LDAP Settings"}]),angular.module("settings").controller("SettingsCtrl",["settingService","formService","emailSettings","databaseSettings","ldapSettings","smsSettings","systemSettings",function(e,t,a,i,r,l,s){function n(){var a=c[o.active],i=a.COLUMN||d;o.templateName=a.templateName||"system.html",o.template=["app/settings/partials",o.templateName].join("/"),o.formHeader=a.formHeader,e.ID=a.ID,e.model=a.model,o.errorMsg={},o.viewModel={},o.column=12/i,o.model=a.model,o.form=t.modelToForm(o.model,d),e.get().then(function(e){o.viewModel=e}).catch(function(){})}var o=this,d=2,c={email:a,database:i,sms:l,ldap:r,system:s};o.placeholder=t.placeholder,o.open=function(e){o.active=e||"system",n()},o.open(),e.all().then(function(){}).catch(function(){}),o.save=function(){e.save(o.viewModel).then(function(e){console.log(e)}).catch(function(e){console.log(e)})}}]),angular.module("login",["core","config"]),angular.module("login").config(["$stateProvider",function(e){e.state("login",{url:"/login",views:{login:{templateUrl:"app/login/login.html",controller:"LoginCtrl",controllerAs:"loginCtrl"}}}).state("logout",{url:"logout",parent:"index",controller:["authService","log","$window",function(e,t,a){e.logout(),a.location.href="#/login",t.success("logoutSuccess")}]})}]),angular.module("login").service("loginService",["authService",function(e){var t=this;t.login=function(t,a){return e.login(t,a)}}]),angular.module("login").controller("LoginCtrl",["$state","config","loginService","$rootScope","log","$scope",function(e,t,a,i,r,l){function s(){i.loginMode=!1,e.go("home"),r.success("authSuccess")}var n=this;l.data=void 0,i.loginMode=!0,n.credentials={},n.login=function(){angular.isUndefined(n.credentials.username)&&angular.isUndefined(n.credentials.password)?r.error("authInvalid"):a.login(n.credentials.username,n.credentials.password).then(function(e){l.$on("serverResponse",function(e,t){l.data=t}),l.data&&401!==l.data.status?s():e&&e.detail?r.error(e.detail):e&&e.token?s():r.error("authInvalid")}).catch(function(e){i.loginMode=!0,e&&e.detail?r.error(e.detail):e&&r.error("authInvalid")})}}]),angular.module("home",["core"]),angular.module("home").config(["$stateProvider",function(e){e.state("home",{parent:"index",url:"/",controller:"HomeCtrl",controllerAs:"homeCtrl",templateUrl:"app/home/home.html",data:{label:"Dashboard",menu:!0,icon:"fa fa-home",order:1}})}]),angular.module("home").service("homeService",["userService","appointmentService","visitorService",function(){}]),angular.module("viLogged",["ngSanitize","ngCookies","core","breadcrumbs","sidebar","navbar","footer","home","log","auth","login","users","changes","validation","departments","visitors","appointments","company","vi.camera","visitorsGroup","dialog","db","utility","ui.calendar","settings","cache","ngVPrint","ngCsv"]).run(["$rootScope","$state","log","authService","$window","$interval",function(e,t,a,i,r,l){a.persist.load(),e.$on("$stateChangeStart",function(){e.resetTimer&&l.cancel(e.resetTimer),i.loggedIn()?e.currentUser=i.currentUser():r.location.href="#/login"})}]).config(["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|chrome-extension):/)}]).config(["$httpProvider",function(e){e.interceptors.push(["$rootScope","$q",function(e,t){return{response:function(t){return e.$broadcast("serverResponse",t),t},responseError:function(a){return e.$broadcast("serverResponse",a),t.reject(a)}}}])}]),angular.module("viLogged").controller("HomeCtrl",["$window","log","utility","dialog","appointmentService",function(e,t,a,i,r){var l=this;l.eventSources=[],l.uiConfig={calendar:{height:390,editable:!0,header:{left:"month",center:"title",right:"today prev,next"},dayClick:function(){},eventDrop:function(){},eventResize:function(){}}},l.getInProgress=function(){r.inProgress().then(function(e){l.inProgress=e.results})},l.getUpcoming=function(){r.upcoming().then(function(e){l.upcoming=e.results})},l.getAwaitingApproval=function(){r.awaitingApproval().then(function(e){l.awaitingApproval=e.results})},l.getInProgress(),l.getUpcoming(),l.getAwaitingApproval()}]),angular.module("departments").config(["$stateProvider",function(e){e.state("departments",{url:"/departments",parent:"index","abstract":!0,templateUrl:"app/departments/departments.html",data:{label:"Departments",menu:!0,icon:"fa fa-bank",link:"departments.all",order:6}})}]),angular.module("departments").service("departmentService",["dbService","validationService","$q",function(e,t,a){function i(t){var i=a.defer();return e.all(e.tables.USER,{department:t}).then(function(e){e.count>0?i.reject(["Department is still tied to some users","Kindly reassign Users to another department"].join("\n")):i.resolve("")}).catch(function(e){i.reject(e)}),i.promise}var r="department",l=this;l.model={name:t.BASIC({pattern:"/^[a-zA-Z]/",required:!0,unique:!0,fieldName:"name",serviceInstance:l,label:"Department"}),floor:t.BASIC({required:!1,label:"Floor"})},l.choices=function(){return l.all().then(function(e){for(var t=[],a=e.count;a--;){var i=e.results[a];t.push({value:i._id,text:i.name})}return t})},l.get=function(t,a){return e.get(r,t,a)},l.all=function(t,a){return e.all(r,t,a)},l.remove=function(t,a){return i(t).then(function(){return e.remove(r,t,a)})},l.save=function(t,a){return e.save(r,t,a)},l.validateField=function(e,a){return t.validateField(l.model[a],e)},l.validate=function(e){return t.validateFields(l.model,e,e._id).then(function(e){return t.eliminateEmpty(angular.merge({},e))})}}]),angular.module("company").config(["$stateProvider",function(e){e.state("company",{url:"/company","abstract":!0,parent:"index",templateUrl:"app/company/company.html",data:{label:"Companies",menu:!0,order:7,link:"company.all",icon:"fa fa-building"}})}]),angular.module("company").service("companyService",["$q","dbService","validationService",function(e,t,a){var i="company",r=this;r.model={name:a.BASIC({pattern:"/^[a-zA-Z]/",required:!0,unique:!0,fieldName:"name",serviceInstance:r,label:"Company Name",formType:"text"}),address:a.BASIC({pattern:"/^[a-zA-Z]/",label:"Address",fieldName:"address",formType:"text"})},r.choices=function(){return r.all().then(function(e){for(var t=[],a=e.count;a--;){var i=e.results[a];t.push({value:i._id,text:i.name})}return t})},r.get=function(e,a){return t.get(i,e,a)},r.all=function(e){return t.all(i,e)},r.remove=function(e,a){return t.remove(i,e,a)},r.save=function(e,a){return t.save(i,e,a)},r.validateField=function(e,t){return a.validateField(r.model[t],e)},r.validate=function(e){return a.validateFields(r.model,e,e._id).then(function(e){return a.eliminateEmpty(angular.merge({},e))})}}]),angular.module("appointments").config(["$stateProvider",function(e){e.state("appointments",{url:"/appointments",parent:"index","abstract":!0,templateUrl:"app/appointments/appointments.html",data:{label:"Appointments",menu:!0,icon:"fa fa-newspaper-o",link:"appointments.all",order:3}})}]),angular.module("appointments").service("appointmentService",["dbService","validationService","cache","pouchdb","$filter","utility","messenger",function(e,t,a,i,r,l,s){function n(){return"BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//vilogged.com v1.0//EN\nBEGIN:VEVENT\nDTSTAMP:&&startDate&&\nORGANIZER;CN=&&visitorsName&&:MAILTO:&&visitorsMail&&\nSTATUS:CONFIRMED\nDTSTART:&&startDate&&\nDTEND:&&endDate&&\nSUMMARY:&&appointSummary&&\nDESCRIPTION:&&appointmentDesc&&\nX-ALT-DESC;FMTTYPE=text/html:&&appointmentDesc&&\nLOCATION:&&location&&\nEND:VEVENT\nEND:VCALENDAR"}var o=e.tables.APPOINTMENT,d=[o,"_cache"].join(""),c=this;c.model={visitor:t.BASIC({required:!0,fieldName:"visitor",label:"Visitor",formType:"typeahead-remote"}),host:t.BASIC({required:!0,fieldName:"host",label:"Host",formType:"typeahead-remote"}),start_date:t.BASIC({required:!0,fieldName:"start_date",pattern:"/^[a-zA-Z]/",label:"Appointment Start Date",formType:"date"}),end_date:t.BASIC({required:!0,fieldName:"end_date",pattern:"/^[a-zA-Z]/",label:"Appointment End Date",formType:"date"}),start_time:t.BASIC({required:!0,fieldName:"start_time",label:"Appointment Start time",formType:"time"}),end_time:t.BASIC({required:!0,fieldName:"end_time",serviceInstance:c,label:"Appointment End Time",formType:"time"}),representing:t.BASIC({required:!1,fieldName:"representing",serviceInstance:c,label:"You are Representing who?",formType:"text"}),purpose:t.BASIC({required:!1,label:"Purpose of Appointment",fieldName:"purpose",formType:"select",choices:[{value:"personal",text:"Personal"},{value:"official",text:"Official"},{value:"others",text:"Others"}]}),is_approved:t.BASIC({required:!1,label:"Approved",formType:"checkbox",fieldName:"is_approved",hidden:!0}),is_expired:t.BASIC({required:!1,label:"Expired",formType:"checkbox",fieldName:"is_expired",hidden:!0}),entrance:t.BASIC({required:!1,label:"Entrance",formType:"select",fieldName:"entrance"}),escort_required:t.BASIC({required:!1,label:"Escort Required ?",fieldName:"escort_required",formType:"checkbox"})},c.get=function(t,a){return e.get(o,t,a)},c.all=function(t){return e.all(o,t)},c.remove=function(t,a){return e.remove(o,t,a)},c.save=function(t,a){return e.save(o,t,a)},c.getLog=function(t,a){return e.get(e.tables.APPOINTMENT_LOGS,t,a)},c.allLogs=function(t){return e.all(e.tables.APPOINTMENT_LOGS,t)},c.saveLog=function(t,a){return e.save(e.tables.APPOINTMENT_LOGS,t,a)},c.validateField=function(e,a,i){return t.validateField(c.model[a],e,i)},c.validate=function(e){return t.validateFields(c.model,e,e._id).then(function(a){var i=c.dateTimeValidation(e.start_time,e.end_time,"time",e),r=c.dateTimeValidation(e.start_date,e.end_date,"date",e);return t.eliminateEmpty(angular.merge({},a,r,i))})},c.dateTimeValidation=function(e,a,i,l){var s={},n=[];if(t.isEmpty(e)||t.isEmpty(a)||(e=new Date(e),a=new Date(a),e.getTime()>a.getTime()?n.push("start "+i+" can't be greater than end time"):e.getTime()===a.getTime(),s["start_"+i]=n.length?n:[]),"personal"===l.purpose){var o=moment(new Date).weekday(),d=moment.weekdaysShort(o),c=r("date")(l.start_time,"HH:mm:ss").substr(0,2),m=r("date")(l.end_time,"HH:mm:ss").substr(0,2);"Tue"!==d&&"Thu"!==d?n.push("Personal visitors are only allowed on Tuesday and Thursday between 1pm and 3pm"):(13>c||c>15||m>15)&&n.push("Personal visits are only allowed between the hours of 1pm and 3pm on Tuesday and Thursday"),s.purpose=n.length?n:[]}return s},c.inProgress=function(e){e=e||{};var t=angular.merge({},{load:"in-progress"},e);return c.all(t)},c.upcoming=function(e){e=e||{};var t=angular.merge({},{load:"upcoming"},e);return c.all(t)},c.awaitingApproval=function(e){e=e||{};var t=angular.merge({},{load:"pending"},e);return c.all(t)},c.rejected=function(e){e=e||{};var t=angular.merge({},{load:"rejected"},e);return c.all(t)},c.status={REJECTED:0,UPCOMING:1,PENDING:2,EXPIRED:3,IN_PROGRESS:4},c.getStatus=function(e){if(e.hasOwnProperty("status")&&c.status.hasOwnProperty(e.status))return c.status[e.status];if(e.hasOwnProperty("status")&&null===e.status){var t=(new Date(e.start_date).getTime(),(new Date).getTime());new Date(e.end_date).getTime()>t}},this.cache=function(){return a.VIEW_KEY=o,a},this.setState=function(e){return e._id=d,i.save(e)},this.getState=function(){return i.get(d)},c.getOutlookCalender=function(e,t){var a=(e.start_date+" "+r("date")(e.start_time,"HH:mm:ss")).split(/[\s|:|-]/),i=(e.start_date+" "+r("date")(e.end_time,"HH:mm:ss")).split(/[\s|:|-]/),s=new Date(a[0],a[1]-1,a[2],a[3],a[4],a[5]).toJSON().replace(/[-|:]/g,"").split(".")[0]+"Z",o=new Date(i[0],i[1]-1,i[2],i[3],i[4],i[5]).toJSON().replace(/[-|:]/g,"").split(".")[0]+"Z",d={startDate:s,endDate:o,visitorsName:e.visitor.first_name,visitorsMail:e.visitor.email,appointSummary:"",appointmentDesc:"",location:t||""};return l.compileTemplate(d,n())},c.msgFields=function(e,t){var a={approval:{last_name:t.visitor.last_name,first_name:t.visitor.first_name,host_last_name:t.host.last_name,host_first_name:t.host.first_name,date:r("date")(t.start_date,"mediumDate"),start_time:r("date")(t.start_time,"HH:mm")},created:{last_name:t.host.last_name,first_name:t.host.first_name}};return a[e]},this.sms=function(e,t){var a,i,r=c.msgFields(t,e);return"approval"===t?(a=l.compileTemplate(r,s.messageTemplates.appointments.APPROVAL_SMS),i=e.visitor.phone):"created"===t&&(i=e.host.phone,a=l.compileTemplate(r,s.messageTemplates.appointments.CREATED_SMS)),s.send.sms({to:i,subject:"Appointment Created.",message:a})},this.email=function(e,t){var a,i,r=c.msgFields(t,e);return"approval"===t?(a=l.compileTemplate(r,s.messageTemplates.appointments.APPROVAL_EMAIL),i=e.visitor.email):"created"===t&&(i=e.host.email,a=l.compileTemplate(r,s.messageTemplates.appointments.CREATED_EMAIL)),s.send.sms({to:i,subject:"Appointment Created.",message:a})}}]),angular.module("validation",["core"]),angular.module("validation").service("validationService",["$q",function(e){var t=this,a=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i,i=/^[A-Za-z0-9_]{3,20}$/;t.BASIC=function(e){e=e||{};var t={required:!0,pattern:"",checkLength:!1,minLength:0,maxLength:0,unique:!1,dbName:"",type:"basic"};for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t},t.INT=function(e){var t={required:!1,pattern:"/^[0-9]/",checkLength:!1,minLength:0,maxLength:0,unique:!1,dbName:"",type:"int"};for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t},t.EMAIL=function(e){var t={required:!1,pattern:a,checkLength:!1,unique:!1,dbName:"",fieldName:"",dataList:[],type:"email"};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},t.USERNAME=function(e){var t={required:!1,pattern:i,checkLength:!0,minLength:3,maxLength:20,unique:!0,type:"username"};for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t},t.validateRequired=function(e,a){var i=a||t.BASIC();return""!==e&&void 0!==e||!i.required?[]:["This field is required"]},t.validateStringLength=function(e,a){var i=a||t.BASIC(),r=[];return i.checkLength&&i.minLength>e.length&&r.push("character length is less than "+i.minLength),i.checkLength&&0!==i.maxLength&&e.length>i.maxLength&&r.push("you have exceeded the maximum characters allowed ("+i.maxLength+")"),r},t.validateInt=function(e,a){var i=a||t.BASIC(),r=[];return""!==i.pattern&&i.pattern.test(e)&&r.push("Only integers are allowed."),r},t.validateEmail=function(e,a){var i=a||t.EMAIL(),r=[];return t.isEmpty(e)||i.pattern.test(e)||r.push("invalid email provided"),r},t.validateUnique=function(a,i,r){var l=e.defer();if(i=i||{},i.unique&&i.hasOwnProperty("serviceInstance")&&!t.isEmpty(a)){var s={};return s[i.fieldName]=a,t.isEmpty(r)||(s["_id-ne"]=r),i.serviceInstance.all(s).then(function(e){return e.count>0?[[i.fieldName,"already exists, kindly provide another"].join(" ")]:[]})}return l.resolve([]),l.promise},t.validateFields=function(a,i,r){var l={};return angular.isObject(a)&&Object.keys(a).length>0&&Object.keys(a).forEach(function(e){l[e]=t.validateField(a[e],i[e],r)}),e.all(l)},t.validateField=function(e,a,i){var r=[],l=t.validateRequired(a,e),s=angular.isDefined(a)?t.validateStringLength(a,e):[],n="email"===e.type&&angular.isDefined(a)?t.validateEmail(a,e):[],o="int"===e.type&&angular.isDefined(a)?t.validateInt(a,e):[],d=r.concat(l,s,n,o);return t.validateUnique(a,e,i).then(function(e){return d.concat(e)})},t.isEmpty=function(e){return void 0===e||""===e||null===e},t.eliminateEmpty=function(e){var t={};for(var a in e)e.hasOwnProperty(a)&&e[a].length>0&&(t[a]=e[a]);return t},t.mergeErrorMsg=function(e,t){for(var a in t)t.hasOwnProperty(a)&&e.hasOwnProperty(a)?e[a]=e[a].concat(t[a]):t.hasOwnProperty(a)&&(e[a]=t[a]);return e}}]),angular.module("utility",[]),angular.module("utility").service("utility",["$filter","config",function(e,t){this.formatDate=function(a,i){var r=i||t.dateFormat;return e("date")(new Date(a),r)},this.takeFirst=function(e){return e[0]},this.extractDate=function(e){return new Date(this.formatDate(e))},this.isValidDate=function(e){return e&&null!==e&&"Invalid Date"!==new Date(e).toString()},this.isEmptyObject=function(e){return"[object Object]"===toString.call(e)&&0===Object.keys(e).length},this.contains=function(e,t){return-1!==e.indexOf(t)},this.capitalize=function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},this.hashBy=function(e,t){var a={};return e.forEach(function(e){var i=e[t];a[i]=e}),a},this.getUUID=function(){var e=Date.now();return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?a:7&a|8).toString(16)})},this.chunk=function(e,t){t=t||1;for(var a=[];e.length>0;)a.push(e.splice(0,t));return a},this.timeSince=function(e){if(!e||null===e||"Invalid Date"===new Date(e).toString())return"Never";"object"!=typeof e&&(e=new Date(e));var t,a=Math.floor((new Date-e)/1e3),i=Math.floor(a/31536e3);return i>=1?t="year":(i=Math.floor(a/2592e3),i>=1?t="month":(i=Math.floor(a/86400),i>=1?t="day":(i=Math.floor(a/3600),i>=1?t="hour":(i=Math.floor(a/60),i>=1?t="minute":(i=a,t="second"))))),(i>1||0===i)&&(t+="s"),i+" "+t},this.compileTemplate=function(e,t,a){function i(e){return(e+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")}var r="[object Object]"===Object.prototype.toString.call(e),l=r?e:{},s=void 0===a?"&&":a;return Object.keys(l).forEach(function(e){var a=i(s+e+s);t=t.replace(new RegExp(a,"g"),l[e])}),t},this.getFileName=function(t,a){t=(t||"").toLowerCase().replace(/ /g,"-"),a=a||".csv";var i=e("date")(new Date,"yyyy-MM-dd-HH-mm-ss");return t+"-"+i+a}}]),angular.module("utility").service("messenger",["dbService",function(e){var t=this,a="messenger";t.sendMessage=function(t){return e.db.post(a,t)},t.send={sms:function(e){return e.type="sms",e},email:function(e){e.type="email",sendMessage(e)}};var i="Hello &&first_name&& &&last_name&&,\n\nYour appointment with &&host_first_name&& &&host_last_name&& has been approved.\n\nYour appointment is scheduled for\n\nDate:&&date&& \nExpected Check in Time: &&start_time&&\n\n&&organization&&",r="Hello &&first_name&& &&last_name&&, your appointment with &&host_first_name&& &&host_last_name&& has been approved. Your appointment is scheduled for Date:&&date&& Expected Check in Time: &&start_time&&",l="Hello &&first_name&& &&last_name&&,\n\nYou have an appointment awaiting your approval\n\n&&organization&&",s="Hello &&first_name&& &&last_name&&, you have an appointment awaiting your approval";t.messageTemplates={appointments:{APPROVAL_EMAIL:i,APPROVAL_SMS:r,CREATED_EMAIL:l,CREATED_SMS:s}}}]),angular.module("viLoggedTable",[]),angular.module("viLoggedTable").service("table",function(){var e=this;e.users=[{filter:!0,field:"first_name",label:"First Name"},{filter:!0,field:"last_name",label:"Last Name"},{filter:!0,field:"username",label:"Username"},{filter:!0,field:"email",label:"Email"},{filter:!0,field:"department.name",label:"Department"},{filter:!1,field:"date_joined",label:"Date Created",type:"date"}],e.appointments=[{filter:!0,field:"host",label:"Host"},{filter:!0,field:"visitor",label:"Guest"},{filter:!0,field:"start_date",label:"Start Date",type:"date"},{filter:!0,field:"end_date",label:"End Date",type:"date"},{filter:!1,field:"start_time",label:"Start Time",type:"date"},{filter:!1,field:"end_time",label:"End Time",type:"date"},{filter:!1,field:"status",label:"Status"}],e.visitors=[{filter:!0,field:"first_name",label:"First Name"},{filter:!0,field:"last_name",label:"Last Name"},{filter:!0,field:"email",label:"Email"},{filter:!0,field:"phone",label:"Phone"},{filter:!0,field:"type.name",label:"Category"},{filter:!0,field:"company.name",label:"Company"},{filter:!1,field:"created",label:"Created Date"}]}),angular.module("sidebar",["core","config"]),angular.module("sidebar").service("sidebarService",["$state",function(e){this.get=function(){for(var t=[],a={},i=e.get(),r=i.length;r--;){var l=i[r];if(l.hasOwnProperty("data")&&l.data.hasOwnProperty("label")&&l.data.hasOwnProperty("menu")&&!a.hasOwnProperty(l.data.label)&&l.data.menu){a[l.data.label]=!0;var s=l.data;s.link=l.data.link||l.name,t.push(l.data)}}return t.sort(function(e,t){return e.order-t.order}),t}}]),angular.module("sidebar").controller("SidebarCtrl",["$state","config","sidebarService",function(e,t,a){this.name=t.name,this.items=a.get()}]),angular.module("ngVPrint",[]),angular.module("ngVPrint").directive("ngPrint",function(){function e(e,i,r){i.on("click",function(){var e=document.getElementById(r.printElementId);e&&t(e)}),window.onafterprint=function(){a.innerHTML=""}}function t(e){var t=e.cloneNode(!0);a.appendChild(t),window.print()}var a=document.getElementById("printSection");return a||(a=document.createElement("div"),a.id="printSection",document.body.appendChild(a)),{restrict:"A",link:e}}),angular.module("mailer",[]),angular.module("mailer").service("mandrillService",["$http",function(e){function t(){var e=this;e.to=[],this.setHTML=function(t){e.html=t},this.setText=function(t){e.text=t},this.setSubject=function(t){e.subject=t},this.setSender=function(t,a){e.from_email=t,e.from_name=a},this.addRecipients=function(t){e.to=e.to.concat(t)},this.addRecipient=function(t){e.to.push(t)}}var a={};this.setConfig=function(e){a=e},this.getConfig=function(){return a},this.Email=function(){return new t},this.send=function(t){var i={key:a.apiKey,message:t},r={method:"POST",url:a.apiUrl,data:i};return e(r)}}]),angular.module("mailer").service("mailerService",["mandrillService",function(e){var t={};this.setConfig=function(a){t=a,e.setConfig(t)},this.getConfig=function(){return t},this.Email=function(){return e.Email()},this.send=function(t){return e.send(t)}}]),angular.module("log").service("log",["$log","toastr","ERROR_MESSAGES","WARNING_MESSAGES","INFO_MESSAGES","SUCCESS_MESSAGES","$cookies",function(e,t,a,i,r,l,s){function n(e,a,i,r){angular.isObject(a)||(a={log:a,toastr:a});var l=i[e]||{message:""},s=[l.message];return r&&s.push(r),("error"===a.log||"warn"===a.log)&&s.push(l.remedy),s=s.join(". ")+".",t[a.toastr](s,l.title)}function o(e,t,a){var i=s.getObject("vi-persistent")||[];i.push({key:e,message:t,type:a}),s.putObject("vi-persistent",i)}function d(){for(var e=s.getObject("vi-persistent")||[],t=e.length;t--;){var a=e[t];c.hasOwnProperty(a.type)&&c[a.type](a.key,a.type,a.message)}s.remove("vi-persistent")}var c=this;c.error=function(e,i){return 1===arguments.length&&angular.isDefined(arguments[0])&&!a.hasOwnProperty(e)?t.error(arguments[0],"Error"):n(e,"error",a,i)},c.warning=function(e,t){var a={log:"warn",toastr:"warning"};return n(e,a,i,t)},c.info=function(e,t){return n(e,"info",r,t)},c.success=function(e,t){var a={log:"log",toastr:"success"};return n(e,a,l,t)},c.persist={error:function(e,t){return o(e,t,"error")},warn:function(e,t){return o(e,t,"warn")},success:function(e,t){return o(e,t,"success")},info:function(e,t){return o(e,t,"info")},load:d}}]),angular.module("form",["utility"]),angular.module("form").service("formService",["utility",function(e){var t=this;t.chunk=function(t,a){return a=a||2,e.chunk(t,a)},t.modelToForm=function(e,a,i){i=i||{};var r=[];for(var l in e)if(e.hasOwnProperty(l)&&!e[l].hasOwnProperty("hidden")){var s=i[l]||{};e[l].fieldName=e[l].fieldName||l,e[l].options=e[l].options||{},e[l].options=angular.merge({},e[l].options,s),r.push(e[l])}return t.chunk(r,a)},t.placeholder=function(e,t){var a=["Enter",e,"Here"].join(" ");return t||a},t.isEmpty=function(e){return void 0===e||""===e||null===e},t.phonePrefixes=function(){return["0701","0703","0705","0706","0708","0802","0803","0804","0805","0806","0807","0808","0809","0810","0811","0812","0813","0814","0815","0816","0817","0818","0819","0909","0902","0903","0905","Others"]},t.eliminateEmpty=function(e){var t={};for(var a in e)e.hasOwnProperty(a)&&e[a].length>0&&(t[a]=e[a]);return t},t.mergeErrorMsg=function(e,t){for(var a in t)t.hasOwnProperty(a)&&e.hasOwnProperty(a)?e[a]=e[a].concat(t[a]):t.hasOwnProperty(a)&&(e[a]=t[a]);return e}}]),angular.module("footer",["core","config"]),angular.module("footer").controller("FooterCtrl",["config",function(e){this.year=(new Date).getFullYear(),this.author=e.author,this.version=e.version}]),angular.module("eha-drag-n-drop",[]).directive("ehaDraggable",function(){return{scope:{dragStartHandler:"=dragStart"},link:function(e,t){console.log(e),t[0].addEventListener("dragstart",e.dragStartHandler,!1)}}}),angular.module("dialog",["dialogs.main"]).config(["$translateProvider",function(e){e.translations("en",{DIALOGS_YES:"Yes",DIALOGS_NO:"No"}),e.preferredLanguage("en"),e.useSanitizeValueStrategy("sanitize")}]),angular.module("dialog").service("dialog",["dialogs","$q",function(e,t){var a=this;a.confirm=function(a,i,r){var l=t.defer();i=i||"Confirmation Dialog",a=a||"",r=r||{};var s={size:"sm",animation:!0};return e.confirm(i,a,angular.merge({},r,s)).result.then(function(e){l.resolve(e)},function(e){l.reject(e)}),l.promise}}]),angular.module("m.config",["config"]),angular.module("m.config").service("configService",["config","$window",function(e,t){function a(e){return void 0===e||""===e||null===e}var i=this;i.apiUrl=function(){var i=e.api.protocol||t.location.protocol;return a(e.api.url)?[i,"//",t.location.hostname,":",e.api.port,e.api.path].join(""):e.api.url},this.api={url:i.apiUrl()}}]),angular.module("core",["ui.router","ui.bootstrap"]),angular.module("vi.camera",["core"]),angular.module("vi.camera").service("cameraService",["$window",function(e){var t={},a=function(){return!!i()},i=function(){return navigator.getUserMedia=e.navigator.getUserMedia||e.navigator.webkitGetUserMedia||e.navigator.mozGetUserMedia||e.navigator.msGetUserMedia,navigator.getUserMedia};return{hasUserMedia:a(),getUserMedia:i,instance:t}}]),angular.module("vi.camera").directive("viCamera",["cameraService","$rootScope",function(e,t){return{restrict:"EA",replace:!0,transclude:!0,scope:{},controller:["$state","$scope","$timeout","$q",function(e,t,a,i){this.takeSnapshot=function(){var e=document.querySelector("canvas"),r=e.getContext("2d"),l=document.querySelector("video"),s=i.defer();return e.width=t.w,e.height=t.h,a(function(){r.fillRect(0,0,t.w,t.h),r.drawImage(l,0,0,t.w,t.h),s.resolve(e.toDataURL())},0),s.promise}}],template:'<div class="camera"><video class="camera" autoplay="" width="300px" /><div ng-transclude></div></div>',link:function(a,i,r){var l=r.width||280,s=r.height||300;if(e.hasUserMedia){var n=(e.getUserMedia(),document.querySelector("video")),o=function(a){if(e.instance.stream=a,t.$broadcast("camSuccess",{stream:a}),navigator.mozGetUserMedia)n.mozSrcObject=a;
else{{window.URL||window.webkitURL}n.src=window.URL.createObjectURL(a)}n.play()},d=function(e){console.error(e)};navigator.getUserMedia({video:{mandatory:{maxHeight:s,maxWidth:l}},audio:!1},o,d),a.w=l,a.h=s}}}}]).directive("cameraControlSnapshot",["$rootScope",function(e){return{restrict:"EA",require:"^viCamera",scope:!0,template:'<a class="btn btn-info" ng-model="formCtrl.viewModel.image" ng-change="takenSnapshot()" ng-click="takeSnapshot()"><i class="fa fa-eye"></i> Take Snapshot</a><button type="button" ng-disabled="!takenImg" style="margin-left: 10px" class="btn btn-danger" ng-click="closeCameraNow()"><i class="fa fa-times-circle-o"></i> Save Picture</button>',link:function(t,a,i,r){t.takeSnapshot=function(){r.takeSnapshot().then(function(t){e.takenImg=t,e.$broadcast("picTaken",{image:t})})}}}}]),angular.module("changes",[]),angular.module("changes").service("changesService",["dbService","$rootScope","$interval","config",function(e,t,a,i){var r="_changes",l=this;l.get=function(t,a){return e.get(r,t,a)},l.all=function(t){return e.all(r,t)},l.hasChanged=function(e,t){if(!e)return!1;var a={model:e,load:"changes",limit:1,order_by:"-created"};return t&&(a["last-checked"]=t),l.all(a).then(function(e){return e.count>0})},this.pollForChanges=function(e,r,s){t.resetTimer=a(function(){if(!e.inProgress){e.inProgress=!0;var t={};r.getState().then(function(e){return t=e||t,l.hasChanged(s,t.lastCheckTime)}).then(function(a){return a?void(e.hasOwnProperty("search")&&Object.keys(e.search)>0?e.startSearch():e.updateView()):(e.inProgress=!1,t.lastCheckTime=(new Date).getTime(),r.setState(t))}).catch(function(){return e.inProgress=!1,t.lastCheckTime=(new Date).getTime(),r.setState(t)})}},i.refreshIntervals||3e3)}}]),angular.module("breadcrumbs",["core","config"]),angular.module("breadcrumbs").directive("viBreadcrumbs",["$log","breadcrumbService",function(){return{restrict:"AE",template:"this is the breadcrumbs",replace:!0,compile:function(){return function(){}}}}]),angular.module("breadcrumbs").service("breadcrumbsService",["$state","utility",function(e,t){function a(){for(var e={},t=r.length;t--;){var a=r[t];e[a.name]=a}return e}var i=this,r=e.get(),l=a();i.get=function(e){return l[e]||{}},i.all=function(){return l},i.getBreadCrumbs=function(e){var t=[],a=e.data||{};return"home"!==e.name&&e.hasOwnProperty("data")&&t.push({name:e.data.label,url:e.name,last:!0}),i.getParent(t,a.parent),t},i.getParent=function(e,a){var r=i.get(a),l=r.data||{};t.isEmptyObject(r)||(r.hasOwnProperty("data")&&e.unshift({name:r.data.label,url:r.data.link}),i.getParent(e,l.parent))}}]),angular.module("breadcrumbs").controller("BreadcrumbsCtrl",["$state","$rootScope","breadcrumbsService",function(e,t,a){var i=this;i.breadcrumbs=a.getBreadCrumbs(e.current),t.$on("$stateChangeStart",function(e,t){i.breadcrumbs=a.getBreadCrumbs(t)})}]),angular.module("cache",["ngCookies"]),angular.module("cache").service("cache",["$cookies",function(e){var t=this,a="vi-cache-params";t.VIEW_KEY="",t.get=function(){var i=e.getObject(a)||{};return i.hasOwnProperty(t.VIEW_KEY)?i[t.VIEW_KEY]:{}},t.set=function(i,r){var l=e.getObject(a)||{};l=l.hasOwnProperty(t.VIEW_KEY)?l[t.VIEW_KEY]:{},l[i]=r;var s={};return s[t.VIEW_KEY]=l,e.putObject(a,s)},this.getView=function(){return t.VIEW_KEY}}]),angular.module("auth",["core","utility","m.config"]),angular.module("auth").service("authService",["$q","$cookies","log","dbService",function(e,t,a,i){var r=this;r.login=function(a,r){return i.db.post("login",{username:a,password:r}).then(function(a){if(!a)return e.reject(a);var i=a;return t.putObject("vi-token",i.token),t.putObject("vi-user",i.user),a})},r.logout=function(){t.remove("vi-token"),t.remove("vi-user")},r.loggedIn=function(){return angular.isDefined(t.getObject("vi-token"))},r.currentUser=function(){return t.getObject("vi-user")},r.updateCurrentUser=function(e){var a=r.currentUser();for(var i in e)e.hasOwnProperty(i)&&(a[i]=e[i]);t.putObject("vi-user",a)}}]),angular.module("acl",[]),angular.module("acl").service("aclService",function(){var e=this;e.hasPermission=function(e){return e.is_superuser?!0:void(!e.is_superuser&&e.is_staff)}}),angular.module("viLogged").config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/"),e.state("root",{"abstract":!0,views:{root:{templateUrl:"app/index.html",controller:"IndexCtrl",controllerAs:"indexCtrl"}}}).state("index",{parent:"root","abstract":!0,views:{header:{templateUrl:"components/navbar/navbar.html",controller:"NavbarCtrl",controllerAs:"navbarCtrl"},sidenav:{templateUrl:"components/sidebar/sidebar.html",controller:"SidebarCtrl",controllerAs:"sidebarCtrl"},breadcrumbs:{templateUrl:"components/breadcrumbs/breadcrumbs.html",controller:"BreadcrumbsCtrl",controllerAs:"bcCtrl"},content:{},footer:{templateUrl:"components/footer/footer.html",controller:"FooterCtrl",controllerAs:"footerCtrl"}}})}]),angular.module("viLogged").controller("IndexCtrl",["$rootScope","log",function(e,t){function a(e){t.error("stateChangeError",e)}e.loginMode=!1,e.$on("$stateChangeError",a)}]),angular.module("viLogged").run(["$templateCache",function(e){e.put("app/index.html",'<div ui-view="header" id="navbar" class="navbar navbar-default navbar-collapse navbar-fixed-top"></div><div class="main-container" id="main-container"><div ui-view="sidenav" id="sidebar" class="sidebar responsive sidebar-fixed sidebar-scroll"></div><div class="main-content"><div class="main-content-inner"><div ui-view="breadcrumbs"></div><div class="page-content"><div ui-view="content"><div ui-view=""></div></div></div></div></div></div>'),e.put("app/root.html","<ui-view></ui-view>"),e.put("app/appointments/appointments.html","<ui-view></ui-view>"),e.put("app/home/home.html",'<div class="row"><div class="12"></div></div><div class="row"><div class="col-md-8"><div class="row"><div class="col-sm-12"><div class="page-header">Appointments in Progress</div></div><div class="col-sm-12" ng-if="homeCtrl.inProgress.length === 0"><div class="alert alert-info">No data Found</div></div><div class="col-sm-12" ng-if="homeCtrl.inProgress.length > 0"><table class="table table-striped"><thead><tr><th>#</th><th>Host</th><th>Guest</th><th>Start Date</th><th>End Date</th><th>Start Time</th><th>End Time</th></tr></thead><tbody><tr ng-repeat="item in homeCtrl.inProgress"><td ng-bind="::$index+1"></td><td ng-bind="::item.host.last_name +\' \'+item.host.first_name"></td><td ng-bind="::item.visitor.last_name+\' \'+item.visitor.first_name"></td><td ng-bind="::item.start_date"></td><td ng-bind="::item.end_date"></td><td ng-bind="::item.start_time"></td><td ng-bind="::item.end_time"></td></tr></tbody></table></div></div><div class="row"><div class="col-sm-12"><div class="page-header">Upcoming Appointments</div></div><div class="col-sm-12" ng-if="homeCtrl.upcoming.length === 0"><div class="alert alert-info">No data Found</div></div><div class="col-sm-12" ng-if="homeCtrl.upcoming.length > 0"><table class="table table-striped"><thead><tr><th>#</th><th>Host</th><th>Guest</th><th>Start Date</th><th>End Date</th><th>Start Time</th><th>End Time</th></tr></thead><tbody><tr ng-repeat="item in homeCtrl.upcoming"><td ng-bind="::$index+1"></td><td ng-bind="::item.host.last_name +\' \'+item.host.first_name"></td><td ng-bind="::item.visitor.last_name+\' \'+item.visitor.first_name"></td><td ng-bind="::item.start_date"></td><td ng-bind="::item.end_date"></td><td ng-bind="::item.start_time"></td><td ng-bind="::item.end_time"></td></tr></tbody></table></div></div><div class="row"><div class="col-sm-12"><div class="page-header">Appointments Awaiting Approval</div></div><div class="col-sm-12" ng-if="homeCtrl.awaitingApproval.length === 0"><div class="alert alert-info">No data Found</div></div><div class="col-sm-12" ng-if="homeCtrl.awaitingApproval.length > 0"><table class="table table-striped"><thead><tr><th>#</th><th>Host</th><th>Guest</th><th>Start Date</th><th>End Date</th><th>Start Time</th><th>End Time</th></tr></thead><tbody><tr ng-repeat="item in homeCtrl.awaitingApproval"><td ng-bind="::$index+1"></td><td ng-bind="::item.host.last_name +\' \'+item.host.first_name"></td><td ng-bind="::item.visitor.last_name+\' \'+item.visitor.first_name"></td><td ng-bind="::item.start_date"></td><td ng-bind="::item.end_date"></td><td ng-bind="::item.start_time"></td><td ng-bind="::item.end_time"></td></tr></tbody></table></div></div></div><div class="col-md-4"><div ng-include="\'app/home/partials/calendar.html\'"></div></div></div>'),e.put("app/login/login.html",'<div class="main-container"><div class="main-content"><div class="row"><div class="col-sm-10 col-sm-offset-1"><div class="login-container"><div class="center"></div><div class="space-6"></div><div class="position-relative"><div id="login-box" class="login-box visible widget-box no-border"><div class="widget-body"><div class="widget-main"><h4 class="header blue lighter bigger"><i class="ace-icon fa fa-coffee green"></i> Please Enter Your Information</h4><div class="space-6"></div><form ng-submit="loginCtrl.login()"><fieldset><label class="block clearfix"><span class="block input-icon input-icon-right"><input ng-model="loginCtrl.credentials.username" type="text" class="form-control" placeholder="Username"> <i class="ace-icon fa fa-user"></i></span></label> <label class="block clearfix"><span class="block input-icon input-icon-right"><input ng-model="loginCtrl.credentials.password" type="password" class="form-control" placeholder="Password"> <i class="ace-icon fa fa-lock"></i></span></label><div class="space"></div><div class="clearfix"><label class="inline"><input type="checkbox" class="ace"> <span class="lbl">Remember Me</span></label> <button type="submit" class="width-35 pull-right btn btn-sm btn-primary"><i class="ace-icon fa fa-key"></i> <span class="bigger-110">Login</span></button></div><div class="space-4"></div></fieldset></form><div class="space-6"></div></div></div></div></div></div></div></div></div></div>'),e.put("app/company/company.html","<ui-view></ui-view>"),e.put("app/settings/settings.html",'<div class="row"><div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix">Systems Settings<div class="pull-right" ng-include="\'components/form/partials/elements/submit-small.html\'"></div></h1></div><form><div class="form-group"><div class="row"><div class="col-sm-12"><div id="recent-box" class="widget-box transparent"><div class="widget-header"><h4 class="widget-title lighter smaller"></h4><div class="widget-toolbar no-border"><ul id="recent-tab" class="nav nav-tabs"><li class="pointer" ng-class="{\'active\': formCtrl.active === \'database\'}" ng-click="formCtrl.open(\'database\')"><a data-toggle="tab">Database</a></li><li class="pointer" ng-class="{\'active\': formCtrl.active === \'ldap\'}" ng-click="formCtrl.open(\'ldap\')"><a data-toggle="tab">LDAP</a></li><li class="pointer" ng-class="{\'active\': formCtrl.active === \'sms\'}" ng-click="formCtrl.open(\'sms\')"><a data-toggle="tab">SMS</a></li><li class="pointer" ng-class="{\'active\': formCtrl.active === \'email\'}" ng-click="formCtrl.open(\'email\')"><a data-toggle="tab">Email</a></li><li class="pointer" ng-class="{\'active\': formCtrl.active === \'system\'}" ng-click="formCtrl.open(\'system\')"><a data-toggle="tab">System</a></li></ul></div></div><div class="widget-body" ng-include="formCtrl.template"></div></div></div></div></div><div class="row"><div class="col-sm-12" ng-include="\'components/form/partials/elements/submit.html\'"></div></div></form></div></div>'),e.put("app/departments/departments.html","<ui-view></ui-view>"),e.put("app/users/users.html","<ui-view></ui-view>"),e.put("app/visitors/visitors.html","<ui-view></ui-view>"),e.put("app/visitors-group/visitors-group.html","<ui-view></ui-view>"),e.put("components/breadcrumbs/breadcrumbs.html",'<div id="breadcrumbs" class="breadcrumbs"><ul class="breadcrumb"><li><i class="ace-icon fa fa-home home-icon"></i> <a ui-sref="home">Home</a></li><li class="active" ng-repeat="item in bcCtrl.breadcrumbs"><a ng-if="!item.last" ui-sref="{{item.url}}" ng-bind="item.name"></a> <span ng-if="item.last" ng-bind="item.name"></span></li></ul></div>'),e.put("components/footer/footer.html",'<div class="footer"><div class="footer-inner"><div class="footer-content"></div></div></div>'),e.put("components/sidebar/sidebar.html",'<ul class="nav nav-list"><li ng-repeat="item in sidebarCtrl.items"><a ui-sref="{{ item.link }}"><i class="menu-icon {{ item.icon }}"></i> <span class="menu-text" ng-bind="item.label"></span></a></li></ul>'),e.put("components/navbar/navbar.html",'<div class="navbar-container" id="navbar-container"><button type="button" class="navbar-toggle menu-toggler pull-left" id="menu-toggler" data-target="#sidebar"><span class="sr-only">Toggle sidebar</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button><div class="navbar-header pull-left"><a ui-sref="home" class="navbar-brand">viLogged VMS</a></div><div class="navbar-buttons navbar-header pull-right" role="navigation"><ul class="nav vi-nav"><li class="light-blue"><a data-toggle="dropdown" class="dropdown-toggle pointer"><img ng-if="currentUser.image" class="nav-user-photo" ng-src="currentUser.image"> <img ng-show="!currentUser.image" class="nav-user-photo" src="../../assets/avatars/avatar2.png"> <span class="user-info" ng-bind="currentUser.first_name || currentUser.last_name || currentUser.username"></span> <i class="ace-icon fa fa-caret-down"></i></a><ul class="user-menu dropdown-menu-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close"><li><a ui-sref="users.changePassword"><i class="ace-icon fa fa-cog"></i> Change Password</a></li><li><a ui-sref="users.profile"><i class="ace-icon fa fa-user"></i> Profile</a></li><li class="divider"></li><li><a ui-sref="logout"><i class="ace-icon fa fa-power-off"></i> Logout</a></li></ul></li></ul></div></div>'),e.put("app/appointments/all/all.html",'<div class="page-header"><div class="row"><div class="col-sm-7"><h1>Appointments</h1></div><div class="col-sm-5"><div class="input-group"><input class="form-control" ng-model="allCtrl.q" ng-change="allCtrl.searchPage()"> <span ng-click="allCtrl.searchPage()" class="input-group-addon">Search</span></div></div></div></div><div class="row"><div class="col-sm-12"><div class="custom-form-save clearfix"><a class="btn btn-primary pull-right" ui-sref="appointments.add"><i class="fa fa-plus-circle"></i> Create</a> <a class="btn btn-primary pull-right margin-10-r pointer" ng-csv="allCtrl.getList()" csv-header="allCtrl.header" lazy-load="true" filename="{{ allCtrl.filename }}"><i class="fa fa-file-excel-o"></i> Export</a></div></div></div><div class="row" ng-if="allCtrl.items.length === 0 && !allCtrl.is_active_search"><div class="col-sm-12"><div class="alert alert-info"><i class="fa fa-exclamation-circle"></i> No Data Found</div></div></div><div class="row" ng-if="allCtrl.items.length > 0 || allCtrl.is_active_search"><div class="col-xs-12"><div class="row"><div class="col-xs-12"><table id="simple-table" class="table table-striped table-bordered table-hover"><thead><tr><th>#</th><th><span class="pointer block" ng-click="allCtrl.updateView(\'host\')">Host <span ng-show="allCtrl.orderByColumn[\'host\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'host\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'host\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'visitor\')">Visitor <span ng-show="allCtrl.orderByColumn[\'visitor\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'visitor\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'visitor\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'start_date\')">Start Date <span ng-show="allCtrl.orderByColumn[\'start_date\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'start_date\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'start_date\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'end_date\')">End Date <span ng-show="allCtrl.orderByColumn[\'end_date\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'end_date\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'end_date\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'start_time\')">Start Time <span ng-show="allCtrl.orderByColumn[\'start_time\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'start_time\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'start_time\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'end_time\')">End Time <span ng-show="allCtrl.orderByColumn[\'end_time\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'end_time\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'end_time\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'is_approved\')">Status <span ng-show="allCtrl.orderByColumn[\'is_approved\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'is_approved\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'is_approved\'].reverse}"></span></span></th><th>Acions</th></tr><tr><th></th><th ng-repeat="filterField in allCtrl.filterFields"><input ng-if="filterField.filter && (!filterField.type || filterField.type === \'text\')" class="form-control" ng-model="allCtrl.search[filterField.field]" ng-change="allCtrl.startSearch(filterField.field)"> <span ng-if="filterField.filter && filterField.type === \'date\'" class="form-control" uib-datepicker-popup="" ng-model="allCtrl.search[filterField.field]" ng-change="allCtrl.startSearch(filterField.field)" is-open="allCtrl.date[filterField.field].opened" ng-click="allCtrl.date[filterField.field].open($event)" close-text="Close"><i class="fa fa-calendar"></i></span></th><th><button class="btn btn-primary btn-xs pointer" ng-click="allCtrl.clear()">Clear Search</button></th></tr></thead><tbody><tr ng-repeat="item in allCtrl.items"><td ng-bind="$index + 1 + ((allCtrl.pagination.currentPage-1) * allCtrl.pagination.itemsPerPage)"></td><td><a ui-sref="appointments.detail({_id: item._id})" ng-bind="item.host.last_name+\' \'+item.host.first_name"></a></td><td ng-bind="item.visitor.last_name+\' \'+item.visitor.first_name"></td><td ng-bind="item.start_date"></td><td ng-bind="item.end_date"></td><td ng-bind="item.start_time"></td><td ng-bind="item.end_time"></td><td><span class="label" ng-class="{ \'label-success arrowed-in arrowed-in-right\': [allCtrl.status.UPCOMING, allCtrl.status.IN_PROGRESS].indexOf(item.status) >= 0, \'label-danger arrowed-right arrowed-in\': [allCtrl.status.REJECTED, allCtrl.status.EXPIRED].indexOf(item.status) >= 0, \'label-default arrowed arrowed-right\': item.status === allCtrl.status.PENDING }"><span ng-if="item.status === allCtrl.status.UPCOMING">Upcoming</span> <span ng-if="item.status === allCtrl.status.REJECTED">Rejected</span> <span ng-if="item.status === allCtrl.status.PENDING">Pending</span> <span ng-if="item.status === allCtrl.status.EXPIRED">Expired</span> <span ng-if="item.status === allCtrl.status.IN_PROGRESS">In Progress</span></span></td><td><div class="hidden-sm hidden-xs action-buttons"><a ng-if="item.status === allCtrl.status.UPCOMING" class="badge badge-info" ui-sref="appointments.checkin({_id: item._id})">Checkin</a> <a ng-if="item.status === allCtrl.status.IN_PROGRESS" class="badge badge-info" ui-sref="appointments.checkin({_id: item._id})">Check out</a> <a ui-sref="appointments.detail({_id: item._id})" class="blue"><i class="ace-icon fa fa-eye bigger-130"></i></a> <a ui-sref="appointments.edit({_id: item._id})" class="green"><i class="ace-icon fa fa-pencil bigger-130"></i></a> <span ng-click="allCtrl.remove(item._id)" class="red pointer"><i class="ace-icon fa fa-trash-o bigger-130"></i></span></div><div class="hidden-md hidden-lg"><div class="inline pos-rel"><button data-position="auto" data-toggle="dropdown" class="btn btn-minier btn-yellow dropdown-toggle" aria-expanded="false"><i class="ace-icon fa fa-caret-down icon-only bigger-120"></i></button><ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close" style=""><li><a title="" data-rel="tooltip" class="tooltip-info" ui-sref="appointments.detail({_id: item._id})" data-original-title="View"><span class="blue"><i class="ace-icon fa fa-search-plus bigger-120"></i></span></a></li><li><a title="" data-rel="tooltip" class="tooltip-success" ui-sref="appointments.edit({_id: item._id})" data-original-title="Edit"><span class="green"><i class="ace-icon fa fa-pencil-square-o bigger-120"></i></span></a></li><li><a title="" data-rel="tooltip" class="tooltip-error" ui-sref="appointments.remove({_id: item._id})" data-original-title="Delete"><span class="red"><i class="ace-icon fa fa-trash-o bigger-120"></i></span></a></li></ul></div></div></td></tr></tbody></table></div></div><div class="row"><div class="col-xs-11"><uib-pagination total-items="allCtrl.pagination.totalItems" ng-model="allCtrl.pagination.currentPage" max-size="allCtrl.pagination.maxSize" class="allCtrl.pagination-sm pull-right" boundary-links="true" rotate="false" ng-change="allCtrl.updateView()" items-per-page="allCtrl.pagination.itemsPerPage" num-pages="allCtrl.pagination.numPages"></uib-pagination></div><div class="col-xs-1"><label class="pull-right"><select ng-model="allCtrl.pagination.itemsPerPage" ng-change="allCtrl.updateView()" class="form-control input-sm"><option ng-selected="allCtrl.pagination.itemsPerPage === 10" value="10">10</option><option ng-selected="allCtrl.pagination.itemsPerPage === 25" value="25">25</option><option ng-selected="allCtrl.pagination.itemsPerPage === 50" value="50">50</option><option ng-selected="allCtrl.pagination.itemsPerPage === 100" value="100">100</option></select></label></div></div></div></div>'),e.put("app/appointments/form/form.html",'<div class="row"><div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix">Appointment Form<div class="pull-right" ng-include="\'components/form/partials/elements/submit-small.html\'"></div></h1></div><form><div class="form-group" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'" ng-if="!elem.custom"></div><div class="custom-form" ng-if="elem.custom" ng-include="elem.template"></div></div></div></div><div class="form-group"><div class="row"><div class="col-sm-12"><h3 class="page-header">Team Members (Visitor Group)</h3><div style="margin-bottom: 10px;" ng-include="\'app/appointments/form/partials/groups.html\'"></div><table class="table table-striped" ng-if="formCtrl.teamMembers.length > 0"><thead><tr><th>#</th><th>Last Name</th><th>First Name</th><th>Phone</th><th>Action</th></tr></thead><tbody><tr ng-repeat="item in formCtrl.teamMembers"><td ng-bind="$index + 1"></td><td ng-bind="item.last_name"></td><td ng-bind="item.first_name"></td><td ng-bind="item.phone"></td><td ng-click="formCtrl.removeMember(item)"><span><i class="ace-icon fa fa-trash bigger-130"></i></span></td></tr></tbody></table></div></div></div><div class="row"><div class="col-sm-12" ng-include="\'components/form/partials/elements/submit.html\'"></div></div></form></div></div>'),e.put("app/appointments/logs/checkin.html",'<div class="space-6"></div><div class="well well-sm clearfix"><div class="infobox infobox-blue"><div class="infobox-icon"><i class="ace-icon fa fa-calendar"></i></div><div class="infobox-data"><span class="infobox-data-content">Arrival Date</span><div class="infobox-content"><span ng-bind="::logCtrl.item.start_date"></span></div></div></div><div class="infobox infobox-brown"><div class="infobox-icon"><i class="ace-icon fa fa-clock-o"></i></div><div class="infobox-data"><span class="infobox-data-content">Arrival Time</span><div class="infobox-content"><span ng-bind="::logCtrl.item.start_time"></span></div></div></div><div class="infobox infobox-brown"><div class="infobox-icon"><i class="ace-icon fa fa-clock-o"></i></div><div class="infobox-data"><span class="infobox-data-content">Departure Time</span><div class="infobox-content"><span ng-bind="::logCtrl.item.end_time"></span></div></div></div><button class="infobox infobox-blue3 pointer" ng-click="logCtrl.printLabel()" ng-if="logCtrl.item.status === logCtrl.status.IN_PROGRESS"><div class="infobox-icon"><i class="ace-icon fa fa-print"></i></div><div class="infobox-data"><span class="infobox-data-content"><h3>Print Badge</h3></span></div></button> <button class="btn btn-success pull-right" ng-click="logCtrl.checkIn(item)" ng-if="logCtrl.item.status === logCtrl.status.UPCOMING"><i class="fa fa-check-square-o"></i> Check In</button> <button class="btn btn-success pull-right" ng-click="logCtrl.checkOut(item)" ng-if="logCtrl.item.status === logCtrl.status.IN_PROGRESS"><i class="fa fa-check-square-o"></i> Check Out</button><div class="pull-right" ng-if="logCtrl.item.status === logCtrl.status.PENDING || logCtrl.item.status === logCtrl.status.REJECTED"><button class="btn btn-success" type="button" ng-click="logCtrl.updateApp(logCtrl.item, \'true\')"><i class="fa fa-check"></i> Approve</button> <button class="btn btn-danger" type="button" ng-click="logCtrl.updateApp(logCtrl.item, \'false\')"><i class="fa fa-times"></i> Reject</button></div></div><div class="hr hr12 dotted"></div><div class="row"><div class="col-sm-6"><div class="row"><div class="col-sm-12"><h3 class="page-header">Host Detail</h3></div></div><div class="row"><div class="col-sm-12"><div><div id="user-profile-1" class="user-profile row"><div class="col-sm-4 center"><div><span class="profile-picture"><img ng-if="!logCtrl.item.host.image" id="avatar" class="editable img-responsive" alt="" src="../assets/avatars/profile-pic.jpg"> <img style="max-height: 250px" ng-if="logCtrl.item.host.image" id="avatar" class="editable img-responsive" alt="" ng-src="{{ logCtrl.item.host.image }}"></span><div class="space-4"></div></div><div class="space-6"></div></div><div class="col-sm-8"><div class="profile-user-info profile-user-info-striped"><div class="profile-info-row"><div class="profile-info-name">First Name</div><div class="profile-info-value"><span class="editable" id="first_name" ng-bind="logCtrl.item.host.first_name"></span></div></div><div class="profile-info-row"><div class="profile-info-name">Last Name</div><div class="profile-info-value"><span class="editable" id="last_name" ng-bind="logCtrl.item.host.last_name"></span></div></div><div class="profile-info-row"><div class="profile-info-name">Username</div><div class="profile-info-value"><span class="editable" id="username" ng-bind="logCtrl.item.host.username"></span></div></div><div class="profile-info-row"><div class="profile-info-name">Email</div><div class="profile-info-value" ng-bind="logCtrl.item.host.email"></div></div><div class="profile-info-row"><div class="profile-info-name">Gender</div><div class="profile-info-value" ng-bind="logCtrl.item.host.gender"></div></div><div class="profile-info-row"><div class="profile-info-name">Joined</div><div class="profile-info-value"><span class="editable" id="signup" ng-bind="logCtrl.item.host.date_joined | date:\'yyyy/MM/dd\'">2010/06/20</span></div></div></div><div class="space-20"></div><div class="space-6"></div></div></div></div></div></div></div><div class="col-sm-6"><div class="row"><div class="col-sm-12"><h3 class="page-header">Guest Detail</h3></div></div><div class="row"><div class="col-sm-12"><div><div id="user-profile-1" class="user-profile row"><div class="col-sm-4 center"><div><span class="profile-picture"><img ng-if="!logCtrl.item.visitor.image" id="avatar" class="editable img-responsive" alt="" src="../assets/avatars/profile-pic.jpg"> <img style="max-height: 180px" ng-if="logCtrl.item.visitor.image" id="avatar" class="editable img-responsive" alt="" ng-src="{{ logCtrl.item.visitor.image }}"></span><div class="space-4"></div></div><div class="space-6"></div></div><div class="col-sm-8"><div class="profile-user-info profile-user-info-striped"><div class="profile-info-row"><div class="profile-info-name">First Name</div><div class="profile-info-value"><span class="editable" id="first_name" ng-bind="logCtrl.item.visitor.first_name"></span></div></div><div class="profile-info-row"><div class="profile-info-name">Last Name</div><div class="profile-info-value"><span class="editable" id="last_name" ng-bind="logCtrl.item.visitor.last_name"></span></div></div><div class="profile-info-row"><div class="profile-info-name">Email</div><div class="profile-info-value" ng-bind="logCtrl.item.visitor.email"></div></div><div class="profile-info-row"><div class="profile-info-name">Gender</div><div class="profile-info-value" ng-bind="logCtrl.item.visitor.gender"></div></div><div class="profile-info-row"><div class="profile-info-name">Created</div><div class="profile-info-value"><span class="editable" id="signup" ng-bind="logCtrl.item.visitor.created | date:\'yyyy/MM/dd\'">2010/06/20</span></div></div><div class="profile-info-row"><div class="profile-info-name"></div><div class="profile-info-value"><span class="editable" id="signup">&nbsp;</span></div></div></div><div class="space-20"></div><div class="space-6"></div></div></div></div></div></div></div></div><div class="row" ng-if="logCtrl.teamMembers.length > 0"><div class="col-sm-12"><h3 class="page-header">Team Members (Visitor Group)</h3><table class="table table-striped"><thead><tr><th>#</th><th>Last Name</th><th>First Name</th><th>Phone</th></tr></thead><tbody><tr ng-repeat="item in logCtrl.teamMembers"><td ng-bind="$index + 1"></td><td ng-bind="item.last_name"></td><td ng-bind="item.first_name"></td><td ng-bind="item.phone"></td></tr></tbody></table></div></div>'),e.put("app/appointments/profile/profile.html",'<div class="page-header"><h1>User Profile Page</h1></div><div class="row"><div class="col-xs-12"><div><div id="user-profile-1" class="user-profile row"><div class="col-xs-12 col-sm-3 center"><div><span class="profile-picture"><img style="max-height: 200px; max-width: 180px;" ng-if="!profileCtrl.profile.image" id="avatar" class="editable img-responsive" alt="" src="../assets/avatars/profile-pic.jpg"> <img ng-if="profileCtrl.profile.image" id="avatar" class="editable img-responsive" alt="" ng-src="profileCtrl.profile.image"></span><div class="space-4"></div><div class="width-80 label label-info label-xlg arrowed-in arrowed-in-right"><div class="inline position-relative"><a ui-sref="users.edit({_id: profileCtrl.profile._id})" class="user-title-label dropdown-toggle" data-toggle="dropdown"><i class="ace-icon fa fa-circle light-green"></i> &nbsp; <span class="white" ng-bind="profileCtrl.profile.last_name+ \' \'+ profileCtrl.profile.first_name"></span></a></div></div></div><div class="space-6"></div><div class="hr hr12 dotted"></div></div><div class="col-xs-12 col-sm-9"><div class="profile-user-info profile-user-info-striped"><div class="profile-info-row"><div class="profile-info-name">Username</div><div class="profile-info-value"><span class="editable" id="username" ng-bind="profileCtrl.profile.username"></span></div></div><div class="profile-info-row"><div class="profile-info-name">Email</div><div class="profile-info-value" ng-bind="profileCtrl.profile.email"></div></div><div class="profile-info-row"><div class="profile-info-name">Gender</div><div class="profile-info-value" ng-bind="profileCtrl.profile.gender"></div></div><div class="profile-info-row"><div class="profile-info-name">Joined</div><div class="profile-info-value"><span class="editable" id="signup" ng-bind="profileCtrl.profile.date_joined | date:\'yyyy/MM/dd\'">2010/06/20</span></div></div><div class="profile-info-row"><div class="profile-info-name">Last Online</div><div class="profile-info-value"><span class="editable" id="login">3 hours ago</span></div></div></div><div class="space-20"></div><div class="space-6"></div></div></div></div></div></div>'),e.put("app/home/partials/calendar.html",'<div ui-calendar="homeCtrl.uiConfig.calendar" ng-model="homeCtrl.eventSources"></div>'),e.put("app/company/all/all.html",'<div class="page-header"><h1>Companies</h1></div><div class="row"><div class="col-sm-12"><div class="custom-form-save clearfix"><a class="btn btn-primary pull-right" ui-sref="company.add"><i class="fa fa-plus-circle"></i> Create</a></div></div></div><div class="row"><div class="col-xs-12"><div class="row"><div class="col-xs-12"><table id="simple-table" class="table table-striped table-bordered table-hover"><thead><tr><th>#</th><th><span class="pointer block" ng-click="allCtrl.updateView(\'name\')">Company <span ng-show="allCtrl.orderByColumn[\'name\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'name\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'name\'].reverse}"></span></span></th><th>Address</th><th><span class="pointer block" ng-click="allCtrl.updateView(\'created\')">Date Created <span ng-show="allCtrl.orderByColumn[\'created\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'created\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'created\'].reverse}"></span></span></th><th>Acions</th></tr></thead><tbody><tr ng-repeat="item in allCtrl.companies"><td ng-bind="$index + 1 + ((allCtrl.pagination.currentPage-1) * allCtrl.pagination.itemsPerPage)"></td><td ng-bind="::item.name"></td><td ng-bind="::item.address"></td><td ng-bind="::item.created | date:\'yyyy-MM-dd\'"></td><td><div class="hidden-sm hidden-xs action-buttons"><a ui-sref="company.edit({_id: item._id})" class="green"><i class="ace-icon fa fa-pencil bigger-130"></i></a> <a ui-sref="company.remove({_id: item._id})" class="red"><i class="ace-icon fa fa-trash-o bigger-130"></i></a></div><div class="hidden-md hidden-lg"><div class="inline pos-rel"><button data-position="auto" data-toggle="dropdown" class="btn btn-minier btn-yellow dropdown-toggle" aria-expanded="false"><i class="ace-icon fa fa-caret-down icon-only bigger-120"></i></button><ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close" style=""><li><a title="" data-rel="tooltip" class="tooltip-success" ui-sref="company.edit({_id: item._id})" data-original-title="Edit"><span class="green"><i class="ace-icon fa fa-pencil-square-o bigger-120"></i></span></a></li><li><a title="" data-rel="tooltip" class="tooltip-error" ui-sref="company.remove({_id: item._id})" data-original-title="Delete"><span class="red"><i class="ace-icon fa fa-trash-o bigger-120"></i></span></a></li></ul></div></div></td></tr></tbody></table></div></div><div class="row"><div class="col-xs-11"><uib-pagination total-items="allCtrl.pagination.totalItems" ng-model="allCtrl.pagination.currentPage" max-size="allCtrl.pagination.maxSize" class="allCtrl.pagination-sm pull-right" boundary-links="true" rotate="false" ng-change="allCtrl.updateView()" items-per-page="allCtrl.pagination.itemsPerPage" num-pages="allCtrl.pagination.numPages"></uib-pagination></div><div class="col-xs-1"><label class="pull-right"><select ng-model="allCtrl.pagination.itemsPerPage" ng-change="allCtrl.updateView()" class="form-control input-sm"><option ng-selected="allCtrl.pagination.itemsPerPage === 10" value="10">10</option><option ng-selected="allCtrl.pagination.itemsPerPage === 25" value="25">25</option><option ng-selected="allCtrl.pagination.itemsPerPage === 50" value="50">50</option><option ng-selected="allCtrl.pagination.itemsPerPage === 100" value="100">100</option></select></label></div></div></div></div>'),e.put("app/company/form/form.html",'<div class="row"><div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix">Company<div class="pull-right" ng-include="\'components/form/partials/elements/submit-small.html\'"></div></h1></div><form><div class="form-grou" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'"></div></div></div></div><div class="row"><div class="col-sm-12" ng-include="\'components/form/partials/elements/submit.html\'"></div></div></form></div></div>'),e.put("app/departments/all/all.html",'<div class="page-header"><h1>Departments</h1></div><div class="row"><div class="col-sm-12"><div class="custom-form-save clearfix"><a class="btn btn-primary pull-right" ui-sref="departments.add"><i class="fa fa-plus-circle"></i> Create</a></div></div></div><div class="row"><div class="col-xs-12"><div class="row"><div class="col-xs-12"><table id="simple-table" class="table table-striped table-bordered table-hover"><thead><tr><th>#</th><th><span class="pointer block" ng-click="allCtrl.updateView(\'name\')">Department <span ng-show="allCtrl.orderByColumn[\'name\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'name\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'name\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'floor\')">Floor <span ng-show="allCtrl.orderByColumn[\'floor\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'floor\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'floor\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'created\')">Date Created <span ng-show="allCtrl.orderByColumn[\'created\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'created\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'created\'].reverse}"></span></span></th><th>Acions</th></tr></thead><tbody><tr ng-repeat="item in allCtrl.items"><td ng-bind="$index + 1 + ((allCtrl.pagination.currentPage-1) * allCtrl.pagination.itemsPerPage)"></td><td ng-bind="::item.name"></td><td ng-bind="::item.floor"></td><td ng-bind="::item.created | date:\'yyyy-MM-dd\'"></td><td><div class="hidden-sm hidden-xs action-buttons"><a ui-sref="departments.edit({_id: item._id})" class="green"><i class="ace-icon fa fa-pencil bigger-130"></i></a> <a ng-click="allCtrl.remove(item._id)" class="red pointer"><i class="ace-icon fa fa-trash-o bigger-130"></i></a></div><div class="hidden-md hidden-lg"><div class="inline pos-rel"><button data-position="auto" data-toggle="dropdown" class="btn btn-minier btn-yellow dropdown-toggle" aria-expanded="false"><i class="ace-icon fa fa-caret-down icon-only bigger-120"></i></button><ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close" style=""><li><a title="" data-rel="tooltip" class="tooltip-info" ui-sref="departments.detail({_id: item._id})" data-original-title="View"><span class="blue"><i class="ace-icon fa fa-search-plus bigger-120"></i></span></a></li><li><a title="" data-rel="tooltip" class="tooltip-success" ui-sref="departments.edit({_id: item._id})" data-original-title="Edit"><span class="green"><i class="ace-icon fa fa-pencil-square-o bigger-120"></i></span></a></li><li><a title="" data-rel="tooltip" class="tooltip-error" ng-click="allCtrl.remove(item._id)" data-original-title="Delete"><span class="red"><i class="ace-icon fa fa-trash-o bigger-120"></i></span></a></li></ul></div></div></td></tr></tbody></table></div></div><div class="row"><div class="col-xs-11"><uib-pagination total-items="allCtrl.pagination.totalItems" ng-model="allCtrl.pagination.currentPage" max-size="allCtrl.pagination.maxSize" class="allCtrl.pagination-sm pull-right" boundary-links="true" rotate="false" ng-change="allCtrl.updateView()" items-per-page="allCtrl.pagination.itemsPerPage" num-pages="allCtrl.pagination.numPages"></uib-pagination></div><div class="col-xs-1"><label class="pull-right"><select ng-model="allCtrl.pagination.itemsPerPage" ng-change="allCtrl.updateView()" class="form-control input-sm"><option ng-selected="allCtrl.pagination.itemsPerPage === 10" value="10">10</option><option ng-selected="allCtrl.pagination.itemsPerPage === 25" value="25">25</option><option ng-selected="allCtrl.pagination.itemsPerPage === 50" value="50">50</option><option ng-selected="allCtrl.pagination.itemsPerPage === 100" value="100">100</option></select></label></div></div></div></div>'),e.put("app/departments/form/form.html",'<div class="row"><div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix">Department Profile Form<div class="pull-right" ng-include="\'components/form/partials/elements/submit-small.html\'"></div></h1></div><form><div class="form-grou" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'"></div></div></div></div><div class="row"><div class="col-sm-12" ng-include="\'components/form/partials/elements/submit.html\'"></div></div></form></div></div>'),e.put("app/departments/profile/profile.html",'<div class="page-header"><h1>User Profile Page</h1></div><div class="row"><div class="col-xs-12"><div><div id="user-profile-1" class="user-profile row"><div class="col-xs-12 col-sm-3 center"><div><span class="profile-picture"><img style="max-height: 200px; max-width: 180px;" ng-if="!profileCtrl.profile.image" id="avatar" class="editable img-responsive" alt="" src="../assets/avatars/profile-pic.jpg"> <img ng-if="profileCtrl.profile.image" id="avatar" class="editable img-responsive" alt="" ng-src="profileCtrl.profile.image"></span><div class="space-4"></div><div class="width-80 label label-info label-xlg arrowed-in arrowed-in-right"><div class="inline position-relative"><a ui-sref="users.edit({_id: profileCtrl.profile._id})" class="user-title-label dropdown-toggle" data-toggle="dropdown"><i class="ace-icon fa fa-circle light-green"></i> &nbsp; <span class="white" ng-bind="profileCtrl.profile.last_name+ \' \'+ profileCtrl.profile.first_name"></span></a></div></div></div><div class="space-6"></div><div class="hr hr12 dotted"></div></div><div class="col-xs-12 col-sm-9"><div class="profile-user-info profile-user-info-striped"><div class="profile-info-row"><div class="profile-info-name">Username</div><div class="profile-info-value"><span class="editable" id="username" ng-bind="profileCtrl.profile.username"></span></div></div><div class="profile-info-row"><div class="profile-info-name">Email</div><div class="profile-info-value" ng-bind="profileCtrl.profile.email"></div></div><div class="profile-info-row"><div class="profile-info-name">Gender</div><div class="profile-info-value" ng-bind="profileCtrl.profile.gender"></div></div><div class="profile-info-row"><div class="profile-info-name">Joined</div><div class="profile-info-value"><span class="editable" id="signup" ng-bind="profileCtrl.profile.date_joined | date:\'yyyy/MM/dd\'">2010/06/20</span></div></div><div class="profile-info-row"><div class="profile-info-name">Last Online</div><div class="profile-info-value"><span class="editable" id="login">3 hours ago</span></div></div></div><div class="space-20"></div><div class="widget-box transparent"><div class="widget-header widget-header-small"><h4 class="widget-title blue smaller"><i class="ace-icon fa fa-rss orange"></i> Recent Activities</h4><div class="widget-toolbar action-buttons"><a href="#" data-action="reload"><i class="ace-icon fa fa-refresh blue"></i></a> &nbsp; <a href="#" class="pink"><i class="ace-icon fa fa-trash-o"></i></a></div></div><div class="widget-body"><div class="widget-main padding-8"></div></div></div><div class="space-6"></div></div></div></div></div></div>'),e.put("app/users/all/all.html",'<div class="page-header"><div class="row"><div class="col-sm-7"><h1>Users</h1></div><div class="col-sm-5"><div class="input-group"><input class="form-control" ng-model="allCtrl.q" ng-change="allCtrl.searchPage()"> <span ng-click="allCtrl.searchPage()" class="input-group-addon">Search</span></div></div></div></div><div class="row"><div class="col-sm-12"><div class="custom-form-save clearfix"><a class="btn btn-primary pull-right" ui-sref="users.add"><i class="fa fa-plus-circle"></i> Create</a> <a class="btn btn-primary pull-right margin-10-r pointer" ng-csv="allCtrl.getList()" csv-header="allCtrl.header" lazy-load="true" filename="{{ allCtrl.filename }}"><i class="fa fa-file-excel-o"></i> Export</a></div></div></div><div class="row"><div class="col-xs-12"><div class="row"><div class="col-xs-12"><table id="simple-table" class="table table-striped table-bordered table-hover"><thead><tr><th>#</th><th><span class="pointer block" ng-click="allCtrl.updateView(\'first_name\')">First Name <span ng-show="allCtrl.orderByColumn[\'first_name\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'first_name\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'first_name\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'last_name\')">Last Name <span ng-show="allCtrl.orderByColumn[\'last_name\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'last_name\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'last_name\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'username\')">Username <span ng-show="allCtrl.orderByColumn[\'username\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'username\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'username\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'email\')">Email <span ng-show="allCtrl.orderByColumn[\'email\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'email\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'email\'].reverse}"></span></span></th><th>Department</th><th><span class="pointer block" ng-click="allCtrl.updateView(\'date_joined\')">Date Created <span ng-show="allCtrl.orderByColumn[\'date_joined\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'date_joined\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'date_joined\'].reverse}"></span></span></th><th>Acions</th></tr><tr><th></th><th ng-repeat="filterField in allCtrl.filterFields"><input ng-if="filterField.filter" class="form-control" ng-model="allCtrl.search[filterField.field]" ng-change="allCtrl.startSearch(filterField.field)"></th><th><button class="btn btn-primary btn-xs pointer" ng-click="allCtrl.clear()">Clear Search</button></th></tr></thead><tbody><tr ng-repeat="item in allCtrl.items"><td ng-bind="$index + 1 + ((allCtrl.pagination.currentPage-1) * allCtrl.pagination.itemsPerPage)"></td><td ng-bind="item.first_name"></td><td ng-bind="item.last_name"></td><td ng-bind="item.username"></td><td ng-bind="item.email"></td><td ng-bind="item.department.name"></td><td ng-bind="item.date_joined | date:\'yyyy-MM-dd\'"></td><td><div class="hidden-sm hidden-xs action-buttons"><a ui-sref="users.detail({_id: item._id})" class="blue"><i class="ace-icon fa fa-eye bigger-130"></i></a> <a ui-sref="users.edit({_id: item._id})" class="green"><i class="ace-icon fa fa-pencil bigger-130"></i></a> <a ng-click="allCtrl.remove(item._id)" class="red pointer"><i class="ace-icon fa fa-trash-o bigger-130"></i></a></div><div class="hidden-md hidden-lg"><div class="inline pos-rel"><button data-position="auto" data-toggle="dropdown" class="btn btn-minier btn-yellow dropdown-toggle" aria-expanded="false"><i class="ace-icon fa fa-caret-down icon-only bigger-120"></i></button><ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close" style=""><li><a title="" data-rel="tooltip" class="tooltip-info" ui-sref="users.detail({_id: item._id})" data-original-title="View"><span class="blue"><i class="ace-icon fa fa-search-plus bigger-120"></i></span></a></li><li><a title="" data-rel="tooltip" class="tooltip-success" ui-sref="users.edit({_id: item._id})" data-original-title="Edit"><span class="green"><i class="ace-icon fa fa-pencil-square-o bigger-120"></i></span></a></li><li><a title="" data-rel="tooltip" class="tooltip-error" ng-click="allCtrl.remove(item._id)" data-original-title="Delete"><span class="red"><i class="ace-icon fa fa-trash-o bigger-120"></i></span></a></li></ul></div></div></td></tr></tbody></table></div></div><div class="row"><div class="col-xs-11"><uib-pagination total-items="allCtrl.pagination.totalItems" ng-model="allCtrl.pagination.currentPage" max-size="allCtrl.pagination.maxSize" class="allCtrl.pagination-sm pull-right" boundary-links="true" rotate="false" ng-change="allCtrl.updateView()" items-per-page="allCtrl.pagination.itemsPerPage" num-pages="allCtrl.pagination.numPages"></uib-pagination></div><div class="col-xs-1"><label class="pull-right"><select ng-model="allCtrl.pagination.itemsPerPage" ng-change="allCtrl.updateView()" class="form-control input-sm"><option ng-selected="allCtrl.pagination.itemsPerPage === 10" value="10">10</option><option ng-selected="allCtrl.pagination.itemsPerPage === 25" value="25">25</option><option ng-selected="allCtrl.pagination.itemsPerPage === 50" value="50">50</option><option ng-selected="allCtrl.pagination.itemsPerPage === 100" value="100">100</option></select></label></div></div></div></div>'),e.put("app/users/form/form.html",'<div class="row"><div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix">User Profile Form<div class="pull-right" ng-include="\'components/form/partials/elements/submit-small.html\'"></div></h1></div><form><div ng-include="\'app/visitors/form/partials/image.html\'"></div><div class="form-group" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'"></div></div></div></div><div class="row"><div class="col-sm-12" ng-include="\'components/form/partials/elements/submit.html\'"></div></div></form></div></div>'),e.put("app/users/profile/profile.html",'<div class="page-header"><h1>User Profile Page</h1></div><div class="row"><div class="col-xs-12"><div><div id="user-profile-1" class="user-profile row"><div class="col-xs-12 col-sm-3 center"><div><span class="profile-picture"><img style="max-height: 200px; max-width: 180px;" ng-if="!profileCtrl.profile.image" id="avatar" class="editable img-responsive" alt="" src="../assets/avatars/profile-pic.jpg"> <img ng-if="profileCtrl.profile.image" id="avatar" class="editable img-responsive" alt="" ng-src="{{ profileCtrl.profile.image }}"></span><div class="space-4"></div><div class="width-80 label label-info label-xlg arrowed-in arrowed-in-right"><div class="inline position-relative"><a ui-sref="users.edit({_id: profileCtrl.profile._id})" class="user-title-label dropdown-toggle" data-toggle="dropdown"><i class="ace-icon fa fa-circle light-green"></i> &nbsp; <span class="white" ng-bind="profileCtrl.profile.last_name+ \' \'+ profileCtrl.profile.first_name"></span></a></div></div></div><div class="space-6"></div><div class="hr hr12 dotted"></div></div><div class="col-xs-12 col-sm-9"><div class="profile-user-info profile-user-info-striped"><div class="profile-info-row"><div class="profile-info-name">Username</div><div class="profile-info-value"><span class="editable" id="username" ng-bind="profileCtrl.profile.username"></span></div></div><div class="profile-info-row"><div class="profile-info-name">Email</div><div class="profile-info-value" ng-bind="profileCtrl.profile.email"></div></div><div class="profile-info-row"><div class="profile-info-name">Gender</div><div class="profile-info-value" ng-bind="profileCtrl.profile.gender"></div></div><div class="profile-info-row"><div class="profile-info-name">Department</div><div class="profile-info-value" ng-bind="profileCtrl.profile.department.name"></div></div><div class="profile-info-row"><div class="profile-info-name">Joined</div><div class="profile-info-value"><span class="editable" id="signup" ng-bind="profileCtrl.profile.date_joined | date:\'yyyy/MM/dd\'">2010/06/20</span></div></div><div class="profile-info-row"><div class="profile-info-name">Last Online</div><div class="profile-info-value"><span class="editable" id="login" ng-bind="::profileCtrl.timeSince(profileCtrl.profile.last_login)"></span></div></div></div><div class="space-20"></div><div class="widget-box transparent"><div class="widget-header widget-header-small"><h4 class="widget-title blue smaller"><i class="ace-icon fa fa-rss orange"></i> Recent Activities</h4><div class="widget-toolbar action-buttons"></div></div><div class="widget-body"><div class="widget-main padding-8"><div class="row"><div class="col-sm-12"><div class="page-header"><i class="fa fa-calendar-o"></i> Appointments Awaiting Approval</div></div><div class="col-sm-12" ng-if="profileCtrl.awaitingApproval.length === 0"><div class="alert alert-info">No data Found</div></div><div class="col-sm-12" ng-if="profileCtrl.awaitingApproval.length > 0"><table class="table table-striped"><thead><tr><th>#</th><th>Guest</th><th>Start Date</th><th>End Date</th><th>Start Time</th><th>End Time</th><th>Action</th></tr></thead><tbody><tr ng-repeat="item in profileCtrl.awaitingApproval"><td ng-bind="::$index+1"></td><td ng-bind="::item.visitor.last_name+\' \'+item.visitor.first_name"></td><td ng-bind="::item.start_date"></td><td ng-bind="::item.end_date"></td><td ng-bind="::item.start_time"></td><td ng-bind="::item.end_time"></td><td><button class="btn btn-success btn-sm" type="button" ng-click="profileCtrl.updateApp(item, \'true\')"><i class="fa fa-check"></i></button> <button class="btn btn-danger btn-sm" type="button" ng-click="profileCtrl.updateApp(item, \'false\')"><i class="fa fa-times"></i></button></td></tr></tbody></table></div></div><div class="row"><div class="col-sm-12"><div class="page-header"><i class="fa fa-calendar-o"></i> Rejected Appointments</div></div><div class="col-sm-12" ng-if="profileCtrl.rejected.length === 0"><div class="alert alert-info">No data Found</div></div><div class="col-sm-12" ng-if="profileCtrl.rejected.length > 0"><table class="table table-striped"><thead><tr><th>#</th><th>Guest</th><th>Start Date</th><th>End Date</th><th>Start Time</th><th>End Time</th><th>Action</th></tr></thead><tbody><tr ng-repeat="item in profileCtrl.rejected"><td ng-bind="::$index+1"></td><td ng-bind="::item.visitor.last_name+\' \'+item.visitor.first_name"></td><td ng-bind="::item.start_date"></td><td ng-bind="::item.end_date"></td><td ng-bind="::item.start_time"></td><td ng-bind="::item.end_time"></td><td><button class="btn btn-success btn-sm" type="button" ng-click="profileCtrl.updateApp(item, \'true\')"><i class="fa fa-check"></i></button></td></tr></tbody></table></div></div><div class="row"><div class="col-sm-12"><div class="page-header"><i class="fa fa-calendar-o"></i> Appointments in Progress</div></div><div class="col-sm-12" ng-if="profileCtrl.inProgress.length === 0"><div class="alert alert-info">No data Found</div></div><div class="col-sm-12" ng-if="profileCtrl.inProgress.length > 0"><table class="table table-striped"><thead><tr><th>#</th><th>Guest</th><th>Start Date</th><th>End Date</th><th>Start Time</th><th>End Time</th></tr></thead><tbody><tr ng-repeat="item in profileCtrl.inProgress"><td ng-bind="::$index+1"></td><td ng-bind="::item.visitor.last_name+\' \'+item.visitor.first_name"></td><td ng-bind="::item.start_date"></td><td ng-bind="::item.end_date"></td><td ng-bind="::item.start_time"></td><td ng-bind="::item.end_time"></td></tr></tbody></table></div></div><div class="row"><div class="col-sm-12"><div class="page-header"><i class="fa fa-calendar-o"></i> Upcoming Appointments</div></div><div class="col-sm-12" ng-if="profileCtrl.upcoming.length === 0"><div class="alert alert-info">No data Found</div></div><div class="col-sm-12" ng-if="profileCtrl.upcoming.length > 0"><table class="table table-striped"><thead><tr><th>#</th><th>Guest</th><th>Start Date</th><th>End Date</th><th>Start Time</th><th>End Time</th></tr></thead><tbody><tr ng-repeat="item in profileCtrl.upcoming"><td ng-bind="::$index+1"></td><td ng-bind="::item.visitor.last_name+\' \'+item.visitor.first_name"></td><td ng-bind="::item.start_date"></td><td ng-bind="::item.end_date"></td><td ng-bind="::item.start_time"></td><td ng-bind="::item.end_time"></td></tr></tbody></table></div></div></div></div></div><div class="space-6"></div></div></div></div></div></div>'),e.put("app/visitors/all/all.html",'<div class="page-header"><div class="row"><div class="col-sm-7"><h1>Visitors</h1></div><div class="col-sm-5"><div class="input-group"><input class="form-control" ng-model="allCtrl.q" ng-change="allCtrl.searchPage()"> <span ng-click="allCtrl.searchPage()" class="input-group-addon">Search</span></div></div></div></div><div class="row"><div class="col-sm-12"><div class="custom-form-save clearfix"><a class="btn btn-primary pull-right" ui-sref="visitors.add"><i class="fa fa-plus-circle"></i> Create</a> <a class="btn btn-primary pull-right margin-10-r pointer" ng-csv="allCtrl.getList()" csv-header="allCtrl.header" lazy-load="true" filename="{{ allCtrl.filename }}"><i class="fa fa-file-excel-o"></i> Export</a></div></div></div><div class="row"><div class="col-xs-12"><div class="row"><div class="col-xs-12"><table id="simple-table" class="table table-striped table-bordered table-hover"><thead><tr><th>#</th><th><span class="pointer block" ng-click="allCtrl.updateView(\'first_name\')">First Name <span ng-show="allCtrl.orderByColumn[\'first_name\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'first_name\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'first_name\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'last_name\')">Last Name <span ng-show="allCtrl.orderByColumn[\'last_name\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'last_name\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'last_name\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'email\')">Email <span ng-show="allCtrl.orderByColumn[\'email\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'email\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'email\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'phone\')">Phone <span ng-show="allCtrl.orderByColumn[\'phone\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'phone\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'phone\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'type.name\')">Type <span ng-show="allCtrl.orderByColumn[\'type.name\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'type.name\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'type.name\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'company.name\')">Company <span ng-show="allCtrl.orderByColumn[\'company.name\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'company.name\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'company.name\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'created\')">Date Created <span ng-show="allCtrl.orderByColumn[\'created\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'created\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'created\'].reverse}"></span></span></th><th>Acions</th></tr><tr><th></th><th ng-repeat="filterField in allCtrl.filterFields"><input ng-if="filterField.filter && (!filterField.type || filterField.type === \'text\')" class="form-control" ng-model="allCtrl.search[filterField.field]" ng-change="allCtrl.startSearch(filterField.field)"> <span ng-if="filterField.filter && filterField.type === \'date\'" class="form-control" uib-datepicker-popup="" ng-model="allCtrl.search[filterField.field]" ng-change="allCtrl.startSearch(filterField.field)" is-open="allCtrl.date[filterField.field].opened" ng-click="allCtrl.date[filterField.field].open($event)" close-text="Close"><i class="fa fa-calendar"></i></span></th><th><button class="btn btn-primary btn-xs pointer" ng-click="allCtrl.clear()">Clear Search</button></th></tr></thead><tbody><tr ng-repeat="visitor in allCtrl.items"><td ng-bind="$index + 1 + ((allCtrl.pagination.currentPage-1) * allCtrl.pagination.itemsPerPage)"></td><td ng-bind="visitor.first_name"></td><td ng-bind="visitor.last_name"></td><td ng-bind="visitor.email"></td><td ng-bind="visitor.phone"></td><td ng-bind="visitor.type.name"></td><td ng-bind="visitor.company.name"></td><td ng-bind="visitor.created | date:\'yyyy-MM-dd\'"></td><td><div class="hidden-sm hidden-xs action-buttons"><a class="text-danger" title="Create Appointment" ui-sref="appointments.add({visitor: visitor._id})"><i class="ace-icon fa fa-calendar"></i></a> <a ui-sref="visitors.detail({_id: visitor._id})" class="blue"><i class="ace-icon fa fa-eye bigger-130"></i></a> <a ui-sref="visitors.edit({_id: visitor._id})" class="green"><i class="ace-icon fa fa-pencil bigger-130"></i></a> <span ng-click="allCtrl.remove(visitor._id)" class="red pointer"><i class="ace-icon fa fa-trash-o bigger-130"></i></span></div><div class="hidden-md hidden-lg"><div class="inline pos-rel"><button data-position="auto" data-toggle="dropdown" class="btn btn-minier btn-yellow dropdown-toggle" aria-expanded="false"><i class="ace-icon fa fa-caret-down icon-only bigger-120"></i></button><ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close" style=""><li><a title="" data-rel="tooltip" class="tooltip-info" ui-sref="visitors.detail({_id: visitor._id})" data-original-title="View"><span class="blue"><i class="ace-icon fa fa-search-plus bigger-120"></i></span></a></li><li><a title="" data-rel="tooltip" class="tooltip-success" ui-sref="visitors.edit({_id: visitor._id})" data-original-title="Edit"><span class="green"><i class="ace-icon fa fa-pencil-square-o bigger-120"></i></span></a></li><li><a title="" data-rel="tooltip" class="tooltip-error" ui-sref="visitors.remove({_id: visitor._id})" data-original-title="Delete"><span class="red"><i class="ace-icon fa fa-trash-o bigger-120"></i></span></a></li></ul></div></div></td></tr></tbody></table></div></div><div class="row"><div class="col-xs-11"><uib-pagination total-items="allCtrl.pagination.totalItems" ng-model="allCtrl.pagination.currentPage" max-size="allCtrl.pagination.maxSize" class="allCtrl.pagination-sm pull-right" boundary-links="true" rotate="false" ng-change="allCtrl.updateView()" items-per-page="allCtrl.pagination.itemsPerPage" num-pages="allCtrl.pagination.numPages"></uib-pagination></div><div class="col-xs-1"><label class="pull-right"><select ng-model="allCtrl.pagination.itemsPerPage" ng-change="allCtrl.updateView()" class="form-control input-sm"><option ng-selected="allCtrl.pagination.itemsPerPage === 10" value="10">10</option><option ng-selected="allCtrl.pagination.itemsPerPage === 25" value="25">25</option><option ng-selected="allCtrl.pagination.itemsPerPage === 50" value="50">50</option><option ng-selected="allCtrl.pagination.itemsPerPage === 100" value="100">100</option></select></label></div></div></div></div>'),e.put("app/visitors/profile/profile.html",'<div class="page-header"><h1>Visitor Profile Page</h1></div><div class="row"><div class="col-xs-12"><div><div id="user-profile-1" class="user-profile row"><div class="col-xs-12 col-sm-3 center"><div><span class="profile-picture"><img style="max-height: 200px; max-width: 180px;" ng-if="!profileCtrl.profile.image" id="avatar" class="editable img-responsive" alt="" src="../assets/avatars/profile-pic.jpg"> <img ng-if="profileCtrl.profile.image" id="avatar" class="editable img-responsive" alt="" ng-src="{{ profileCtrl.profile.image }}"></span><div class="space-4"></div><div class="width-80 label label-info label-xlg arrowed-in arrowed-in-right"><div class="inline position-relative"><a ui-sref="visitors.edit({_id: profileCtrl.profile._id})" class="user-title-label dropdown-toggle" data-toggle="dropdown"><i class="ace-icon fa fa-circle light-green"></i> &nbsp; <span class="white" ng-bind="profileCtrl.profile.last_name+ \' \'+ profileCtrl.profile.first_name"></span></a></div></div></div><div class="space-6"></div><div class="hr hr12 dotted"></div></div><div class="col-xs-12 col-sm-9"><div class="profile-user-info profile-user-info-striped"><div class="profile-info-row"><div class="profile-info-name">First Name</div><div class="profile-info-value"><span class="editable" id="firstname" ng-bind="profileCtrl.profile.first_name"></span></div></div><div class="profile-info-row"><div class="profile-info-name">Last Name</div><div class="profile-info-value"><span class="editable" id="lastname" ng-bind="profileCtrl.profile.last_name"></span></div></div><div class="profile-info-row"><div class="profile-info-name">Email</div><div class="profile-info-value" ng-bind="profileCtrl.profile.email"></div></div><div class="profile-info-row"><div class="profile-info-name">Gender</div><div class="profile-info-value" ng-bind="profileCtrl.profile.gender"></div></div><div class="profile-info-row"><div class="profile-info-name">Created</div><div class="profile-info-value"><span class="editable" id="signup" ng-bind="profileCtrl.profile.created | date:\'yyyy/MM/dd\'">2010/06/20</span></div></div><div class="profile-info-row"><div class="profile-info-name">Last Online</div><div class="profile-info-value"><span class="editable" id="login">3 hours ago</span></div></div></div><div class="space-20"></div><div class="widget-box transparent"><div class="widget-header widget-header-small"><h4 class="widget-title blue smaller"><i class="ace-icon fa fa-rss orange"></i> Recent Activities</h4><div class="widget-toolbar action-buttons"><a href="#" data-action="reload"><i class="ace-icon fa fa-refresh blue"></i></a> &nbsp; <a href="#" class="pink"><i class="ace-icon fa fa-trash-o"></i></a></div></div><div class="widget-body"><div class="widget-main padding-8"></div></div></div><div class="space-6"></div></div></div></div></div></div>'),e.put("app/visitors/form/form.html",'<div class="row"><div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix">Visitors Profile Form<div class="pull-right" ng-include="\'components/form/partials/elements/submit-small.html\'"></div></h1></div><form><div ng-include="\'app/visitors/form/partials/image.html\'"></div><div class="form-group" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'" ng-if="!elem.custom"></div><div class="custom-form" ng-if="elem.custom" ng-include="elem.template"></div></div></div></div><div class="row"><div class="col-sm-12" ng-include="\'components/form/partials/elements/submit.html\'"></div></div></form></div></div>'),e.put("app/settings/partials/database.html",'<div class="row"><div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix" ng-bind="formCtrl.formHeader"></h1></div><form><div class="form-grou" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'"></div></div></div></div></form></div></div>'),e.put("app/settings/partials/email.html",'<div class="row"><div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix" ng-bind="formCtrl.formHeader"></h1></div><form><div class="form-grou" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'"></div></div></div></div></form></div></div>'),e.put("app/settings/partials/ldap.html",'<div class="row"><div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix" ng-bind="formCtrl.formHeader"></h1></div><form><div class="form-grou" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'"></div></div></div></div></form></div></div>'),e.put("app/settings/partials/sms.html",'<div class="row"><div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix" ng-bind="formCtrl.formHeader"></h1></div><form><div class="form-grou" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'"></div></div></div></div></form></div></div>'),e.put("app/settings/partials/system.html",'<div class="row"><div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix" ng-bind="formCtrl.formHeader"></h1></div><form><div class="form-grou" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'"></div></div></div></div></form></div></div>'),e.put("app/visitors-group/all/all.html",'<div class="page-header"><h1>Visitor Categories</h1></div><div class="row"><div class="col-sm-12"><div class="custom-form-save clearfix"><a class="btn btn-primary pull-right" ui-sref="visitorsGroup.add"><i class="fa fa-plus-circle"></i> Create</a></div></div></div><div class="row"><div class="col-xs-12"><div class="row"><div class="col-xs-12"><table id="simple-table" class="table table-striped table-bordered table-hover"><thead><tr><th>#</th><th><span class="pointer block" ng-click="allCtrl.updateView(\'name\')">Category <span ng-show="allCtrl.orderByColumn[\'first_name\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'name\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'name\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'black_listed\')">Black Listed <span ng-show="allCtrl.orderByColumn[\'black_listed\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'black_listed\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'black_listed\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'created\')">Date Created <span ng-show="allCtrl.orderByColumn[\'created\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'created\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'created\'].reverse}"></span></span></th><th>Acions</th></tr></thead><tbody><tr ng-repeat="item in allCtrl.items"><td ng-bind="$index + 1 + ((allCtrl.pagination.currentPage-1) * allCtrl.pagination.itemsPerPage)"></td><td ng-bind="::item.name"></td><td ng-bind="::item.black_listed"></td><td ng-bind="::item.created | date:\'yyyy-MM-dd\'"></td><td><div class="hidden-sm hidden-xs action-buttons"><a ui-sref="visitorsGroup.edit({_id: item._id})" class="green"><i class="ace-icon fa fa-pencil bigger-130"></i></a> <a ui-sref="visitorsGroup.remove({_id: item._id})" class="red"><i class="ace-icon fa fa-trash-o bigger-130"></i></a></div><div class="hidden-md hidden-lg"><div class="inline pos-rel"><button data-position="auto" data-toggle="dropdown" class="btn btn-minier btn-yellow dropdown-toggle" aria-expanded="false"><i class="ace-icon fa fa-caret-down icon-only bigger-120"></i></button><ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close" style=""><li><a title="" data-rel="tooltip" class="tooltip-info" ui-sref="visitorsGroup.detail({_id: item._id})" data-original-title="View"><span class="blue"><i class="ace-icon fa fa-search-plus bigger-120"></i></span></a></li><li><a title="" data-rel="tooltip" class="tooltip-success" ui-sref="visitorsGroup.edit({_id: item._id})" data-original-title="Edit"><span class="green"><i class="ace-icon fa fa-pencil-square-o bigger-120"></i></span></a></li><li><a title="" data-rel="tooltip" class="tooltip-error" ui-sref="visitorsGroup.remove({_id: item._id})" data-original-title="Delete"><span class="red"><i class="ace-icon fa fa-trash-o bigger-120"></i></span></a></li></ul></div></div></td></tr></tbody></table></div></div><div class="row"><div class="col-xs-11"><uib-pagination total-items="allCtrl.pagination.totalItems" ng-model="allCtrl.pagination.currentPage" max-size="allCtrl.pagination.maxSize" class="allCtrl.pagination-sm pull-right" boundary-links="true" rotate="false" ng-change="allCtrl.updateView()" items-per-page="allCtrl.pagination.itemsPerPage" num-pages="allCtrl.pagination.numPages"></uib-pagination></div><div class="col-xs-1"><label class="pull-right"><select ng-model="allCtrl.pagination.itemsPerPage" ng-change="allCtrl.updateView()" class="form-control input-sm"><option ng-selected="allCtrl.pagination.itemsPerPage === 10" value="10">10</option><option ng-selected="allCtrl.pagination.itemsPerPage === 25" value="25">25</option><option ng-selected="allCtrl.pagination.itemsPerPage === 50" value="50">50</option><option ng-selected="allCtrl.pagination.itemsPerPage === 100" value="100">100</option></select></label></div></div></div></div>'),e.put("app/visitors-group/form/form.html",'<div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix">Visitors Group Form<div class="pull-right" ng-include="\'components/form/partials/elements/submit-small.html\'"></div></h1></div><form><div class="form-grou" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'"></div></div></div></div><div class="row"><div class="col-sm-12" ng-include="\'components/form/partials/elements/submit.html\'"></div></div></form></div>'),e.put("app/visitors-group/profile/profile.html",'<div class="page-header"><h1>User Profile Page</h1></div><div class="row"><div class="col-xs-12"><div><div id="user-profile-1" class="user-profile row"><div class="col-xs-12 col-sm-3 center"><div><span class="profile-picture"><img style="max-height: 200px; max-width: 180px;" ng-if="!profileCtrl.profile.image" id="avatar" class="editable img-responsive" alt="" src="../assets/avatars/profile-pic.jpg"> <img ng-if="profileCtrl.profile.image" id="avatar" class="editable img-responsive" alt="" ng-src="profileCtrl.profile.image"></span><div class="space-4"></div><div class="width-80 label label-info label-xlg arrowed-in arrowed-in-right"><div class="inline position-relative"><a ui-sref="users.edit({_id: profileCtrl.profile._id})" class="user-title-label dropdown-toggle" data-toggle="dropdown"><i class="ace-icon fa fa-circle light-green"></i> &nbsp; <span class="white" ng-bind="profileCtrl.profile.last_name+ \' \'+ profileCtrl.profile.first_name"></span></a></div></div></div><div class="space-6"></div><div class="hr hr12 dotted"></div></div><div class="col-xs-12 col-sm-9"><div class="profile-user-info profile-user-info-striped"><div class="profile-info-row"><div class="profile-info-name">Username</div><div class="profile-info-value"><span class="editable" id="username" ng-bind="profileCtrl.profile.username"></span></div></div><div class="profile-info-row"><div class="profile-info-name">Email</div><div class="profile-info-value" ng-bind="profileCtrl.profile.email"></div></div><div class="profile-info-row"><div class="profile-info-name">Gender</div><div class="profile-info-value" ng-bind="profileCtrl.profile.gender"></div></div><div class="profile-info-row"><div class="profile-info-name">Joined</div><div class="profile-info-value"><span class="editable" id="signup" ng-bind="profileCtrl.profile.date_joined | date:\'yyyy/MM/dd\'">2010/06/20</span></div></div><div class="profile-info-row"><div class="profile-info-name">Last Online</div><div class="profile-info-value"><span class="editable" id="login">3 hours ago</span></div></div></div><div class="space-20"></div><div class="widget-box transparent"><div class="widget-header widget-header-small"><h4 class="widget-title blue smaller"><i class="ace-icon fa fa-rss orange"></i> Recent Activities</h4><div class="widget-toolbar action-buttons"><a href="#" data-action="reload"><i class="ace-icon fa fa-refresh blue"></i></a> &nbsp; <a href="#" class="pink"><i class="ace-icon fa fa-trash-o"></i></a></div></div><div class="widget-body"><div class="widget-main padding-8"></div></div></div><div class="space-6"></div></div></div></div></div></div>'),e.put("components/form/partials/form-field.html",'<label ng-bind="elem.label"></label> <strong class="text-danger" ng-if="elem.required">*</strong><div class="form-input" ng-include="\'components/form/partials/elements/\'+(elem.formType || \'text\')+\'.html\'"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[elem.fieldName].length"><span ng-repeat="error in formCtrl.errorMsg[elem.fieldName]"><i class="fa fa-exclamation-triangle"></i> {{ error }}</span></div>'),e.put("app/appointments/form/partials/groups.html",'<button class="btn btn-primary btn-lg" ng-click="formCtrl.addMember()"><i class="ace-icon fa fa-plus-circle bigger-160"></i> Add</button>'),e.put("app/appointments/form/partials/phone.html",'<label ng-bind="elem.label"></label> <strong class="text-danger" ng-if="elem.required">*</strong><div class="form-input"><div class="row"><div class="col-sm-3"><div ng-include="\'app/appointments/form/partials/phone/prefix.html\'"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'phone.prefix\'].length"><span ng-repeat="error in formCtrl.errorMsg[\'phone.prefix\']"><i class="fa fa-exclamation-triangle"></i> {{ error }}</span></div></div><div class="col-sm-9"><div ng-include="\'app/appointments/form/partials/phone/suffix.html\'"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'phone.suffix\'].length"><span ng-repeat="error in formCtrl.errorMsg[\'phone.suffix\']"><i class="fa fa-exclamation-triangle"></i> {{ error }}</span></div></div></div></div><input type="hidden" ng-model="formCtrl.viewModel.phone" ng-bind="formCtrl.phone.prefix + formCtrl.phone.suffix"><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'phone\'].length"><span ng-repeat="error in formCtrl.errorMsg[\'phone\']"><i class="fa fa-exclamation-triangle"></i> {{ error }}</span></div>'),e.put("app/appointments/form/partials/visitor.html",'<div style="padding: 10px;"><form><div class="form-group" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'" ng-if="!elem.custom"></div><div class="custom-form" ng-if="elem.custom" ng-include="elem.template"></div></div></div></div><div class="row"><div class="col-xs-6"><button ng-click="formCtrl.cancel()" type="button" class="btn btn-danger btn-block"><i class="fa fa-times-circle"></i> Cancel</button></div><div class="col-xs-6"><button ng-click="formCtrl.save()" type="button" class="btn btn-primary btn-block"><i class="fa fa-plus-circle"></i> Add</button></div></div></form></div>'),e.put("app/appointments/logs/partials/pass-template.html",'<div class="clearfix"><button class="btn btn-primary" ng-print="" print-element-id="printThisElement"><i class="fa fa-print"></i> Print</button></div><div id="printThisElement" style="width: 300px; height: 470px; border: 2px solid #000; padding-left: 10px; padding-right: 10px; margin:10px auto 20px;"><div style="padding-top: 10px;"><div style="font-size: 16px; font-weight: bold; float: left;">Visitor Pass</div><div style="float: right;"></div><div style="clear: both;"></div></div><div><div><div style="width: 100%; margin-top: 5%; margin-bottom: 5%; max-height: 210px"><h3 style="text-align: center; font-weight: bold">{{ appointment.purpose | uppercase }}</h3><img ng-if="((appointment).visitor).image" ng-src="{{ appointment.visitor.image }}" alt="" width="100%" style="margin:auto; width: 244px; height: 150px; display: block" class="img-responsive"> <img ng-if="!((appointment).visitor).image" ng-src="../../assets/avatars/place_holder.jpg" alt="" style="margin:auto; width: 244px; height: 150px; display: block" class="img-responsive"></div></div><div style="font-size: 16px;"><div style="top-bottom: 10px">Name: {{ appointment.visitor.first_name }} {{ appointment.visitor.last_name }}</div><div>Host: {{ appointment.host.first_name }} {{ appointment.host.last_name }}</div><div>Department: {{ (((appointment).host).department).name }}</div><div ng-if="((((appointment).host).department).floor) !== null">Floor: <strong>{{ ((((appointment).host).department).floor) }}</strong></div><div style="text-align: center">{{ appointment.start_date | date: \'dd/MM/yyyy\' }} {{ appointment.start_time | date: \'HH:mm\' }} - {{ appointment.end_time | date: \'HH:mm\' }}</div></div><div style="clear: both"></div></div><img id="barcode" style="max-height:80px; margin-top: 10px; width:100%"></div>'),e.put("app/departments/form/partials/edit.html",""),e.put("app/departments/form/partials/wizard.html",'<form name="userProfile"><div class="row"><div class="col-sm-6"><div class="custom-form"><label>Username</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.username" placeholder="Enter Username here"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'username\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'username\']" ng-bind="error"></span></div></div></div><div class="col-sm-6"><div class="custom-form"><label>Email</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.email" placeholder="Enter Email here"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'email\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'email\']" ng-bind="error"></span></div></div></div></div><div class="row"><div class="col-sm-6"><div class="custom-form"><label>Password</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.password" type="password" placeholder="Enter password"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'password\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'password\']" ng-bind="error"></span></div></div></div><div class="col-sm-6"><div class="custom-form"><label>Confirm Password</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.password2" type="password" placeholder="Enter password again"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'password2\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'password2\']" ng-bind="error"></span></div></div></div></div><div class="row"><div class="col-sm-6"><div class="custom-form"><label>First Name</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.first_name" placeholder="Enter First Name here"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'first_name\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'first_name\']" ng-bind="error"></span></div></div></div><div class="col-sm-6"><div class="custom-form"><label>Last Name</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.last_name" placeholder="Enter Last Name here"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'last_name\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'last_name\']" ng-bind="error"></span></div></div></div></div><div class="row"><div class="col-sm-6"><div class="custom-form"><label>Phone</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.phone" placeholder="Enter Phone here"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'phone\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'phone\']" ng-bind="error"></span></div></div></div><div class="col-sm-6"><div class="custom-form"><label>Work Phone</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.work_phone" placeholder="Enter Work phone here"></div></div></div></div><div class="row"><div class="col-sm-6"><div class="custom-form"><label>Home Phone</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.home_phone" placeholder="Enter Work Phone here"></div></div></div><div class="col-sm-6"><div class="custom-form"><label>Department</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.department.name" placeholder="Enter Department here"></div></div></div></div><div class="row"><div class="col-sm-12"><hr><div class="custom-form-save clearfix"><button ng-click="formCtrl.save()" class="btn btn-success btn-lg pull-right"><i class="fa fa-save"></i> Save</button></div></div></div></form>'),e.put("app/users/form/partials/edit.html",""),e.put("app/users/form/partials/image.html",'<div class="row"><div class="col-sm-3 col-sm-offset-9"><span class="margin-10-b">Click image to edit</span> <span class="profile-picture pointer" ng-click="formCtrl.openImageDialog()"><img ng-if="!formCtrl.viewModel.image" class="editable img-responsive" alt="" src="../assets/avatars/place_holder.jpg"> <img ng-if="formCtrl.viewModel.image" id="avatar" class="editable img-responsive" alt="" ng-src="{{ formCtrl.viewModel.image }}"></span></div></div>'),e.put("app/users/form/partials/wizard.html",'<form name="userProfile"><div class="row"><div class="col-sm-6"><div class="custom-form"><label>Username</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.username" placeholder="Enter Username here"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'username\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'username\']" ng-bind="error"></span></div></div></div><div class="col-sm-6"><div class="custom-form"><label>Email</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.email" placeholder="Enter Email here"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'email\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'email\']" ng-bind="error"></span></div></div></div></div><div class="row"><div class="col-sm-6"><div class="custom-form"><label>Password</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.password" type="password" placeholder="Enter password"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'password\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'password\']" ng-bind="error"></span></div></div></div><div class="col-sm-6"><div class="custom-form"><label>Confirm Password</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.password2" type="password" placeholder="Enter password again"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'password2\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'password2\']" ng-bind="error"></span></div></div></div></div><div class="row"><div class="col-sm-6"><div class="custom-form"><label>First Name</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.first_name" placeholder="Enter First Name here"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'first_name\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'first_name\']" ng-bind="error"></span></div></div></div><div class="col-sm-6"><div class="custom-form"><label>Last Name</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.last_name" placeholder="Enter Last Name here"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'last_name\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'last_name\']" ng-bind="error"></span></div></div></div></div><div class="row"><div class="col-sm-6"><div class="custom-form"><label>Phone</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.phone" placeholder="Enter Phone here"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'phone\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'phone\']" ng-bind="error"></span></div></div></div><div class="col-sm-6"><div class="custom-form"><label>Work Phone</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.work_phone" placeholder="Enter Work phone here"></div></div></div></div><div class="row"><div class="col-sm-6"><div class="custom-form"><label>Home Phone</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.home_phone" placeholder="Enter Work Phone here"></div></div></div><div class="col-sm-6"><div class="custom-form"><label>Department</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.department.name" placeholder="Enter Department here"></div></div></div></div><div class="row"><div class="col-sm-12"><hr><div class="custom-form-save clearfix"><button ng-click="formCtrl.save()" class="btn btn-success btn-lg pull-right"><i class="fa fa-save"></i> Save</button></div></div></div></form>'),e.put("app/visitors/form/partials/company.html",'<label ng-bind="elem.label"></label> <strong class="text-danger" ng-if="elem.required">*</strong><div class="form-input" ng-include="\'app/visitors/form/partials/company/company.html\'"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[elem.fieldName].length"><span ng-repeat="error in formCtrl.errorMsg[elem.fieldName]"><i class="fa fa-exclamation-triangle"></i> {{ error }}</span></div>'),e.put("app/visitors/form/partials/image.html",'<div class="row"><div class="col-sm-3 col-sm-offset-9"><span class="margin-10-b">Click image to edit</span> <span class="profile-picture pointer" ng-click="formCtrl.openImageDialog()"><img ng-if="!formCtrl.viewModel.image" class="editable img-responsive" alt="" src="../assets/avatars/place_holder.jpg"> <img ng-if="formCtrl.viewModel.image" id="avatar" class="editable img-responsive" alt="" ng-src="{{ formCtrl.viewModel.image }}"></span></div></div>'),e.put("app/visitors/form/partials/phone.html",'<label ng-bind="elem.label"></label> <strong class="text-danger" ng-if="elem.required">*</strong><div class="form-input"><div class="row"><div class="col-sm-3"><div ng-include="\'app/visitors/form/partials/phone/prefix.html\'"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'phone.prefix\'].length"><span ng-repeat="error in formCtrl.errorMsg[\'phone.prefix\']"><i class="fa fa-exclamation-triangle"></i> {{ error }}</span></div></div><div class="col-sm-9"><div ng-include="\'app/visitors/form/partials/phone/suffix.html\'"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'phone.suffix\'].length"><span ng-repeat="error in formCtrl.errorMsg[\'phone.suffix\']"><i class="fa fa-exclamation-triangle"></i> {{ error }}</span></div></div></div></div><input type="hidden" ng-model="formCtrl.viewModel.phone" ng-bind="formCtrl.phone.prefix + formCtrl.phone.suffix"><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'phone\'].length"><span ng-repeat="error in formCtrl.errorMsg[\'phone\']"><i class="fa fa-exclamation-triangle"></i> {{ error }}</span></div>'),e.put("components/form/partials/elements/checkbox.html",'<div><label class="switch"><input ng-model="formCtrl.viewModel[elem.fieldName]" ng-change="formCtrl.validateField(elem.fieldName)" type="checkbox"> <i></i></label></div>'),e.put("components/form/partials/elements/date.html",'<div class="input-group"><input type="text" class="form-control" uib-datepicker-popup="" ng-model="formCtrl.viewModel[elem.fieldName]" ng-change="formCtrl.validateField(elem.fieldName)" is-open="formCtrl.date[elem.fieldName].opened" min-date="minDate" max-date="maxDate" ng-click="formCtrl.date[elem.fieldName].open($event)" close-text="Close"> <span class="input-group-addon" ng-click="formCtrl.date[elem.fieldName].open($event)"><i class="fa fa-calendar"></i></span></div>'),e.put("components/form/partials/elements/multi-select.html",'<input class="form-control" ng-model="formCtrl.viewModel[elem.fieldName]" ng-blur="formCtrl.validateField(elem.fieldName)" placeholder="{{ formCtrl.placeholder(elem.label, elem.placeholder) }}">'),e.put("components/form/partials/elements/number.html",'<input type="number" class="form-control" ng-model="formCtrl.viewModel[elem.fieldName]" ng-blur="formCtrl.validateField(elem.fieldName)" ng-disabled="formCtrl.typeahead[elem.fieldName].disabled" placeholder="{{ formCtrl.placeholder(elem.label, elem.placeholder) }}">'),e.put("components/form/partials/elements/password.html",'<input type="password" class="form-control" ng-model="formCtrl.viewModel[elem.fieldName]" ng-blur="formCtrl.validateField(elem.fieldName)" ng-disabled="formCtrl.typeahead[elem.fieldName].disabled" placeholder="{{ formCtrl.placeholder(elem.label, elem.placeholder) }}">'),e.put("components/form/partials/elements/select.html",'<select class="form-control" ng-model="formCtrl.viewModel[elem.fieldName]" ng-change="formCtrl.validateField(elem.fieldName)"><option value=""></option><option ng-repeat="option in elem.choices" ng-bind="option.text" value="{{ option.value }}"></option></select>'),e.put("components/form/partials/elements/submit-small.html",'<div class="custom-form-save clearfix"><button ng-click="formCtrl.save()" class="btn btn-success btn-xs pull-right"><i class="fa fa-save"></i> Save</button> <button type="button" ng-click="formCtrl.cancel()" class="btn btn-danger btn-xs pull-right margin-10-r"><i class="fa fa-times"></i> Cancel</button></div>'),e.put("components/form/partials/elements/submit.html",'<hr><div class="custom-form-save clearfix"><button ng-click="formCtrl.save()" class="btn btn-success btn-lg pull-right"><i class="fa fa-save"></i> Save</button> <button type="button" ng-click="formCtrl.cancel()" class="btn btn-danger btn-lg pull-right margin-10-r"><i class="fa fa-times"></i> Cancel</button></div>'),e.put("components/form/partials/elements/text.html",'<input class="form-control" ng-model="formCtrl.viewModel[elem.fieldName]" ng-blur="formCtrl.validateField(elem.fieldName)" ng-disabled="formCtrl.typeahead[elem.fieldName].disabled" placeholder="{{ formCtrl.placeholder(elem.label, elem.placeholder) }}">'),e.put("components/form/partials/elements/textarea.html",'<textarea class="form-control" ng-model="formCtrl.viewModel[elem.fieldName]" ng-blur="formCtrl.validateField(elem.fieldName)" placeholder="{{ formCtrl.placeholder(elem.label, elem.placeholder) }}">\n</textarea>'),e.put("components/form/partials/elements/time.html",'<uib-timepicker ng-model="formCtrl.viewModel[elem.fieldName]" ng-change="formCtrl.validateField(elem.fieldName)" hour-step="formCtrl.time[elem.fieldName].hstep" minute-step="formCtrl.time[elem.fieldName].mstep" show-meridian="formCtrl.time[elem.fieldName].ismeridian"></uib-timepicker>'),e.put("components/form/partials/elements/typeahead-remote.html",'<input type="text" class="form-control" ng-model="formCtrl.viewModel[elem.fieldName]" placeholder="{{ formCtrl.placeholder(elem.label, elem.placeholder) }}" ng-blur="formCtrl.validateField(elem.fieldName)" uib-typeahead="data.name for data in formCtrl.typeahead[elem.fieldName].get($viewValue)" typeahead-loading="loadingRemoteData" typeahead-on-select="formCtrl.typeahead[elem.fieldName].onSelect($item, $model, $label)" typeahead-editable="formCtrl.typeahead[elem.fieldName].editable"> <i ng-show="loadingRemoteData" class="fa fa-refresh"></i>'),e.put("components/form/partials/elements/typeahead.html",'<input type="text" class="form-control" ng-model="formCtrl.viewModel[elem.fieldName]" placeholder="{{ formCtrl.placeholder(elem.label, elem.placeholder) }}" uib-typeahead="data for data in formCtrl.typeahead[elem.fieldName].list | filter:$viewValue" typeahead-loading="loadingRemoteData" typeahead-on-select="formCtrl.typeahead[elem.fieldName].onSelect($item, $model, $label)"> <i ng-show="loadingRemoteData" class="fa fa-refresh"></i>'),e.put("app/appointments/form/partials/phone/prefix.html",'<input type="text" ng-model="formCtrl.viewModel[\'phone.prefix\']" style="border: 1px #EEEEEE solid" placeholder="0803" typeahead-editable="false" ng-blur="formCtrl.validateField(\'phone.prefix\')" uib-typeahead="prefix for prefix in formCtrl.phone.prefixes | filter:$viewValue | limitTo:8" class="form-control">'),e.put("app/appointments/form/partials/phone/suffix.html",'<input type="text" class="form-control" style="border: 1px #EEEEEE solid" placeholder="7886565" ng-blur="formCtrl.validateField(\'phone.suffix\')" ng-model="formCtrl.viewModel[\'phone.suffix\']" typeahead-editable="true" typeahead-loading="loadingRemoteData" typeahead-on-select="formCtrl.typeahead[\'phone.suffix\'].onSelect($item, $model, $label)" uib-typeahead="data.name for data in formCtrl.typeahead[\'phone.suffix\'].get($viewValue)"> <i ng-show="loadingRemoteData" class="fa fa-refresh"></i>'),e.put("app/departments/form/partials/forms/contact.html",""),e.put("app/departments/form/partials/forms/password.html",""),e.put("app/departments/form/partials/forms/user-detail.html",""),e.put("app/users/form/partials/camera/camera.html",'<div style="padding: 20px;"><div class="row"><div class="col-sm-12"><div class="row"><div class="col-sm-6 center"><div style="padding: 10px"><label for="image">Image</label><div><span ng-if="formCtrl.upload.status">Activate Camera</span> <span ng-if="!formCtrl.upload.status">Activate Image Upload</span> <label class="switch"><input ng-model="formCtrl.upload.status" type="checkbox"> <i></i></label></div></div></div><div class="col-sm-6 center"><button class="btn btn-danger btn-lg btn-block" type="button" ng-click="closeWindow()">Cancel <i class="fa fa-times-circle-o"></i></button><div class="clearfix"></div></div></div><div class="row"><div class="col-sm-6"><div class="margin-10-r clearfix"><div class="pull-right"><div ng-if="formCtrl.upload.status"><div style="margin-bottom: 10px;"><input id="image" type="file" ng-model-instant="" onchange="angular.element(this).scope().setFiles(this, \'image\')"></div><div><button ng-if="formCtrl.upload.status" ng-click="closeCameraNow()" class="btn btn-info btn-block">Save and Close <i class="fa fa-save"></i></button></div></div><div ng-if="!formCtrl.upload.status"><div vi-camera=""><div camera-control-snapshot=""></div></div></div></div></div></div><div class="col-sm-6"><div class="margin-10-l clearfix"><div class="pull-left"><div ng-if="formCtrl.upload.status"><img ng-if="formCtrl.viewModel.image" ng-src="{{ formCtrl.viewModel.image }}"></div><div ng-if="!formCtrl.upload.status"><div ng-if="!takeImage"><img class="editable img-responsive" alt="" src="../assets/avatars/place_holder.jpg"></div><canvas></canvas></div></div></div></div></div></div></div></div>'),e.put("app/users/form/partials/forms/contact.html",""),e.put("app/users/form/partials/forms/password.html",""),e.put("app/users/form/partials/forms/user-detail.html",""),e.put("app/visitors/form/partials/camera/camera.html",'<div style="padding: 20px;"><div class="row"><div class="col-sm-12"><div class="row"><div class="col-sm-6 center"><div style="padding: 10px"><label for="image">Image</label><div><span ng-if="formCtrl.upload.status">Activate Camera</span> <span ng-if="!formCtrl.upload.status">Activate Image Upload</span> <label class="switch"><input ng-model="formCtrl.upload.status" type="checkbox"> <i></i></label></div></div></div><div class="col-sm-6 center"><button class="btn btn-danger btn-lg btn-block" type="button" ng-click="closeWindow()">Cancel <i class="fa fa-times-circle-o"></i></button><div class="clearfix"></div></div></div><div class="row"><div class="col-sm-6"><div class="margin-10-r clearfix"><div class="pull-right"><div ng-if="formCtrl.upload.status"><div style="margin-bottom: 10px;"><input id="image" type="file" ng-model-instant="" onchange="angular.element(this).scope().setFiles(this, \'image\')"></div><div><button ng-if="formCtrl.upload.status" ng-click="closeCameraNow()" class="btn btn-info btn-block">Save and Close <i class="fa fa-save"></i></button></div></div><div ng-if="!formCtrl.upload.status"><div vi-camera=""><div camera-control-snapshot=""></div></div></div></div></div></div><div class="col-sm-6"><div class="margin-10-l clearfix"><div class="pull-left"><div ng-if="formCtrl.upload.status"><img ng-if="formCtrl.viewModel.image" ng-src="{{ formCtrl.viewModel.image }}"></div><div ng-if="!formCtrl.upload.status"><div ng-if="!takeImage"><img class="editable img-responsive" alt="" src="../assets/avatars/place_holder.jpg"></div><canvas></canvas></div></div></div></div></div></div></div></div>'),e.put("app/visitors/form/partials/company/company.html",'<input type="text" ng-model="formCtrl.viewModel[\'company.name\']" placeholder="Enter Company name" uib-typeahead="company for company in formCtrl.getCompanies($viewValue)" typeahead-loading="loadingCompanies" typeahead-on-select="formCtrl.updateCompany($item, $model, $label)" class="form-control"> <i ng-show="loadingCompanies" class="fa fa-refresh"></i>'),e.put("app/visitors/form/partials/phone/prefix.html",'<input type="text" ng-model="formCtrl.viewModel[\'phone.prefix\']" style="border: 1px #EEEEEE solid" placeholder="0803" typeahead-editable="false" ng-blur="formCtrl.validateField(\'phone.prefix\')" uib-typeahead="prefix for prefix in formCtrl.phone.prefixes | filter:$viewValue | limitTo:8" class="form-control">'),e.put("app/visitors/form/partials/phone/suffix.html",'<input type="text" class="form-control" style="border: 1px #EEEEEE solid" placeholder="7886565" ng-blur="formCtrl.validateField(\'phone.suffix\')" ng-model="formCtrl.viewModel[\'phone.suffix\']">')
}]);