"use strict";function data(e,t,a){return{label:e,menu:!1,order:10,parent:a,icon:t}}angular.module("local",[]),angular.module("local").service("localDB",function(){var e=this;e.get=function(){}}),angular.module("db",["utility"]),angular.module("db").service("couchDBService",function(){}),angular.module("db").service("apiService",["$http","configService","log","$q","utility","$cookies",function(e,t,a,i,r,s){function n(e){var t="";if(e&&!r.isEmptyObject(e)){var a=[];for(var i in e)e.hasOwnProperty(i)&&a.push([i,e[i]].join("="));a.length>0&&(t=["?",a.join("&")].join(""))}return t}function l(e){var t={Authorization:["Token",s.getObject("vi-token")].join(" ")};return angular.isDefined(e)&&"login"===e&&delete t.Authorization,{timeout:9e3,headers:t}}var o=t.api.url,d=this;this.put=function(t,r){var s=i.defer(),n=[o,t,r._id].join("/");return e.put(n,r,l()).then(function(e){var t=e;e.hasOwnProperty("data")&&(t=e.data),s.resolve(t)},function(e){(-1===e.status||0===e.status)&&a.error("serverNotAvailable");var t=e;e.hasOwnProperty("data")&&(t=e.data),s.reject(t)}),s.promise},d.post=function(t,r){var s=i.defer();return e.post([o,t].join("/"),r,l(t)).then(function(e){var t=e;e.hasOwnProperty("data")&&(t=e.data),s.resolve(t)},function(e){(-1===e.status||0===e.status)&&a.error("serverNotAvailable");var t=e;e.hasOwnProperty("data")&&(t=e.data),s.reject(t)}),s.promise},d.all=function(t,r){r=r||{};var s=i.defer();return e.get([[o,t].join("/"),n(r)].join(""),l()).then(function(e){var t=e;e.hasOwnProperty("data")&&(t=e.data),s.resolve(t)},function(e){(-1===e.status||0===e.status)&&a.error("serverNotAvailable");var t=e;e.hasOwnProperty("data")&&(t=e.data),s.reject(t)}),s.promise},d.get=function(t,r,s){s=s||{};var d=i.defer();return e.get([[o,t,r].join("/"),n(s)].join(""),l()).then(function(e){var t=e;e.hasOwnProperty("data")&&(t=e.data),d.resolve(t)},function(e){(-1===e.status||0===e.status)&&a.error("serverNotAvailable");var t=e;e.hasOwnProperty("data")&&(t=e.data),d.reject(t)}),d.promise},d.remove=function(t,r,s){var d=i.defer();return e.delete([[o,t,r].join("/"),n(s)].join(""),l()).then(function(e){var t=e;e.hasOwnProperty("data")&&(t=e.data),d.resolve(t)},function(e){(-1===e.status||0===e.status)&&a.error("serverNotAvailable");var t=e;e.hasOwnProperty("data")&&(t=e.data),d.reject(t)}),d.promise}}]),function(e){e.fn.aceWizard=e.fn.ace_wizard=function(t){return this.each(function(){var a=e(this);a.wizard(),ace.vars.old_ie&&a.find("ul.steps > li").last().addClass("last-child");var i=t&&t.buttons?e(t.buttons):a.siblings(".wizard-actions").eq(0),r=a.data("fu.wizard");r.$prevBtn.remove(),r.$nextBtn.remove(),r.$prevBtn=i.find(".btn-prev").eq(0).on(ace.click_event,function(){r.previous()}).attr("disabled","disabled"),r.$nextBtn=i.find(".btn-next").eq(0).on(ace.click_event,function(){r.next()}).removeAttr("disabled"),r.nextText=r.$nextBtn.text();var s=t&&(t.selectedItem&&t.selectedItem.step||t.step);s&&(r.currentStep=s,r.setState())}),this}}(window.jQuery),function(e,t){var a=function(a,i){function r(e){e.preventDefault(),e.stopPropagation();var t=k.offset(),a=t[v],i=y?e.pageY:e.pageX;i>a+D?(D=i-a-N+B,D>$&&(D=$)):(D=i-a-B,0>D&&(D=0)),p.update_scroll()}function s(t){t.preventDefault(),t.stopPropagation(),at=tt=y?t.pageY:t.pageX,V=!0,e("html").off("mousemove.ace_scroll").on("mousemove.ace_scroll",n),e(R).off("mouseup.ace_scroll").on("mouseup.ace_scroll",l),k.addClass("active"),G&&p.$element.trigger("drag.start")}function n(e){e.preventDefault(),e.stopPropagation(),at=y?e.pageY:e.pageX,at-tt+D>$?at=tt+$-D:0>at-tt+D&&(at=tt-D),D+=at-tt,tt=at,0>D?D=0:D>$&&(D=$),p.update_scroll()}function l(t){t.preventDefault(),t.stopPropagation(),V=!1,e("html").off(".ace_scroll"),e(R).off(".ace_scroll"),k.removeClass("active"),G&&p.$element.trigger("drag.end"),x&&Z&&!Q&&d()}function o(e){var t=+new Date;if(K&&t-rt>1e3){var a=M[C];X!=a&&(X=a,et=!0,p.reset(!0)),rt=t}x&&Z&&(null!=it&&(clearTimeout(it),it=null),k.addClass("not-idle"),Q||1!=e||d())}function d(){null!=it&&(clearTimeout(it),it=null),it=setTimeout(function(){it=null,k.removeClass("not-idle")},J)}function c(){k.css("visibility","hidden").addClass("scroll-hover"),z=y?parseInt(k.outerWidth())||0:parseInt(k.outerHeight())||0,k.css("visibility","").removeClass("scroll-hover")}function m(){if(Y!==!1){var e=P.offset(),t=e.left,a=e.top;y?F||(t+=P.outerWidth()-z):F||(a+=P.outerHeight()-z),Y===!0?k.css({top:parseInt(a),left:parseInt(t)}):"left"===Y?k.css("left",parseInt(t)):"top"===Y&&k.css("top",parseInt(a))}}var p=this,u=ace.helper.getAttrSettings(a,e.fn.ace_scroll.defaults),f=e.extend({},e.fn.ace_scroll.defaults,i,u);this.size=0,this.lock=!1,this.lock_anyway=!1,this.$element=e(a),this.element=a;var v,g,h,b,w,C,y=!0,_=!1,x=!1,S=!1,P=null,M=null,k=null,A=null,E=null,I=null,T=null,N=0,D=0,$=0,B=0,O=!0,U=!1,j="",F=!1,z=0,q=1,L=!1,V=!1,R="onmouseup"in window?window:"html",G=f.dragEvent||!1,H=i.scrollEvent||!1,W=f.detached||!1,Y=f.updatePos||!1,Z=f.hideOnIdle||!1,J=f.hideDelay||1500,Q=!1,K=f.observeContent||!1,X=0,et=!0;this.create=function(t){if(!S){t&&(f=e.extend({},e.fn.ace_scroll.defaults,t)),this.size=parseInt(this.$element.attr("data-size"))||f.size||200,y=!f.horizontal,v=y?"top":"left",g=y?"height":"width",h=y?"maxHeight":"maxWidth",b=y?"clientHeight":"clientWidth",w=y?"scrollTop":"scrollLeft",C=y?"scrollHeight":"scrollWidth",this.$element.addClass("ace-scroll"),"static"==this.$element.css("position")?(L=this.element.style.position,this.element.style.position="relative"):L=!1;var a=null;W?a=e('<div class="scroll-track scroll-detached"><div class="scroll-bar"></div></div>').appendTo("body"):(this.$element.wrapInner('<div class="scroll-content" />'),this.$element.prepend('<div class="scroll-track"><div class="scroll-bar"></div></div>')),P=this.$element,W||(P=this.$element.find(".scroll-content").eq(0)),y||P.wrapInner("<div />"),M=P.get(0),W?(k=a,m()):k=this.$element.find(".scroll-track").eq(0),A=k.find(".scroll-bar").eq(0),E=k.get(0),I=A.get(0),T=I.style,y||k.addClass("scroll-hz"),f.styleClass&&(j=f.styleClass,k.addClass(j),F=!!j.match(/scroll\-left|scroll\-top/)),0==z&&(k.show(),c()),k.hide(),k.on("mousedown",r),A.on("mousedown",s),P.on("scroll",function(){O&&(D=parseInt(Math.round(this[w]*q)),T[v]=D+"px"),O=!1,H&&this.$element.trigger("scroll",[M])}),f.mouseWheel&&(this.lock=f.mouseWheelLock,this.lock_anyway=f.lockAnyway,this.$element.on(e.event.special.mousewheel?"mousewheel.ace_scroll":"mousewheel.ace_scroll DOMMouseScroll.ace_scroll",function(t){if(!_){if(o(!0),!x)return!p.lock_anyway;V&&(V=!1,e("html").off(".ace_scroll"),e(R).off(".ace_scroll"),G&&p.$element.trigger("drag.end")),t.deltaY=t.deltaY||0;var a=t.deltaY>0||t.originalEvent.detail<0||t.originalEvent.wheelDelta>0?1:-1,i=!1,r=M[b],s=M[w];p.lock||(i=-1==a?M[C]<=s+r:0==s),p.move_bar(!0);var n=parseInt(r/8);return 80>n&&(n=80),n>p.size&&(n=p.size),n+=1,M[w]=s-a*n,i&&!p.lock_anyway}}));var i=ace.vars.touch&&"ace_drag"in e.event.special&&f.touchDrag;if(i){var n="",l=i?"ace_drag":"swipe";this.$element.on(l+".ace_scroll",function(e){if(_)return void(e.retval.cancel=!0);if(o(!0),!x)return void(e.retval.cancel=this.lock_anyway);if(n=e.direction,y&&("up"==n||"down"==n)||!y&&("left"==n||"right"==n)){var t=y?e.dy:e.dx;0!=t&&(Math.abs(t)>20&&i&&(t=2*t),p.move_bar(!0),M[w]=M[w]+t)}})}Z&&k.addClass("idle-hide"),K&&k.on("mouseenter.ace_scroll",function(){Q=!0,o(!1)}).on("mouseleave.ace_scroll",function(){Q=!1,0==V&&d()}),this.$element.on("mouseenter.ace_scroll touchstart.ace_scroll",function(){et=!0,K?o(!0):f.hoverReset&&p.reset(!0),k.addClass("scroll-hover")}).on("mouseleave.ace_scroll touchend.ace_scroll",function(){k.removeClass("scroll-hover")}),y||P.children(0).css(g,this.size),P.css(h,this.size),_=!1,S=!0}},this.is_active=function(){return x},this.is_enabled=function(){return!_},this.move_bar=function(e){O=e},this.get_track=function(){return E},this.reset=function(e){if(!_){S||this.create();var t=this.size;if(!e||et){if(et=!1,W){var a=parseInt(Math.round((parseInt(P.css("border-top-width"))+parseInt(P.css("border-bottom-width")))/2.5));t-=a}var i=y?M[C]:t;if(y&&0==i||!y&&0==this.element.scrollWidth)return void k.removeClass("scroll-active");var r=y?t:M.clientWidth;y||P.children(0).css(g,t),P.css(h,this.size),i>r?(x=!0,k.css(g,r).show(),q=parseFloat((r/i).toFixed(5)),N=parseInt(Math.round(r*q)),B=parseInt(Math.round(N/2)),$=r-N,D=parseInt(Math.round(M[w]*q)),T[g]=N+"px",T[v]=D+"px",k.addClass("scroll-active"),0==z&&c(),U||(f.reset&&(M[w]=0,T[v]=0),U=!0),W&&m()):(x=!1,k.hide(),k.removeClass("scroll-active"),P.css(h,""))}}},this.disable=function(){M[w]=0,T[v]=0,_=!0,x=!1,k.hide(),this.$element.addClass("scroll-disabled"),k.removeClass("scroll-active"),P.css(h,"")},this.enable=function(){_=!1,this.$element.removeClass("scroll-disabled")},this.destroy=function(){x=!1,_=!1,S=!1,this.$element.removeClass("ace-scroll scroll-disabled scroll-active"),this.$element.off(".ace_scroll"),W||(y||P.find("> div").children().unwrap(),P.children().unwrap(),P.remove()),k.remove(),L!==!1&&(this.element.style.position=L),null!=it&&(clearTimeout(it),it=null)},this.modify=function(t){t&&(f=e.extend({},f,t)),this.destroy(),this.create(),et=!0,this.reset(!0)},this.update=function(a){a&&(f=e.extend({},f,a)),this.size=a.size||this.size,this.lock=a.mouseWheelLock||this.lock,this.lock_anyway=a.lockAnyway||this.lock_anyway,a.styleClass!=t&&(j&&k.removeClass(j),j=a.styleClass,j&&k.addClass(j),F=!!j.match(/scroll\-left|scroll\-top/))},this.start=function(){M[w]=0},this.end=function(){M[w]=M[C]},this.hide=function(){k.hide()},this.show=function(){k.show()},this.update_scroll=function(){O=!1,T[v]=D+"px",M[w]=parseInt(Math.round(D/q))};var tt=-1,at=-1,it=null,rt=0;return this.track_size=function(){return 0==z&&c(),z},this.create(),et=!0,this.reset(!0),X=M[C],this};e.fn.ace_scroll=function(i,r){var s,n=this.each(function(){var t=e(this),n=t.data("ace_scroll"),l="object"==typeof i&&i;n||t.data("ace_scroll",n=new a(this,l)),"string"==typeof i&&(s=n[i](r))});return s===t?n:s},e.fn.ace_scroll.defaults={size:200,horizontal:!1,mouseWheel:!0,mouseWheelLock:!1,lockAnyway:!1,styleClass:!1,observeContent:!1,hideOnIdle:!1,hideDelay:1500,hoverReset:!0,reset:!1,dragEvent:!1,touchDrag:!0,touchSwipe:!1,scrollEvent:!1,detached:!1,updatePos:!0}}(window.jQuery),function(e,t){function a(t,a){var r=this,s=e(t),n="right",l=!1,o=s.hasClass("fade"),d=ace.helper.getAttrSettings(t,e.fn.ace_aside.defaults);if(this.settings=e.extend({},e.fn.ace_aside.defaults,a,d),!this.settings.background||a.scroll_style||d.scroll_style||(this.settings.scroll_style="scroll-white no-track"),this.container=this.settings.container,this.container)try{e(this.container).get(0)==document.body&&(this.container=null)}catch(c){}this.container&&(this.settings.backdrop=!1,s.addClass("aside-contained"));var m=s.find(".modal-dialog"),p=s.find(".modal-content"),u=300;this.initiate=function(){t.className=t.className.replace(/(\s|^)aside\-(right|top|left|bottom)(\s|$)/gi,"$1$3"),n=this.settings.placement,n&&(n=e.trim(n.toLowerCase())),n&&/right|top|left|bottom/.test(n)||(n="right"),s.attr("data-placement",n),s.addClass("aside-"+n),/right|left/.test(n)?(l=!0,s.addClass("aside-vc")):s.addClass("aside-hz"),this.settings.fixed&&s.addClass("aside-fixed"),this.settings.background&&s.addClass("aside-dark"),this.settings.offset&&s.addClass("navbar-offset"),this.settings.transition||s.addClass("transition-off"),s.addClass("aside-hidden"),this.insideContainer(),m=s.find(".modal-dialog"),p=s.find(".modal-content"),this.settings.body_scroll||s.on("mousewheel.aside DOMMouseScroll.aside touchmove.aside pointermove.aside",function(t){return e.contains(p[0],t.target)?void 0:(t.preventDefault(),!1)}),0==this.settings.backdrop&&s.addClass("no-backdrop")},this.show=function(){if(0==this.settings.backdrop)try{s.data("bs.modal").$backdrop.remove()}catch(t){}this.container?e(this.container).addClass("overflow-hidden"):s.css("position","fixed"),s.removeClass("aside-hidden")},this.hide=function(){this.container&&(this.container.addClass("overflow-hidden"),ace.vars.firefox&&t.offsetHeight),f(),ace.vars.transition&&!o&&s.one("bsTransitionEnd",function(){s.addClass("aside-hidden"),s.css("position",""),r.container&&r.container.removeClass("overflow-hidden")}).emulateTransitionEnd(u)},this.shown=function(){if(f(),e("body").removeClass("modal-open").css("padding-right",""),"invisible"==this.settings.backdrop)try{s.data("bs.modal").$backdrop.css("opacity",0)}catch(t){}var a=l?p.height():m.height();ace.vars.touch?p.addClass("overflow-scroll").css("max-height",a+"px"):p.hasClass("ace-scroll")||p.ace_scroll({size:a,reset:!0,mouseWheelLock:!0,lockAnyway:!this.settings.body_scroll,styleClass:this.settings.scroll_style,observeContent:!0,hideOnIdle:!ace.vars.old_ie,hideDelay:1500}),i.off("resize.modal.aside").on("resize.modal.aside",function(){if(ace.vars.touch)p.css("max-height",(l?p.height():m.height())+"px");else{p.ace_scroll("disable");var e=l?p.height():m.height();p.ace_scroll("update",{size:e}).ace_scroll("enable").ace_scroll("reset")}}).triggerHandler("resize.modal.aside"),r.container&&ace.vars.transition&&!o&&s.one("bsTransitionEnd",function(){r.container.removeClass("overflow-hidden")}).emulateTransitionEnd(u)},this.hidden=function(){i.off(".aside"),(!ace.vars.transition||o)&&(s.addClass("aside-hidden"),s.css("position",""))},this.insideContainer=function(){var t=e(".main-container"),a=s.find(".modal-dialog");if(a.css({right:"",left:""}),t.hasClass("container")){var r=!1;1==l&&(a.css(n,parseInt((i.width()-t.width())/2)),r=!0),r&&ace.vars.firefox&&ace.helper.redraw(t[0])}},this.flip=function(){var e={right:"left",left:"right",top:"bottom",bottom:"top"};s.removeClass("aside-"+n).addClass("aside-"+e[n]),n=e[n]};var f=function(){var e=s.find(".aside-trigger");if(0!=e.length){e.toggleClass("open");var t=e.find(ace.vars[".icon"]);0!=t.length&&t.toggleClass(t.attr("data-icon1")+" "+t.attr("data-icon2"))}};this.initiate(),this.container&&(this.container=e(this.container)),s.appendTo(this.container||"body")}var i=e(window);e(document).on("show.bs.modal",".modal.aside",function(){e(".aside.in").modal("hide"),e(this).ace_aside("show")}).on("hide.bs.modal",".modal.aside",function(){e(this).ace_aside("hide")}).on("shown.bs.modal",".modal.aside",function(){e(this).ace_aside("shown")}).on("hidden.bs.modal",".modal.aside",function(){e(this).ace_aside("hidden")}),e(window).on("resize.aside_container",function(){e(".modal.aside").ace_aside("insideContainer")}),e(document).on("settings.ace.aside",function(t,a){"main_container_fixed"==a&&e(".modal.aside").ace_aside("insideContainer")}),e.fn.aceAside=e.fn.ace_aside=function(i,r){var s,n=this.each(function(){var t=e(this),n=t.data("ace_aside"),l="object"==typeof i&&i;n||t.data("ace_aside",n=new a(this,l)),"string"==typeof i&&"function"==typeof n[i]&&(s=r instanceof Array?n[i].apply(n,r):n[i](r))});return s===t?n:s},e.fn.ace_aside.defaults={fixed:!1,background:!1,offset:!1,body_scroll:!1,transition:!0,scroll_style:"scroll-dark no-track",container:null,backdrop:!1,placement:"right"}}(window.jQuery),function(e,t){function a(t,a){var i=t.find(".widget-main").eq(0);e(window).off("resize.widget.scroll");var r=ace.vars.old_ie||ace.vars.touch;if(a){var s=i.data("ace_scroll");s&&i.data("save_scroll",{size:s.size,lock:s.lock,lock_anyway:s.lock_anyway});var n=t.height()-t.find(".widget-header").height()-10;n=parseInt(n),i.css("min-height",n),r?(s&&i.ace_scroll("disable"),i.css("max-height",n).addClass("overflow-scroll")):(s?i.ace_scroll("update",{size:n,mouseWheelLock:!0,lockAnyway:!0}):i.ace_scroll({size:n,mouseWheelLock:!0,lockAnyway:!0}),i.ace_scroll("enable").ace_scroll("reset")),e(window).on("resize.widget.scroll",function(){var e=t.height()-t.find(".widget-header").height()-10;e=parseInt(e),i.css("min-height",e),r?i.css("max-height",e).addClass("overflow-scroll"):i.ace_scroll("update",{size:e}).ace_scroll("reset")})}else{i.css("min-height","");var l=i.data("save_scroll");l&&i.ace_scroll("update",{size:l.size,mouseWheelLock:l.lock,lockAnyway:l.lock_anyway}).ace_scroll("enable").ace_scroll("reset"),r?i.css("max-height","").removeClass("overflow-scroll"):l||i.ace_scroll("disable")}}var i=function(t){this.$box=e(t);this.reload=function(){var e=this.$box,t=!1;"static"==e.css("position")&&(t=!0,e.addClass("position-relative")),e.append('<div class="widget-box-overlay"><i class="'+ace.vars.icon+'loading-icon fa fa-spinner fa-spin fa-2x white"></i></div>'),e.one("reloaded.ace.widget",function(){e.find(".widget-box-overlay").remove(),t&&e.removeClass("position-relative")})},this.close=function(){var e=this.$box,t=300;e.fadeOut(t,function(){e.trigger("closed.ace.widget"),e.remove()})},this.toggle=function(e,t){var a=this.$box,i=a.find(".widget-body").eq(0),r=null,s="undefined"!=typeof e?e:a.hasClass("collapsed")?"show":"hide",n="show"==s?"shown":"hidden";if("undefined"==typeof t&&(t=a.find("> .widget-header a[data-action=collapse]").eq(0),0==t.length&&(t=null)),t){r=t.find(ace.vars[".icon"]).eq(0);var l,o=null,d=null;(o=r.attr("data-icon-show"))?d=r.attr("data-icon-hide"):(l=r.attr("class").match(/fa\-(.*)\-(up|down)/))&&(o="fa-"+l[1]+"-down",d="fa-"+l[1]+"-up")}var c=250,m=200;"show"==s?(r&&r.removeClass(o).addClass(d),i.hide(),a.removeClass("collapsed"),i.slideDown(c,function(){a.trigger(n+".ace.widget")})):(r&&r.removeClass(d).addClass(o),i.slideUp(m,function(){a.addClass("collapsed"),a.trigger(n+".ace.widget")}))},this.hide=function(){this.toggle("hide")},this.show=function(){this.toggle("show")},this.fullscreen=function(){var e=this.$box.find("> .widget-header a[data-action=fullscreen]").find(ace.vars[".icon"]).eq(0),t=null,i=null;(t=e.attr("data-icon1"))?i=e.attr("data-icon2"):(t="fa-expand",i="fa-compress"),this.$box.hasClass("fullscreen")?(e.addClass(t).removeClass(i),this.$box.removeClass("fullscreen"),a(this.$box,!1)):(e.removeClass(t).addClass(i),this.$box.addClass("fullscreen"),a(this.$box,!0)),this.$box.trigger("fullscreened.ace.widget")}};e.fn.widget_box=function(a,r){var s,n=this.each(function(){var t=e(this),n=t.data("widget_box"),l="object"==typeof a&&a;n||t.data("widget_box",n=new i(this,l)),"string"==typeof a&&(s=n[a](r))});return s===t?n:s},e(document).on("click.ace.widget",".widget-header a[data-action]",function(t){t.preventDefault();var a=e(this),r=a.closest(".widget-box");if(0!=r.length&&!r.hasClass("ui-sortable-helper")){var s=r.data("widget_box");s||r.data("widget_box",s=new i(r.get(0)));var n=a.data("action");if("collapse"==n){var l,o=r.hasClass("collapsed")?"show":"hide";if(r.trigger(l=e.Event(o+".ace.widget")),l.isDefaultPrevented())return;s.toggle(o,a)}else if("close"==n){var l;if(r.trigger(l=e.Event("close.ace.widget")),l.isDefaultPrevented())return;s.close()}else if("reload"==n){a.blur();var l;if(r.trigger(l=e.Event("reload.ace.widget")),l.isDefaultPrevented())return;s.reload()}else if("fullscreen"==n){var l;if(r.trigger(l=e.Event("fullscreen.ace.widget")),l.isDefaultPrevented())return;s.fullscreen()}else"settings"==n&&r.trigger("setting.ace.widget")}})}(window.jQuery),function(e,t){function a(a,r){function s(){this.mobile_view=this.mobile_style<4&&this.is_mobile_view(),this.collapsible=!this.mobile_view&&this.is_collapsible(),this.minimized=!this.collapsible&&this.$sidebar.hasClass(m)||3==this.mobile_style&&this.mobile_view&&this.$sidebar.hasClass(p),this.horizontal=!(this.mobile_view||this.collapsible)&&this.$sidebar.hasClass(u)}var n=this;this.$sidebar=e(a),this.$sidebar.attr("data-sidebar","true"),this.$sidebar.attr("id")||this.$sidebar.attr("id","id-sidebar-"+ ++i);var l=ace.helper.getAttrSettings(a,e.fn.ace_sidebar.defaults,"sidebar-");this.settings=e.extend({},e.fn.ace_sidebar.defaults,r,l),this.minimized=!1,this.collapsible=!1,this.horizontal=!1,this.mobile_view=!1,this.vars=function(){return{minimized:this.minimized,collapsible:this.collapsible,horizontal:this.horizontal,mobile_view:this.mobile_view}},this.get=function(e){return this.hasOwnProperty(e)?this[e]:void 0},this.set=function(e,t){this.hasOwnProperty(e)&&(this[e]=t)},this.ref=function(){return this};var o=function(a){var i,r,s=e(this).find(ace.vars[".icon"]);s.length>0&&(i=s.attr("data-icon1"),r=s.attr("data-icon2"),a!==t?a?s.removeClass(i).addClass(r):s.removeClass(r).addClass(i):s.toggleClass(i).toggleClass(r))},d=function(){var t=n.$sidebar.find(".sidebar-collapse");return 0==t.length&&(t=e('.sidebar-collapse[data-target="#'+(n.$sidebar.attr("id")||"")+'"]')),t=0!=t.length?t[0]:null};this.toggleMenu=function(e,t){if(!this.collapsible){this.minimized=!this.minimized;try{ace.settings.sidebar_collapsed(a,this.minimized,!(e===!1||t===!1))}catch(i){this.minimized?this.$sidebar.addClass("menu-min"):this.$sidebar.removeClass("menu-min")}e||(e=d()),e&&o.call(e,this.minimized),ace.vars.old_ie&&ace.helper.redraw(a)}},this.collapse=function(e,t){this.collapsible||(this.minimized=!1,this.toggleMenu(e,t))},this.expand=function(e,t){this.collapsible||(this.minimized=!0,this.toggleMenu(e,t))},this.toggleResponsive=function(t){if(this.mobile_view&&3==this.mobile_style){if(this.$sidebar.hasClass("menu-min")){this.$sidebar.removeClass("menu-min");var a=d();a&&o.call(a)}if(this.minimized=!this.$sidebar.hasClass("responsive-min"),this.$sidebar.toggleClass("responsive-min responsive-max"),t||(t=this.$sidebar.find(".sidebar-expand"),0==t.length&&(t=e('.sidebar-expand[data-target="#'+(this.$sidebar.attr("id")||"")+'"]')),t=0!=t.length?t[0]:null),t){var i,r,s=e(t).find(ace.vars[".icon"]);s.length>0&&(i=s.attr("data-icon1"),r=s.attr("data-icon2"),s.toggleClass(i).toggleClass(r))}e(document).triggerHandler("settings.ace",["sidebar_collapsed",this.minimized])}},this.is_collapsible=function(){var t;return this.$sidebar.hasClass("navbar-collapse")&&null!=(t=e('.navbar-toggle[data-target="#'+(this.$sidebar.attr("id")||"")+'"]').get(0))&&t.scrollHeight>0},this.is_mobile_view=function(){var t;return null!=(t=e('.menu-toggler[data-target="#'+(this.$sidebar.attr("id")||"")+'"]').get(0))&&t.scrollHeight>0},this.$sidebar.on(ace.click_event+".ace.submenu",".nav-list",function(t){var a=this,i=e(t.target).closest("a");if(i&&0!=i.length){var r=n.minimized&&!n.collapsible;if(i.hasClass("dropdown-toggle")){t.preventDefault();var s=i.siblings(".submenu").get(0);if(!s)return!1;var l=e(s),o=0,d=s.parentNode.parentNode;if(r&&d==a||l.parent().hasClass("hover")&&"absolute"==l.css("position")&&!n.collapsible)return!1;var c=0==s.scrollHeight;return c&&e(d).find("> .open > .submenu").each(function(){this==s||e(this.parentNode).hasClass("active")||(o-=this.scrollHeight,n.hide(this,n.settings.duration,!1))}),c?(n.show(s,n.settings.duration),0!=o&&(o+=s.scrollHeight)):(n.hide(s,n.settings.duration),o-=s.scrollHeight),0!=o&&("true"!=n.$sidebar.attr("data-sidebar-scroll")||n.minimized||n.$sidebar.ace_sidebar_scroll("prehide",o)),!1}if("tap"==ace.click_event&&r&&i.get(0).parentNode.parentNode==a){var m=i.find(".menu-text").get(0);if(null!=m&&t.target!=m&&!e.contains(m,t.target))return t.preventDefault(),!1}if(ace.vars.ios_safari&&"false"!==i.attr("data-link"))return document.location=i.attr("href"),t.preventDefault(),!1}});var c=!1;this.show=function(t,a,i){if(i=i!==!1,i&&c)return!1;var r,s=e(t);if(s.trigger(r=e.Event("show.ace.submenu")),r.isDefaultPrevented())return!1;i&&(c=!0),a=a||this.settings.duration,s.css({height:0,overflow:"hidden",display:"block"}).removeClass("nav-hide").addClass("nav-show").parent().addClass("open"),t.scrollTop=0,a>0&&s.css({height:t.scrollHeight,"transition-property":"height","transition-duration":a/1e3+"s"});var n=function(t,a){t&&t.stopPropagation(),s.css({"transition-property":"","transition-duration":"",overflow:"",height:""}),a!==!1&&s.trigger(e.Event("shown.ace.submenu")),i&&(c=!1)};return a>0&&e.support.transition.end?s.one(e.support.transition.end,n):n(),ace.vars.android&&setTimeout(function(){n(null,!1),ace.helper.redraw(t)},a+20),!0},this.hide=function(t,a,i){if(i=i!==!1,i&&c)return!1;var r,s=e(t);if(s.trigger(r=e.Event("hide.ace.submenu")),r.isDefaultPrevented())return!1;i&&(c=!0),a=a||this.settings.duration,s.css({height:t.scrollHeight,overflow:"hidden",display:"block"}).parent().removeClass("open"),t.offsetHeight,a>0&&s.css({height:0,"transition-property":"height","transition-duration":a/1e3+"s"});var n=function(t,a){t&&t.stopPropagation(),s.css({display:"none",overflow:"",height:"","transition-property":"","transition-duration":""}).removeClass("nav-show").addClass("nav-hide"),a!==!1&&s.trigger(e.Event("hidden.ace.submenu")),i&&(c=!1)};return a>0&&e.support.transition.end?s.one(e.support.transition.end,n):n(),ace.vars.android&&setTimeout(function(){n(null,!1),ace.helper.redraw(t)},a+20),!0},this.toggle=function(e,t){if(t=t||n.settings.duration,0==e.scrollHeight){if(this.show(e,t))return 1}else if(this.hide(e,t))return-1;return 0};var m="menu-min",p="responsive-min",u="h-sidebar",f=function(){this.mobile_style=1,this.$sidebar.hasClass("responsive")&&!e('.menu-toggler[data-target="#'+this.$sidebar.attr("id")+'"]').hasClass("navbar-toggle")?this.mobile_style=2:this.$sidebar.hasClass(p)?this.mobile_style=3:this.$sidebar.hasClass("navbar-collapse")&&(this.mobile_style=4)};f.call(n),e(window).on("resize.sidebar.vars",function(){s.call(n)}).triggerHandler("resize.sidebar.vars")}var i=0;e(document).on(ace.click_event+".ace.menu",".menu-toggler",function(t){var a=e(this),i=e(a.attr("data-target"));if(0!=i.length){t.preventDefault(),i.toggleClass("display"),a.toggleClass("display");var r=ace.click_event+".ace.autohide",s="true"===i.attr("data-auto-hide");return a.hasClass("display")?(s&&e(document).on(r,function(t){return i.get(0)==t.target||e.contains(i.get(0),t.target)?void t.stopPropagation():(i.removeClass("display"),a.removeClass("display"),void e(document).off(r))}),"true"==i.attr("data-sidebar-scroll")&&i.ace_sidebar_scroll("reset")):s&&e(document).off(r),!1}}).on(ace.click_event+".ace.menu",".sidebar-collapse",function(t){var a=e(this).attr("data-target"),i=null;a&&(i=e(a)),(null==i||0==i.length)&&(i=e(this).closest(".sidebar")),0!=i.length&&(t.preventDefault(),i.ace_sidebar("toggleMenu",this))}).on(ace.click_event+".ace.menu",".sidebar-expand",function(t){var a=e(this).attr("data-target"),i=null;if(a&&(i=e(a)),(null==i||0==i.length)&&(i=e(this).closest(".sidebar")),0!=i.length){var r=this;t.preventDefault(),i.ace_sidebar("toggleResponsive",this);var s=ace.click_event+".ace.autohide";"true"===i.attr("data-auto-hide")&&(i.hasClass("responsive-max")?e(document).on(s,function(t){return i.get(0)==t.target||e.contains(i.get(0),t.target)?void t.stopPropagation():(i.ace_sidebar("toggleResponsive",r),void e(document).off(s))}):e(document).off(s))}}),e.fn.ace_sidebar=function(i,r){var s,n=this.each(function(){var t=e(this),n=t.data("ace_sidebar"),l="object"==typeof i&&i;n||t.data("ace_sidebar",n=new a(this,l)),"string"==typeof i&&"function"==typeof n[i]&&(s=r instanceof Array?n[i].apply(n,r):n[i](r))});return s===t?n:s},e.fn.ace_sidebar.defaults={duration:300}}(window.jQuery),function(e,t){function a(t,a){var s=this,n=e(window),l=e(t),o=l.find(".nav-list"),d=l.find(".sidebar-toggle").eq(0),c=l.find(".sidebar-shortcuts").eq(0),m=o.get(0);if(m){var p=ace.helper.getAttrSettings(t,e.fn.ace_sidebar_scroll.defaults);this.settings=e.extend({},e.fn.ace_sidebar_scroll.defaults,a,p);var u=s.settings.scroll_to_active;this.only_if_fixed=s.settings.only_if_fixed;var f=l.ace_sidebar("ref");l.attr("data-sidebar-scroll","true");var v=function(){return"absolute"==l.first("li.hover > .submenu").css("position")},g=null,h=null,b=null;this.is_scrolling=!1;var w=!1;this.sidebar_fixed=r(t,"fixed");var C,y,_=function(){var e=o.parent().offset();return s.sidebar_fixed&&(e.top-=ace.helper.scrollTop()),n.innerHeight()-e.top-(s.settings.include_toggle?0:d.outerHeight())},x=function(){return m.scrollHeight},S=function(e){if(!w&&!(s.only_if_fixed&&!s.sidebar_fixed||v())){if(o.wrap('<div class="nav-wrap-up" />'),s.settings.include_shortcuts&&0!=c.length&&o.parent().prepend(c),s.settings.include_toggle&&0!=d.length&&o.parent().append(d),g=o.parent().ace_scroll({size:_(),reset:!0,mouseWheelLock:!0,lockAnyway:s.settings.lock_anyway,styleClass:s.settins.scroll_style,hoverReset:!1}).closest(".ace-scroll").addClass("nav-scroll"),b=g.data("ace_scroll"),h=g.find(".scroll-content").eq(0),i&&!s.settings.include_toggle){var t=d.get(0);t&&h.on("scroll.safari",function(){ace.helper.redraw(t)})}w=!0,1==e&&(s.reset(),u&&s.scroll_to_active(),u=!1)}};this.scroll_to_active=function(){if(b&&b.is_active())try{var e,t=f.vars(),a=l.find(".nav-list");t.minimized&&!t.collapsible?e=a.find("> .active"):(e=o.find("> .active.hover"),0==e.length&&(e=o.find(".active:not(.open)")));var i=e.outerHeight();a=a.get(0);for(var r=e.get(0);r!=a;)i+=r.offsetTop,r=r.parentNode;var s=i-g.height();s>0&&h.scrollTop(s)}catch(n){}},this.reset=function(e){if(e===!0&&(this.sidebar_fixed=r(t,"fixed")),this.only_if_fixed&&!this.sidebar_fixed||v())return void this.disable();w||S(),l.addClass("sidebar-scroll");var a=f.vars(),i=!a.minimized&&!a.collapsible&&!a.horizontal&&(C=_())<(y=m.parentNode.scrollHeight);this.is_scrolling=!0,i&&b&&(b.update({size:C}),b.enable(),b.reset()),i&&b.is_active()||this.is_scrolling&&this.disable()},this.disable=function(){this.is_scrolling=!1,b&&b.disable(),l.removeClass("sidebar-scroll")},this.prehide=function(e){if(this.is_scrolling&&!f.get("minimized"))if(x()+e<_())this.disable();else if(0>e){var t=h.scrollTop()+e;if(0>t)return;h.scrollTop(t)}},this._reset=function(e){e===!0&&(this.sidebar_fixed=r(t,"fixed")),ace.vars.webkit?setTimeout(function(){s.reset()},0):this.reset()},this.get=function(e){return this.hasOwnProperty(e)?this[e]:void 0},this.set=function(e,t){this.hasOwnProperty(e)&&(this[e]=t)},this.ref=function(){return this},this.updateStyle=function(e){null!=b&&b.update({styleClass:e})},l.on("hidden.ace.submenu.sidebar_scroll shown.ace.submenu.sidebar_scroll",".submenu",function(e){e.stopPropagation(),f.get("minimized")||s._reset()}),S(!0)}}var i=ace.vars.safari&&navigator.userAgent.match(/version\/[1-5]/i),r="getComputedStyle"in window?function(e,t){return e.offsetHeight,window.getComputedStyle(e).position==t}:function(t,a){return t.offsetHeight,e(t).css("position")==a};e(document).on("settings.ace.sidebar_scroll",function(t,a,i){e(".sidebar[data-sidebar-scroll=true]").each(function(){var t=e(this),s=t.ace_sidebar_scroll("ref");if("sidebar_collapsed"==a)"true"==t.attr("data-sidebar-hover")&&t.ace_sidebar_hover("reset"),1==i?s.disable():s.reset();else if("sidebar_fixed"===a||"navbar_fixed"===a){var n=s.get("is_scrolling"),l=r(this,"fixed");s.set("sidebar_fixed",l),l&&!n?s.reset():!l&&s.get("only_if_fixed")&&s.disable()}})}),e(window).on("resize.ace.sidebar_scroll",function(){e(".sidebar[data-sidebar-scroll=true]").each(function(){var t=e(this).ace_sidebar_scroll("ref"),a=r(this,"fixed");t.set("sidebar_fixed",a),t.reset()})}),e.fn.ace_sidebar_scroll||(e.fn.ace_sidebar_scroll=function(i,r){var s,n=this.each(function(){var t=e(this),n=t.data("ace_sidebar_scroll"),l="object"==typeof i&&i;n||t.data("ace_sidebar_scroll",n=new a(this,l)),"string"==typeof i&&"function"==typeof n[i]&&(s=n[i](r))});return s===t?n:s},e.fn.ace_sidebar_scroll.defaults={scroll_to_active:!0,include_shortcuts:!0,include_toggle:!1,scroll_style:"",lock_anyway:!1,only_if_fixed:!0})}(window.jQuery),function(e,t){function a(t,a){var s=this,n=e(window),l=e(t),o=l.find(".nav-list"),d=l.find(".sidebar-toggle").eq(0),c=l.find(".sidebar-shortcuts").eq(0),m=o.get(0);if(m){var p=ace.helper.getAttrSettings(t,e.fn.ace_sidebar_scroll.defaults);this.settings=e.extend({},e.fn.ace_sidebar_scroll.defaults,a,p);var u=s.settings.scroll_to_active,f=l.ace_sidebar("ref");l.attr("data-sidebar-scroll","true");var v=null,g=null,h=null,b=null,w=null,C=null;this.is_scrolling=!1;var y=!1;this.sidebar_fixed=r(t,"fixed");var _,x,S=function(){var e=o.parent().offset();return s.sidebar_fixed&&(e.top-=ace.helper.scrollTop()),n.innerHeight()-e.top-(s.settings.include_toggle?0:d.outerHeight())},P=function(){return m.clientHeight},M=function(t){if(!y&&s.sidebar_fixed){o.wrap('<div class="nav-wrap-up pos-rel" />'),o.after("<div><div></div></div>"),o.wrap('<div class="nav-wrap" />'),s.settings.include_toggle||d.css({"z-index":1}),s.settings.include_shortcuts||c.css({"z-index":99}),v=o.parent().next().ace_scroll({size:S(),mouseWheelLock:!0,hoverReset:!1,dragEvent:!0,styleClass:s.settings.scroll_style,touchDrag:!1}).closest(".ace-scroll").addClass("nav-scroll"),C=v.data("ace_scroll"),g=v.find(".scroll-content").eq(0),h=g.find(" > div").eq(0),w=e(C.get_track()),b=w.find(".scroll-bar").eq(0),s.settings.include_shortcuts&&0!=c.length&&(o.parent().prepend(c).wrapInner("<div />"),o=o.parent()),s.settings.include_toggle&&0!=d.length&&(o.append(d),o.closest(".nav-wrap").addClass("nav-wrap-t")),o.css({position:"relative"}),1==s.settings.scroll_outside&&v.addClass("scrollout"),m=o.get(0),m.style.top=0,g.on("scroll.nav",function(){m.style.top=-1*this.scrollTop+"px"
}),o.on(e.event.special.mousewheel?"mousewheel.ace_scroll":"mousewheel.ace_scroll DOMMouseScroll.ace_scroll",function(e){return s.is_scrolling&&C.is_active()?v.trigger(e):!s.settings.lock_anyway}),o.on("mouseenter.ace_scroll",function(){w.addClass("scroll-hover")}).on("mouseleave.ace_scroll",function(){w.removeClass("scroll-hover")});var a=g.get(0);if(o.on("ace_drag.nav",function(t){if(!s.is_scrolling||!C.is_active())return void(t.retval.cancel=!0);if(0!=e(t.target).closest(".can-scroll").length)return void(t.retval.cancel=!0);if("up"==t.direction||"down"==t.direction){C.move_bar(!0);var i=t.dy;i=parseInt(Math.min(_,i)),Math.abs(i)>2&&(i=2*i),0!=i&&(a.scrollTop=a.scrollTop+i,m.style.top=-1*a.scrollTop+"px")}}),s.settings.smooth_scroll&&o.on("touchstart.nav MSPointerDown.nav pointerdown.nav",function(){o.css("transition-property","none"),b.css("transition-property","none")}).on("touchend.nav touchcancel.nav MSPointerUp.nav MSPointerCancel.nav pointerup.nav pointercancel.nav",function(){o.css("transition-property","top"),b.css("transition-property","top")}),i&&!s.settings.include_toggle){var r=d.get(0);r&&g.on("scroll.safari",function(){ace.helper.redraw(r)})}if(y=!0,1==t&&(s.reset(),u&&s.scroll_to_active(),u=!1),"number"==typeof s.settings.smooth_scroll&&s.settings.smooth_scroll>0&&(o.css({"transition-property":"top","transition-duration":(s.settings.smooth_scroll/1e3).toFixed(2)+"s"}),b.css({"transition-property":"top","transition-duration":(s.settings.smooth_scroll/1500).toFixed(2)+"s"}),v.on("drag.start",function(e){e.stopPropagation(),o.css("transition-property","none")}).on("drag.end",function(e){e.stopPropagation(),o.css("transition-property","top")})),ace.vars.android){var n=ace.helper.scrollTop();2>n&&(window.scrollTo(n,0),setTimeout(function(){s.reset()},20));var l,p=ace.helper.winHeight();e(window).on("scroll.ace_scroll",function(){s.is_scrolling&&C.is_active()&&(l=ace.helper.winHeight(),l!=p&&(p=l,s.reset()))})}}};this.scroll_to_active=function(){if(C&&C.is_active())try{var e,t=f.vars(),a=l.find(".nav-list");t.minimized&&!t.collapsible?e=a.find("> .active"):(e=o.find("> .active.hover"),0==e.length&&(e=o.find(".active:not(.open)")));var i=e.outerHeight();a=a.get(0);for(var r=e.get(0);r!=a;)i+=r.offsetTop,r=r.parentNode;var s=i-v.height();s>0&&(m.style.top=-s+"px",g.scrollTop(s))}catch(n){}},this.reset=function(e){if(e===!0&&(this.sidebar_fixed=r(t,"fixed")),!this.sidebar_fixed)return void this.disable();y||M();var a=f.vars(),i=!a.collapsible&&!a.horizontal&&(_=S())<(x=m.clientHeight);this.is_scrolling=!0,i&&(h.css({height:x,width:8}),v.prev().css({"max-height":_}),C.update({size:_}),C.enable(),C.reset()),i&&C.is_active()?l.addClass("sidebar-scroll"):this.is_scrolling&&this.disable()},this.disable=function(){this.is_scrolling=!1,v&&(v.css({height:"","max-height":""}),h.css({height:"",width:""}),v.prev().css({"max-height":""}),C.disable()),parseInt(m.style.top)<0&&s.settings.smooth_scroll&&e.support.transition.end?o.one(e.support.transition.end,function(){l.removeClass("sidebar-scroll"),o.off(".trans")}):l.removeClass("sidebar-scroll"),m.style.top=0},this.prehide=function(e){if(this.is_scrolling&&!f.get("minimized"))if(P()+e<S())this.disable();else if(0>e){var t=g.scrollTop()+e;if(0>t)return;m.style.top=-1*t+"px"}},this._reset=function(e){e===!0&&(this.sidebar_fixed=r(t,"fixed")),ace.vars.webkit?setTimeout(function(){s.reset()},0):this.reset()},this.set_hover=function(){w&&w.addClass("scroll-hover")},this.get=function(e){return this.hasOwnProperty(e)?this[e]:void 0},this.set=function(e,t){this.hasOwnProperty(e)&&(this[e]=t)},this.ref=function(){return this},this.updateStyle=function(e){null!=C&&C.update({styleClass:e})},l.on("hidden.ace.submenu.sidebar_scroll shown.ace.submenu.sidebar_scroll",".submenu",function(e){e.stopPropagation(),f.get("minimized")||(s._reset(),"shown"==e.type&&s.set_hover())}),M(!0)}}var i=ace.vars.safari&&navigator.userAgent.match(/version\/[1-5]/i),r="getComputedStyle"in window?function(e,t){return e.offsetHeight,window.getComputedStyle(e).position==t}:function(t,a){return t.offsetHeight,e(t).css("position")==a};e(document).on("settings.ace.sidebar_scroll",function(t,a){e(".sidebar[data-sidebar-scroll=true]").each(function(){var t=e(this),i=t.ace_sidebar_scroll("ref");if("sidebar_collapsed"==a&&r(this,"fixed"))"true"==t.attr("data-sidebar-hover")&&t.ace_sidebar_hover("reset"),i._reset();else if("sidebar_fixed"===a||"navbar_fixed"===a){var s=i.get("is_scrolling"),n=r(this,"fixed");i.set("sidebar_fixed",n),n&&!s?i._reset():n||i.disable()}})}),e(window).on("resize.ace.sidebar_scroll",function(){e(".sidebar[data-sidebar-scroll=true]").each(function(){var t=e(this);"true"==t.attr("data-sidebar-hover")&&t.ace_sidebar_hover("reset");var a=e(this).ace_sidebar_scroll("ref"),i=r(this,"fixed");a.set("sidebar_fixed",i),a._reset()})}),e.fn.ace_sidebar_scroll||(e.fn.ace_sidebar_scroll=function(i,r){var s,n=this.each(function(){var t=e(this),n=t.data("ace_sidebar_scroll"),l="object"==typeof i&&i;n||t.data("ace_sidebar_scroll",n=new a(this,l)),"string"==typeof i&&"function"==typeof n[i]&&(s=n[i](r))});return s===t?n:s},e.fn.ace_sidebar_scroll.defaults={scroll_to_active:!0,include_shortcuts:!0,include_toggle:!1,smooth_scroll:150,scroll_outside:!1,scroll_style:"",lock_anyway:!1})}(window.jQuery),function(e){var t=e(".navbar").eq(0),a=e(".navbar-container").eq(0),i=e(".sidebar").eq(0),r=e(".main-container").get(0),s=e(".breadcrumbs").eq(0),n=e(".page-content").get(0),l=8;t.length>0&&(e(window).on("resize.auto_padding",function(){if("fixed"==t.css("position")){var e=ace.vars.nav_collapse?a.outerHeight():t.outerHeight();if(e=parseInt(e),r.style.paddingTop=e+"px",ace.vars.non_auto_fixed&&i.length>0&&(i.get(0).style.top="fixed"==i.css("position")?e+"px":""),s.length>0)if("fixed"==s.css("position")){var o=l+s.outerHeight()+parseInt(s.css("margin-top"));o=parseInt(o),n.style.paddingTop=o+"px",ace.vars.non_auto_fixed&&(s.get(0).style.top=e+"px")}else n.style.paddingTop="",ace.vars.non_auto_fixed&&(s.get(0).style.top="")}else r.style.paddingTop="",n.style.paddingTop="",ace.vars.non_auto_fixed&&(i.length>0&&(i.get(0).style.top=""),s.length>0&&(s.get(0).style.top=""))}).triggerHandler("resize.auto_padding"),e(document).on("settings.ace.auto_padding",function(a,i){("navbar_fixed"==i||"breadcrumbs_fixed"==i)&&(ace.vars.webkit&&(t.get(0).offsetHeight,s.length>0&&s.get(0).offsetHeight),e(window).triggerHandler("resize.auto_padding"))}))}(window.jQuery),angular.module("log",["toastr"]),angular.module("log").constant("WARNING_MESSAGES",{templateLoadFail:{title:"Loading templates failed",message:"could not load template. This is due to either internal or not template has been set.",remedy:"try again or add a new template, if this persist contact support"}}),angular.module("log").constant("SUCCESS_MESSAGES",{authSuccess:{title:"Authentication",message:"Login success"},userCreated:{title:"Users",message:"User created"},userUpdated:{title:"Users",message:"User updated"},userRemoved:{title:"Users",message:"User deleted"},logoutSuccess:{title:"Logout Success",message:"You've been logged out of the system successfully!"},recordRemovedSuccessfully:{title:"Record Removed",message:"Record Removed Successfully"},entrySaved:{title:"Record Saved",message:"Settings Successfully saved"}}),angular.module("log").constant("INFO_MESSAGES",{}),angular.module("log").constant("ERROR_MESSAGES",{stateChangeError:{title:"Application error",message:"Could not load page",remedy:"Please try that again"},unknownError:{title:"Error",message:"An error has occurred",remedy:"Please try again"},authInvalid:{title:"Authentication",message:"Invalid username or password",remedy:"Please try again"},networkError:{title:"Network",message:"Network error",remedy:"Please check your internet connection and try again"},userExists:{title:"Users",message:"A user with the specified email exists",remedy:"Please use another email address"},invalidUserId:{title:"Users",message:"Invalid user id",remedy:"Please select a valid user from the list"},unauthorizedAccess:{title:"Unauthorized access",message:"You are not allowed to access or perform this operation",remedy:"Please, re-login, try again if you have access and contact support if it persists"},updateConflict:{title:"Document update conflict",message:"The document you want to modified has been updated or created",remedy:"Please, refresh and try again"},serverNotAvailable:{title:"Server Offline",message:"Please, check your connection again, it looks like you are offline",remedy:"check if your internet connection or the api server is running"},accessDenied:{title:"Access Denied",message:"you don't have the right permission to view this page"}}),angular.module("db").service("driverService",["config","apiService","couchDBService",function(e,t,a){var i=this;i.getService=function(){return{api:t,couchDB:a}},i.getDriver=function(){return e.driver||"api"},i.get=function(){var e=i.getService(),t=i.getDriver();return e.hasOwnProperty(t)?e[t]:e.pouchDB}}]),angular.module("visitorsGroup",["core","db","utility","form"]),angular.module("visitorsGroup").config(["$stateProvider",function(e){e.state("visitorsGroup.profile",{url:"/profile",parent:"visitorsGroup",templateUrl:"app/visitors-group/profile/profile.html",controller:"VisitorsGroupProfileCtrl",controllerAs:"profileCtrl"}).state("visitorsGroup.detail",{url:"/detail?_id",parent:"visitorsGroup",templateUrl:"app/visitors-group/profile/profile.html",controller:"VisitorsGroupProfileCtrl",controllerAs:"profileCtrl"}).state("visitorsGroup.remove",{url:"/remove?_id",parent:"visitorsGroup",templateUrl:"app/visitors-group/profile/profile.html",controller:"RemoveVisitorsGroupProfileCtrl",controllerAs:"removeProfileCtrl"})}]),angular.module("visitorsGroup").controller("VisitorsGroupProfileCtrl",["visitorsGroupService","$stateParams",function(e,t){var a=this;e.get(t._id).then(function(e){a.profile=e}).catch(function(){})}]).controller("RemoveVisitorsGroupProfileCtrl",["visitorsGroupService","$state","$stateParams","authService",function(e,t,a){var i=a._id;e.remove(i).then(function(){t.go("visitorsGroup.all")}).catch(function(e){console.log(e)})}]),angular.module("visitorsGroup").config(["$stateProvider",function(e){e.state("visitorsGroup.add",{parent:"visitorsGroup",url:"/add",templateUrl:"app/visitors-group/form/form.html",controller:"VGFormCtrl",controllerAs:"formCtrl",data:data("Add Visitors Group","fa fa-plus-square","visitorsGroup.all")}).state("visitorsGroup.edit",{parent:"visitorsGroup",url:"/edit?_id",templateUrl:"app/visitors-group/form/form.html",controller:"VGFormCtrl",controllerAs:"formCtrl",data:data("Edit Visitors Group","fa fa-edit-square","visitorsGroup.all")})}]),angular.module("visitorsGroup").controller("VGFormCtrl",["visitorsGroupService","$state","$stateParams","utility","formService",function(e,t,a,i,r){var s=1,n=this;n.errorMsg={},n.viewModel={},n.column=12/s,n.isSaving=!1,n.model=e.model,n.form=r.modelToForm(n.model,s);var l=a._id;l&&e.get(l).then(function(e){n.viewModel=e}).catch(function(e){console.log(e)}),n.save=function(){n.isSaving=!0,e.validate(n.viewModel).then(function(a){i.isEmptyObject(a)?e.save(n.viewModel).then(function(){n.isSaving=!1,t.go("visitorsGroup.all")}).catch(function(e){n.isSaving=!1,angular.merge(n.errorMsg,e)}):(n.isSaving=!1,n.errorMsg=a)}).catch(function(e){n.isSaving=!1,console.log(e)})},n.validateField=function(t){n.errorMsg[t]="",n.model.hasOwnProperty(t)&&e.validateField(n.viewModel[t],t,n.viewModel._id).then(function(e){n.errorMsg[t]=e}).catch(function(e){console.log(e)})},n.cancel=function(){t.go("visitorsGroup.all")}}]),angular.module("visitorsGroup").config(["$stateProvider",function(e){e.state("visitorsGroup.all",{url:"/all",parent:"visitorsGroup",templateUrl:"app/visitors-group/all/all.html",controller:"VisitorsGroupAllCtrl",controllerAs:"allCtrl"})}]),angular.module("visitorsGroup").controller("VisitorsGroupAllCtrl",["visitorsGroupService","authService","$state","log",function(e,t,a,i){function r(e){return n.orderByColumn[e]?n.orderByColumn[e].reverse=!n.orderByColumn[e].reverse:(n.orderByColumn={},n.orderByColumn[e]={reverse:!0}),n.orderByColumn}var s=t.currentUser();s.is_superuser&&s.is_staff||(i.error("unauthorizedAccess"),a.go("users.profile"));var n=this;n.users=[],n.pagination={maxSize:100},n.orderByColumn={date_joined:!0},n.updateView=function(t){var a={};if(angular.isDefined(n.pagination.currentPage)?a.page=n.pagination.currentPage:n.pagination.currentPage=1,angular.isDefined(n.pagination.itemsPerPage)?a.limit=n.pagination.itemsPerPage:n.pagination.itemsPerPage=10,t){var i=r(t);a.order_by=i[t].reverse?t:["-",t].join("")}e.all(a).then(function(e){n.items=e.results,n.pagination.totalItems=e.count,n.pagination.numPages=Math.ceil(n.pagination.totalItems/n.pagination.itemsPerPage)}).catch(function(e){console.log(e)})},n.updateView()}]),angular.module("visitors",["core","db","utility","form","viLoggedTable"]),angular.module("visitors").config(["$stateProvider",function(e){e.state("visitors.profile",{url:"/profile",parent:"visitors",templateUrl:"app/visitors/profile/profile.html",controller:"VisitorProfileCtrl",controllerAs:"profileCtrl",data:data("Profile","fa fa-user-square","visitors.all")}).state("visitors.detail",{url:"/detail?_id",parent:"visitors",templateUrl:"app/visitors/profile/profile.html",controller:"VisitorProfileCtrl",controllerAs:"profileCtrl",data:data("Profile","fa fa-user-square","visitors.all")}).state("visitors.remove",{url:"/remove?_id",parent:"visitors",templateUrl:"app/visitors/profile/profile.html",controller:"RemoveVisitorProfileCtrl",controllerAs:"removeProfileCtrl"})}]),angular.module("visitors").controller("VisitorProfileCtrl",["visitorService","authService","$stateParams",function(e,t,a){var i=this;a._id?e.get(a._id).then(function(e){i.profile=e}).catch(function(){}):i.profile=t.currentUser()}]).controller("RemoveVisitorProfileCtrl",["visitorService","$state","$stateParams","authService",function(e,t,a,i){var r=a._id;r&&i.currentUser()._id!==r&&e.remove(r).then(function(){t.go("visitors.all")}).catch(function(e){console.log(e)})}]),angular.module("visitors").config(["$stateProvider",function(e){e.state("visitors.add",{parent:"visitors",url:"/add?visitor",templateUrl:"app/visitors/form/form.html",controller:"VFormCtrl",controllerAs:"formCtrl",data:data("Add Visitor","fa fa-plus-square","visitors.all")}).state("visitors.edit",{parent:"visitors",url:"/edit?_id&visitor",templateUrl:"app/visitors/form/form.html",controller:"VFormCtrl",controllerAs:"formCtrl",data:data("Edit Visitor","fa fa-edit-square","visitors.all")})}]),angular.module("visitors").controller("VFormCtrl",["visitorService","companyService","$state","$stateParams","utility","visitorsGroupService","formService","$scope","$window","$timeout","dialogs",function(e,t,a,i,r,s,n,l,o,d,c){var m=2,p=this;p.upload={status:!0},p.isSaving=!1,p.errorMsg={},p.viewModel={},p.viewModel.company=p.viewModel.company||{},p.column=12/m,p.companyResponse={},p.phone={prefixes:n.phonePrefixes()},p.model=e.model,p.form=n.modelToForm(p.model,m);var u=i._id;u&&e.get(u).then(function(t){p.viewModel=t,p.viewModel["company.name"]=p.viewModel.company.name,p.viewModel["company.address"]=p.viewModel.company.address;var a=e.recoverPhone(p.viewModel.phone);p.viewModel=angular.merge({},p.viewModel,a)}).catch(function(e){console.log(e)}),s.choices().then(function(e){p.model.type.choices=e}).catch(function(){}),p.save=function(){p.isSaving=!0,p.viewModel.phone=e.getPhone(p.viewModel["phone.prefix"],p.viewModel["phone.suffix"]),e.validate(p.viewModel).then(function(t){t=e.updateForPhone(t),t=e.updateForPrefix(t,p.viewModel["phone.prefix"]),r.isEmptyObject(t)?(e.isEmpty(p.viewModel["company.name"])||(p.viewModel.company={name:p.viewModel["company.name"]}),e.isEmpty(p.viewModel["company.address"])||e.isEmpty(p.viewModel["company.name"])||(p.viewModel.company.address=p.viewModel["company.address"]),e.save(p.viewModel).then(function(){p.isSaving=!1,a.go("visitors.all")}).catch(function(e){p.isSaving=!1,angular.merge(p.errorMsg,e)})):(p.isSaving=!1,p.errorMsg=t)}).catch(function(e){p.isSaving=!1,console.log(e)})},p.cancel=function(){a.go("visitors.all")},p.validateField=function(t){if(p.errorMsg[t]="",p.model.hasOwnProperty(t)){if("phone.suffix"===t)"Others"===p.viewModel["phone.prefix"]?(p.model["phone.suffix"].minLength=6,p.model["phone.suffix"].maxLength=15):(p.model["phone.suffix"].maxLength=7,p.model["phone.suffix"].minLength=7);else if("phone.prefix"===t&&"Others"===p.viewModel["phone.prefix"])return[];e.validateField(p.model[t],p.viewModel[t],p.viewModel._id).then(function(e){p.errorMsg[t]="phone.prefix"===t&&e.length>0?["Please select from list"]:e}).catch(function(e){console.log(e)})}"phone.prefix"!==t&&"phone.suffix"!==t||e.isEmpty(p.viewModel["phone.prefix"])||e.isEmpty(p.viewModel["phone.suffix"])||e.validateField(p.viewModel[t],t,p.viewModel._id).then(function(e){p.errorMsg.phone=e.length?e:""}).catch(function(e){console.log(e)})},p.getCompanies=function(e){return t.all({q:e}).then(function(e){return e.results.map(function(e){return p.companyResponse[e.name]=e,e.name})}).catch(function(){})},p.updateCompany=function(e){p.viewModel["company.address"]=p.companyResponse[e].address},p.placeholder=n.placeholder,p.openImageDialog=function(){var e=c.create("app/visitors/form/partials/camera/camera.html","VModalImage",{vm:p,$timeout:d},{size:"lg"},"formCtrl").result;e.then(function(e){p.viewModel.image=e}).catch(function(e){console.log(e)})}}]).controller("VModalImage",["$scope","$modalInstance","data","$window","$timeout","cameraService",function(e,t,a,i,r,s){function n(){e.videoStream.stop(),s.instance={}}var l=a.vm;l.isSaving=!1,e.takeImage=l.viewModel.image,e.closeCameraNow=function(){n(),l.upload.status=t.close(e.takeImage)},e.$on("picTaken",function(t,a){e.takeImage=a.image}),e.$on("camSuccess",function(){e.videoStream=s.instance.stream.getVideoTracks()[0]}),e.closeWindow=function(){n(),t.dismiss("closed")},e.setFiles=function(t){l.isSaving=!0;var a=t.files[0];if(a.type.match("image*")){var s=new i.FileReader;s.onload=function(t){r(function(){var a=document.createElement("img");a.src=t.target.result;var i=document.createElement("canvas"),r=i.getContext("2d");r.drawImage(a,0,0);var s=280,n=300,o=a.width,d=a.height;o>d?o>s&&(d*=s/o,o=s):d>n&&(o*=n/d,d=n),i.width=o,i.height=d;var c=i.getContext("2d");c.drawImage(a,0,0,o,d),l.viewModel.image=i.toDataURL("image/png"),e.takeImage=i.toDataURL("image/png")},1e3)},l.isSaving=!1,s.readAsDataURL(a)}else l.isSaving=!1}}]),angular.module("visitors").config(["$stateProvider",function(e){e.state("visitors.all",{url:"/all",parent:"visitors",templateUrl:"app/visitors/all/all.html",controller:"VisitorAllCtrl",controllerAs:"allCtrl",resolve:{currentState:["visitorService",function(e){return e.getState().catch(function(){return{}})}]}})}]),angular.module("visitors").controller("VisitorAllCtrl",["visitorService","currentState","dialog","log","utility","table",function(e,t,a,i,r,s){function n(){d.pagination=c.pagination||{},d.pagination.maxSize=d.pagination.maxSize||100,d.pagination.itemsPerPage=d.pagination.itemsPerPage||10,d.pagination.currentPage=d.pagination.currentPage||1,d.orderByColumn=c.orderByColumn||{},0===Object.keys(c.orderByColumn||{}).length&&(d.orderByColumn.date_joined=d.orderByColumn.date_joined||{reverse:!0})}function l(t){return d.orderByColumn.hasOwnProperty(t)&&"[object Object]"===Object.prototype.toString.call(d.orderByColumn[t])?d.orderByColumn[t].reverse=!d.orderByColumn[t].reverse:(d.orderByColumn={},d.orderByColumn[t]={reverse:!0}),c.orderByColumn=d.orderByColumn,e.setState(c).catch(function(e){console.log(e)}),d.orderByColumn}function o(e){e=e||{};var t=e.column,a=e.page,i=e.filterParams,r={};if(r.page=angular.isDefined(d.pagination.currentPage)?d.pagination.currentPage:1,r.limit=angular.isDefined(d.pagination.itemsPerPage)?d.pagination.itemsPerPage:10,a&&(r.page=a),t){var s=l(t);r.order_by=s[t].reverse?t:["-",t].join("")}if(i&&"[object Object]"===Object.prototype.toString.call(i))for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n]);return r}var d=this,c=t||{};d.items=[],d.search={},d.inProgress=!1,d.filterFields=s.visitors,n(),d.updateView=function(t){var a=t||{};"[object String]"===Object.prototype.toString.call(t)&&(a={column:t}),d.inProgress=!0;var r=o(a);e.all(r).then(function(t){d.items=t.results,d.pagination.totalItems=t.count,d.pagination.itemsPerPage=parseInt(d.pagination.itemsPerPage,10),d.pagination.numPages=Math.ceil(parseInt(d.pagination.totalItems,10)/parseInt(d.pagination.itemsPerPage,10)),c.pagination=d.pagination,c.orderByColumn=d.orderByColumn,c.lastCheckTime=(new Date).getTime(),e.setState(c).catch(function(e){console.log(e)}),d.inProgress=!1}).catch(function(e){d.inProgress=!1,i.error(e)})},d.updateView(),d.remove=function(t){a.confirm("Do you want to remove this record permanently?").then(function(){e.remove(t).then(function(){d.updateView(),i.success("recordRemovedSuccessfully")}).catch(function(e){i.error(e.detail||e)})})},d.header=["First Name","Last Name","Email","Phone","Company","Address"],d.getList=function(){var t=o("created","all");return e.all(t).then(function(e){return e.results.map(function(e){return{first_name:e.first_name,last_name:e.last_name,email:e.email,phone:e.phone,company:e.company.name,address:e.company.address}})})},d.filename=r.getFileName("visitors"),d.startSearch=function(){d.is_active_search=Object.keys(d.search).length>0;var e={filterParams:{}},t=Object.keys(d.search);if(t.length>0)for(var a in d.search)d.search.hasOwnProperty(a)&&void 0!==d.search[a]&&d.search[a].length>2?e.filterParams[a]=d.search[a]:d.search.hasOwnProperty(a)&&void 0!==d.search[a]&&-1!==["start_date","end_date"].indexOf(a)&&(e.filterParams[a]=$filter("date")(d.search[a],"yyyy-MM-dd"));Object.keys(e.filterParams).length>0?(e.filterParams.search=!0,d.updateView(e)):d.updateView()},d.clear=function(){d.search={},d.updateView()},d.searchPage=function(){var e={filterParams:{}};void 0!==d.q&&""!==d.q&&(e.filterParams.q=d.q,d.updateView(e))}}]),angular.module("users",["core","db","utility","form","viLoggedTable"]),angular.module("users").config(["$stateProvider",function(e){e.state("users.profile",{url:"/profile",parent:"users",templateUrl:"app/users/profile/profile.html",controller:"UserProfileCtrl",controllerAs:"profileCtrl",data:data("Profile","fa fa-user","users.all")}).state("users.detail",{url:"/detail?_id",parent:"users",templateUrl:"app/users/profile/profile.html",controller:"UserProfileCtrl",controllerAs:"profileCtrl",data:data("Profile","fa fa-user","users.all")}).state("users.remove",{url:"/remove?_id",parent:"users",templateUrl:"app/users/profile/profile.html",controller:"RemoveUserProfileCtrl",controllerAs:"removeProfileCtrl"})}]),angular.module("users").controller("UserProfileCtrl",["userService","authService","$stateParams","appointmentService","utility","log","permissions",function(e,t,a,i,r,s,n){function l(){o.getRejected(),o.getInProgress(),o.getUpcoming(),o.getAwaitingApproval()}var o=this;o.permissions=n;var d=t.currentUser(),c=a._id;c&&(o.permissions.create||o.permissions.update)?e.get(c).then(function(e){o.profile=e}).catch(function(){}):(o.profile=d,c=o.profile._id),o.getInProgress=function(){c=c||t.currentUser()._id,i.inProgress({host:c}).then(function(e){o.inProgress=e.results})},o.getUpcoming=function(){c=c||d._id,i.upcoming({host:c}).then(function(e){o.upcoming=e.results})},o.getAwaitingApproval=function(){c=c||d._id,i.awaitingApproval({host:c}).then(function(e){o.awaitingApproval=e.results})},o.getRejected=function(){c=c||d._id,i.rejected({host:c}).then(function(e){o.rejected=e.results})},o.timeSince=function(e){return r.timeSince(e)},o.updateApp=function(e,t){var a=_.clone(e);e.is_approved="true"===t,e.host=a.host._id,e.visitor=a.visitor._id,i.save(e).then(function(){e.status===i.status.PENDING&&(i.sms(a,"approval"),i.email(a,"approval")),l()}).catch(function(e){console.log(e),s.error(e.detail||e)})},l()}]).controller("RemoveUserProfileCtrl",["userService","$state","$stateParams","authService",function(e,t,a,i){var r=a._id;r&&i.currentUser()._id!==r&&e.remove(r).then(function(){t.go("users.all")}).catch(function(e){console.log(e)})}]),angular.module("users").config(["$stateProvider",function(e){e.state("users.add",{parent:"users",url:"/add",templateUrl:"app/users/form/form.html",controller:"FormCtrl",controllerAs:"formCtrl",data:data("Add User","fa fa-plus-square","users.all")}).state("users.edit",{parent:"users",url:"/edit?_id",templateUrl:"app/users/form/form.html",controller:"FormCtrl",controllerAs:"formCtrl",data:data("Edit User","fa fa-edit-square","users.all")}).state("users.changePassword",{parent:"users",url:"/update-password",templateUrl:"app/users/form/form.html",controller:"FormCtrl",controllerAs:"formCtrl",data:data("Edit User","fa fa-edit-square","users.all")})}]),angular.module("users").controller("FormCtrl",["userService","$state","$stateParams","utility","formService","departmentService","$scope","$window","$timeout","dialogs","permissions",function(e,t,a,i,r,s,n,l,o,d,c){function m(e){return p[e]===!1?!0:!1}var p=e.currentUser(),u=2,f=this,v=a._id;if(f.permissions=c,f.permissions.create||v===p._id||t.go("users.profile"),f.errorMsg={},f.viewModel={},f.passwordMode=!1,f.column=12/u,f.model=_.cloneDeep(e.model),f.isSaving=!1,"users.changePassword"===t.current.name){f.column=12,f.passwordMode=!0;for(var g in f.model)f.model.hasOwnProperty(g)&&-1===["password","password2"].indexOf(g)&&(f.model[g].hidden=!0)}s.choices().then(function(e){f.model.department.choices=e}).catch(function(){}),f.form=r.modelToForm(f.model,u,{instance:this}),f.passwordMode&&(v=p._id),v&&e.get(v).then(function(e){f.viewModel=e,f.viewModel.department=f.viewModel.department._id||"",f.model.password.required=!1,f.model.password2.required=!1,f.model.is_superuser.hidden=m("is_superuser"),f.model.is_staff.hidden=m("is_superuser"),f.form=r.modelToForm(f.model,u,{instance:this})}).catch(function(e){console.log(e)}),f.save=function(){f.isSaving=!0,e.validate(f.viewModel).then(function(a){i.isEmptyObject(a)?e.save(f.viewModel).then(function(a){f.isSaving=!1,e.updateCurrentUser(a),t.go("users.all")}).catch(function(e){f.isSaving=!1,angular.merge(f.errorMsg,e)}):(f.isSaving=!1,f.errorMsg=a)}).catch(function(e){f.isSaving=!1,console.log(e)})},f.validateField=function(t){f.errorMsg[t]="",f.model.hasOwnProperty(t)&&e.validateField(f.viewModel[t],t,f.viewModel._id).then(function(a){return a=a||[],0===a.length&&-1!==["password","password2"].indexOf(t)?e.validatePasswordMatch(f.viewModel.password,f.viewModel.password2):a}).then(function(e){"[object Object]"===toString.call(e)?(f.errorMsg.password=e.password||[],f.errorMsg.password2=e.password2||[]):f.errorMsg[t]=e}).catch(function(e){console.log(e)})},f.placeholder=r.placeholder,f.cancel=function(){t.go("users.all")},f.openImageDialog=function(){var e=d.create("app/users/form/partials/camera/camera.html","UModalImage",{vm:f,$timeout:o},{size:"lg"},"formCtrl").result;e.then(function(e){f.viewModel.image=e}).catch(function(e){console.log(e)})}}]).controller("UModalImage",["$scope","$modalInstance","data","$window","$timeout","cameraService",function(e,t,a,i,r,s){function n(){e.videoStream.stop(),s.instance={}}var l=a.vm;l.isSaving=!1,e.takeImage=l.viewModel.image,e.closeCameraNow=function(){n(),t.close(e.takeImage)},e.$on("picTaken",function(t,a){e.takeImage=a.image}),e.$on("camSuccess",function(){e.videoStream=s.instance.stream.getVideoTracks()[0]}),e.closeWindow=function(){n(),t.dismiss("closed")},e.setFiles=function(t){l.isSaving=!0;var a=t.files[0];if(a.type.match("image*")){var s=new i.FileReader;s.onload=function(t){r(function(){var a=document.createElement("img");a.src=t.target.result;var i=document.createElement("canvas"),r=i.getContext("2d");r.drawImage(a,0,0);var s=280,n=300,o=a.width,d=a.height;o>d?o>s&&(d*=s/o,o=s):d>n&&(o*=n/d,d=n),i.width=o,i.height=d;var c=i.getContext("2d");c.drawImage(a,0,0,o,d),l.viewModel.image=i.toDataURL("image/png"),e.takeImage=i.toDataURL("image/png")},1e3)},l.isSaving=!1,s.readAsDataURL(a)}else l.isSaving=!1}}]),angular.module("users").config(["$stateProvider",function(e){e.state("users.all",{url:"/all",parent:"users",templateUrl:"app/users/all/all.html",controller:"UserAllCtrl",controllerAs:"allCtrl",resolve:{currentState:["userService",function(e){return e.getState().catch(function(){return{}})}]}})}]),angular.module("users").controller("UserAllCtrl",["userService","dialog","log","changesService","currentState","utility","table","permissions","$state",function(e,t,a,i,r,s,n,l,o){function d(){p.pagination=u.pagination||{},p.pagination.maxSize=p.pagination.maxSize||100,p.pagination.itemsPerPage=p.pagination.itemsPerPage||10,p.pagination.currentPage=p.pagination.currentPage||1,p.orderByColumn=u.orderByColumn||{},0===Object.keys(u.orderByColumn||{}).length&&(p.orderByColumn.date_joined=p.orderByColumn.date_joined||{reverse:!0})}function c(t){return p.orderByColumn.hasOwnProperty(t)&&"[object Object]"===Object.prototype.toString.call(p.orderByColumn[t])?p.orderByColumn[t].reverse=!p.orderByColumn[t].reverse:(p.orderByColumn={},p.orderByColumn[t]={reverse:!0}),u.orderByColumn=p.orderByColumn,e.setState(u).catch(function(e){console.log(e)}),p.orderByColumn}function m(e){e=e||{};var t=e.column,a=e.page,i=e.filterParams,r={};if(r.page=angular.isDefined(p.pagination.currentPage)?p.pagination.currentPage:1,r.limit=angular.isDefined(p.pagination.itemsPerPage)?p.pagination.itemsPerPage:10,a&&(r.page=a),t){var s=c(t);r.order_by=s[t].reverse?t:["-",t].join("")}if(i&&"[object Object]"===Object.prototype.toString.call(i))for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n]);return r}var p=this,u=r||{};p.permissions=l,p.permissions.read||o.go("users.profile"),p.items=[],p.search={},p.inProgress=!1,p.filterFields=n.users,d(),p.updateView=function(t){var i=t||{};"[object String]"===Object.prototype.toString.call(t)&&(i={column:t}),p.inProgress=!0;var r=m(i);e.all(r).then(function(t){p.items=t.results,p.pagination.totalItems=t.count,p.pagination.itemsPerPage=parseInt(p.pagination.itemsPerPage,10),p.pagination.numPages=Math.ceil(parseInt(p.pagination.totalItems,10)/parseInt(p.pagination.itemsPerPage,10)),u.pagination=p.pagination,u.orderByColumn=p.orderByColumn,u.lastCheckTime=(new Date).getTime(),e.setState(u).catch(function(e){console.log(e)}),p.inProgress=!1}).catch(function(e){p.inProgress=!1,a.error(e)})},p.remove=function(i){t.confirm("Do you want to remove this record permanently?").then(function(){e.remove(i).then(function(){p.updateView(),a.success("recordRemovedSuccessfully")}).catch(function(e){a.error(e.detail||e)})})},p.updateView(),i.pollForChanges(p,e,"userprofile"),p.header=["Username","First Name","Last Name","Email","Phone","Department","Floor"],p.getList=function(){var t=m("date_joined","all");return e.all(t).then(function(e){return e.results.map(function(e){return{username:e.username,first_name:e.first_name,last_name:e.last_name,email:e.email,phone:e.phone,department:e.department.name,floor:e.department.floor}})})},p.filename=s.getFileName("users"),p.startSearch=function(){var e={filterParams:{}},t=Object.keys(p.search);if(t.length>0)for(var a in p.search)p.search.hasOwnProperty(a)&&void 0!==p.search[a]&&p.search[a].length>2&&(e.filterParams[a]=p.search[a]);Object.keys(e.filterParams).length>0?(e.filterParams.search=!0,p.updateView(e)):p.updateView()},p.clear=function(){p.search={},p.updateView()},p.searchPage=function(){var e={filterParams:{}};void 0!==p.q&&""!==p.q&&(e.filterParams.q=p.q,p.updateView(e))}}]),angular.module("departments",["core"]),angular.module("departments").config(["$stateProvider",function(e){e.state("departments.profile",{url:"/profile",parent:"departments",templateUrl:"app/departments/profile/profile.html",controller:"DepartmentProfileCtrl",controllerAs:"profileCtrl"}).state("departments.detail",{url:"/detail?_id",parent:"departments",templateUrl:"app/departments/profile/profile.html",controller:"UserProfileCtrl",controllerAs:"profileCtrl"}).state("departments.remove",{url:"/remove?_id",parent:"departments",templateUrl:"app/departments/profile/profile.html",controller:"RemoveUserProfileCtrl",controllerAs:"removeProfileCtrl"})
}]),angular.module("departments").controller("DepartmentProfileCtrl",["userService","authService","$stateParams",function(e,t,a){var i=this;a._id?e.get(a._id).then(function(e){i.profile=e}).catch(function(){}):i.profile=t.currentUser()}]).controller("RemoveDepartmentProfileCtrl",["userService","$state","$stateParams","dialog",function(e,t,a){var i=a._id;i&&e.remove(i).then(function(){t.go("departments.all")}).catch(function(e){t.go("departments.all"),console.log(e)})}]),angular.module("departments").config(["$stateProvider",function(e){e.state("departments.add",{parent:"departments",url:"/add",templateUrl:"app/departments/form/form.html",controller:"DFormCtrl",controllerAs:"formCtrl",data:data("Add Department","fa fa-plus-square","departments.all")}).state("departments.edit",{parent:"departments",url:"/edit?_id",templateUrl:"app/departments/form/form.html",controller:"DFormCtrl",controllerAs:"formCtrl",data:data("Edit Department","fa fa-edit-square","departments.all")})}]),angular.module("departments").controller("DFormCtrl",["userService","$state","$stateParams","utility","formService","departmentService",function(e,t,a,i,r,s){var n=1,l=this;l.errorMsg={},l.viewModel={},l.column=12/n,l.isSaving=!1,l.model=s.model,l.form=r.modelToForm(l.model,n);var o=a._id;o&&s.get(o).then(function(e){l.viewModel=e}).catch(function(e){console.log(e)}),l.save=function(){l.isSaving=!0,s.validate(l.viewModel).then(function(e){i.isEmptyObject(e)?s.save(l.viewModel).then(function(){l.isSaving=!1,t.go("departments.all")}).catch(function(e){l.isSaving=!1,angular.merge(l.errorMsg,e)}):(l.isSaving=!1,l.errorMsg=e)}).catch(function(e){l.isSaving=!1,console.log(e)})},l.validateField=function(e){l.errorMsg[e]="",l.model.hasOwnProperty(e)&&s.validateField(l.viewModel[e],e,l.viewModel._id).then(function(t){l.errorMsg[e]=t}).catch(function(e){console.log(e)})},l.cancel=function(){t.go("departments.all")}}]),angular.module("departments").config(["$stateProvider",function(e){e.state("departments.all",{url:"/all",parent:"departments",templateUrl:"app/departments/all/all.html",controller:"DepartmentAllCtrl",controllerAs:"allCtrl"})}]),angular.module("departments").controller("DepartmentAllCtrl",["departmentService","dialog","log",function(e,t,a){function i(e){return r.orderByColumn[e]?r.orderByColumn[e].reverse=!r.orderByColumn[e].reverse:(r.orderByColumn={},r.orderByColumn[e]={reverse:!0}),r.orderByColumn}var r=this;r.items=[],r.pagination={maxSize:100},r.orderByColumn={created:!0},r.updateView=function(t){var a={};if(angular.isDefined(r.pagination.currentPage)?a.page=r.pagination.currentPage:r.pagination.currentPage=1,angular.isDefined(r.pagination.itemsPerPage)?a.limit=r.pagination.itemsPerPage:r.pagination.itemsPerPage=10,t){var s=i(t);a.order_by=s[t].reverse?t:["-",t].join("")}e.all(a).then(function(e){r.items=e.results,r.pagination.totalItems=e.count,r.pagination.numPages=Math.ceil(r.pagination.totalItems/r.pagination.itemsPerPage)}).catch(function(e){console.log(e)})},r.remove=function(i){t.confirm("Do you want to remove this record permanently?").then(function(){e.remove(i).then(function(){r.updateView(),a.success("recordRemovedSuccessfully")}).catch(function(e){a.error(e.detail||e)})})},r.updateView()}]),angular.module("company",["core","utility"]),angular.module("company").config(["$stateProvider",function(e){e.state("company.add",{parent:"company",url:"/add",templateUrl:"app/company/form/form.html",controller:"CFormCtrl",controllerAs:"formCtrl",data:data("Add Company","fa fa-plus-square","company.all")}).state("company.edit",{parent:"company",url:"/edit?_id",templateUrl:"app/company/form/form.html",controller:"CFormCtrl",controllerAs:"formCtrl",data:data("Edit Company","fa fa-edit-square","company.all")})}]),angular.module("company").controller("CFormCtrl",["companyService","$state","$stateParams","utility","formService",function(e,t,a,i,r){var s=1,n=this;n.errorMsg={},n.viewModel={},n.column=12/s,n.isSaving=!1,n.model=e.model,n.form=r.modelToForm(n.model,s);var l=a._id;l&&e.get(l).then(function(e){n.viewModel=e}).catch(function(e){console.log(e)}),n.save=function(){n.isSaving=!0,e.validate(n.viewModel).then(function(a){i.isEmptyObject(a)?e.save(n.viewModel).then(function(){n.isSaving=!1,t.go("company.all")}).catch(function(e){n.isSaving=!1,angular.merge(n.errorMsg,e)}):(n.isSaving=!1,n.errorMsg=a)}).catch(function(e){n.isSaving=!1,console.log(e)})},n.validateField=function(t){n.errorMsg[t]="",n.model.hasOwnProperty(t)&&e.validateField(n.viewModel[t],t,n.viewModel._id).then(function(e){n.errorMsg[t]=e}).catch(function(e){console.log(e)})},n.cancel=function(){t.go("company.all")}}]),angular.module("company").config(["$stateProvider",function(e){e.state("company.all",{url:"/all",parent:"company",templateUrl:"app/company/all/all.html",controller:"CompanyAllCtrl",controllerAs:"allCtrl"})}]),angular.module("company").controller("CompanyAllCtrl",["companyService",function(e){function t(e){return a.orderByColumn[e]?a.orderByColumn[e].reverse=!a.orderByColumn[e].reverse:(a.orderByColumn={},a.orderByColumn[e]={reverse:!0}),a.orderByColumn}var a=this;a.companies=[],a.pagination={maxSize:100},a.orderByColumn={created:!0},a.updateView=function(i){var r={};if(angular.isDefined(a.pagination.currentPage)?r.page=a.pagination.currentPage:a.pagination.currentPage=1,angular.isDefined(a.pagination.itemsPerPage)?r.limit=a.pagination.itemsPerPage:a.pagination.itemsPerPage=10,i){var s=t(i);r.order_by=s[i].reverse?i:["-",i].join("")}e.all(r).then(function(e){a.companies=e.results,a.pagination.totalItems=e.count,a.pagination.numPages=Math.ceil(a.pagination.totalItems/a.pagination.itemsPerPage)}).catch(function(e){console.log(e)})},a.updateView()}]),angular.module("appointments",["core","db","utility","form","viLoggedTable"]),angular.module("appointments").config(["$stateProvider",function(e){e.state("appointments.detail",{url:"/detail?_id",templateUrl:"app/appointments/logs/checkin.html",controller:"CheckInCtrl",controllerAs:"logCtrl",data:data("Appointment Detail",null,"appointments.all")}).state("appointments.remove",{url:"/remove?_id",parent:"appointments",templateUrl:"app/appointments/profile/profile.html",controller:"RemoveAppointmentsProfileCtrl",controllerAs:"removeProfileCtrl"})}]),angular.module("appointments").controller("AppointmentsProfileCtrl",["appointmentService","authService","$stateParams",function(e,t,a){{var i=this;a._id}a._id&&(i.item=e.get())}]).controller("RemoveAppointmentsProfileCtrl",["userService","$state","$stateParams","authService",function(e,t,a,i){var r=a._id;r&&i.currentUser()._id!==r&&e.remove(r).then(function(){t.go("appointments.all")}).catch(function(e){console.log(e)})}]),angular.module("appointments").config(["$stateProvider",function(e){e.state("appointments.checkin",{url:"/checkin?_id",templateUrl:"app/appointments/logs/checkin.html",controller:"CheckInCtrl",controllerAs:"logCtrl",data:data("Check Out Appointment",null,"appointments.all")}).state("appointments.checkout",{url:"/checkout?_id",templateUrl:"app/appointments/logs/checkout.html",controller:"CheckOutCtrl",controllerAs:"logCtrl"})}]),angular.module("appointments").controller("CheckInCtrl",["appointmentService","$stateParams","$state","dialogs",function(e,t,a,i){var r=this;r.teamMembers=[],r.status=e.status,e.get(t._id).then(function(e){r.item=e,r.teamMembers=e.teams}).catch(function(){}),r.checkIn=function(){e.saveLog({checked_in:(new Date).toJSON(),appointment:r.item._id,label_code:(new Date).getTime().toString().slice(0,-1)}).then(function(){a.go("appointments.all")}).catch(function(e){console.log(e),log.error("[object Object]"===Object.prototype.toString.call(e)&&e.detail?e.detail||e:"unknownError")})},r.checkOut=function(){var t=angular.copy(r.item.latest),i=angular.copy(r.item);i.visitor=r.item.visitor._id,i.host=r.item.host._id,i.is_expired=!0,t.check_out=(new Date).toJSON(),e.saveLog(t).then(function(){return e.save(i)}).then(function(){a.go("appointments.all")}).catch(function(e){console.log(e),log.error("[object Object]"===Object.prototype.toString.call(e)&&e.detail?e.detail||e:"unknownError")})},r.printLabel=function(){var e=i.create("app/appointments/logs/partials/pass-template.html","PrintLabelCtrl",r.item,{size:"md"});e.result.then(function(){},function(){})},r.updateApp=function(t,a){console.log(t);var i=angular.copy(r.item);t.is_approved="true"===a,t.host=r.item.host._id,t.visitor=r.item.visitor._id,e.save(t).then(function(t){t.is_approved===!0?r.item.status=e.status.UPCOMING:t.is_approved===!1&&(r.item.status=e.status.REJECTED),r.item._rev=t._rev,r.item.is_approved=t.is_approved,r.item.is_expired=t.is_expired,r.item.status===e.status.UPCOMING&&(e.sms(i,"approval"),e.email(i,"approval"))}).catch(function(e){console.log(e),log.error("[object Object]"===Object.prototype.toString.call(e)&&e.detail?e.detail||e:"unknownError")})}}]).controller("PrintLabelCtrl",["$scope","$modalInstance","data","$timeout","appointmentService",function(e,t,a,i,r){e.appointment=a;var s=e.appointment.logs[0]||{},n=(new Date).getTime().toString().slice(0,-1);s.label_code?n=s.label_code.toString():r.saveLog({appointment:s._id,label_code:n}).catch(function(e){console.log(e)}),n.length>12&&(n=n.slice(0,-1)),i(function(){JsBarcode("#barcode").options({font:"OCR-B"}).EAN13(n,{fontSize:11,textMargin:0,height:20}).render()},2e3),e.printThis=function(){i(function(){jQuery("#printThisElement").print()},200)}}]),angular.module("appointments").config(["$stateProvider",function(e){e.state("appointments.add",{parent:"appointments",url:"/add?visitor",templateUrl:"app/appointments/form/form.html",controller:"AFormCtrl",controllerAs:"formCtrl",data:data("Add Appointments","fa fa-plus-square","appointments.all")}).state("appointments.edit",{parent:"appointments",url:"/edit?_id&visitor",templateUrl:"app/appointments/form/form.html",controller:"AFormCtrl",controllerAs:"formCtrl",data:data("Edit Appointments","fa fa-plus-square","appointments.all")})}]),angular.module("appointments").controller("AFormCtrl",["appointmentService","$state","$stateParams","utility","formService","userService","visitorService","$filter","$scope","dialogs",function(e,t,a,i,r,s,n,l,o,d){function c(e){e.preventDefault(),e.stopPropagation(),this.opened=!this.opened}function m(){var e=[];if(!r.isEmpty(f.viewModel.purpose)&&"personal"===f.viewModel.purpose.toLowerCase()){var t=moment(f.viewModel.start_date).weekday(),a=moment.weekdaysShort(t),i=l("date")(f.viewModel.start_time,"HH:mm:ss").substr(0,2),s=l("date")(f.viewModel.end_time,"HH:mm:ss").substr(0,2);"Tue"!==a&&"Thu"!==a?e.push("Personal visitors are only allowed on Tuesday and Thursday between 1pm and 3pm"):(13>i||i>15||s>15)&&e.push("Personal visits are only allowed between the hours of 1pm and 3pm on Tuesday and Thursday")}return{purpose:e}}function p(e){e&&(f.viewModel=e,f.selected.host=f.viewModel.host,f.selected.visitor=f.viewModel.visitor);var t=angular.isString(f.viewModel.start_date)?f.viewModel.start_date:l("date")(f.viewModel.start_date,"yyyy-MM-dd"),a=angular.isString(f.viewModel.end_date)?f.viewModel.end_date:l("date")(f.viewModel.end_date,"yyyy-MM-dd"),i=angular.isString(f.viewModel.start_time)?f.viewModel.start_time:l("date")(f.viewModel.start_time,"HH:mm:ss"),r=angular.isString(f.viewModel.end_time)?f.viewModel.end_time:l("date")(f.viewModel.end_time,"HH:mm:ss");f.viewModel.host=[f.selected.host.last_name,f.selected.host.first_name].join(" "),f.viewModel.visitor=[f.selected.visitor.last_name,f.selected.visitor.first_name].join(" "),f.viewModel.start_time=moment([t,i].join(" "),"YYYY-MM-DD HH:mm:ss").toDate(),f.viewModel.end_time=moment([a,r].join(" "),"YYYY-MM-DD HH:mm:ss").toDate(),f.teamMembers=f.viewModel.teams}var u=2,f=this;f.errorMsg={},f.viewModel={},f.viewModel.start_date=new Date,f.viewModel.end_date=new Date,f.viewModel.start_time=new Date,f.viewModel.end_time=moment().add(30,"m").toDate(),f.viewModel.purpose=f.viewModel.purpose||"official",f.teamMembers=[],f.isSaving=!1,f.column=12/u,f.selected={},f.model=e.model,f.form=r.modelToForm(f.model,u),f.visitor={exists:!r.isEmpty(a.visitor),_id:a.visitor},f.visitor.exists&&n.get(f.visitor._id).then(function(e){f.selected.visitor=e,f.viewModel.visitor=[e.last_name,e.first_name].join(" "),f.model.visitor.formType="text"}).catch();var v=a._id;v&&e.get(v).then(function(e){p(e)}).catch(function(e){console.log(e)}),f.save=function(){f.isSaving=!0,e.validate(f.viewModel).then(function(a){if(m(),i.isEmptyObject(a)){f.viewModel.host=f.selected.host._id,f.viewModel.visitor=f.selected.visitor._id,f.viewModel.start_date=l("date")(f.viewModel.start_date,"yyyy-MM-dd"),f.viewModel.end_date=l("date")(f.viewModel.end_date,"yyyy-MM-dd"),f.viewModel.start_time=l("date")(f.viewModel.start_time,"HH:mm:ss"),f.viewModel.end_time=l("date")(f.viewModel.end_time,"HH:mm:ss"),o.currentUser._id===f.selected.host._id&&(f.viewModel.is_approved=!0),f.teamMembers.length>0&&(f.viewModel.teams=f.teamMembers.map(function(e){return e._id}));var r=angular.copy(f.viewModel);r.visitor=f.selected.visitor,r.host=f.selected.host,e.save(f.viewModel).then(function(){v||(e.sms(r,"created"),e.email(r,"created")),f.isSaving=!1,t.go("appointments.all")}).catch(function(e){f.isSaving=!1,p(),angular.merge(f.errorMsg,e)})}else f.isSaving=!1,f.errorMsg=a}).catch(function(e){f.isSaving=!1,console.log(e)})},f.validateField=function(t){f.errorMsg[t]=[];var a={};-1!==["start_time","end_time"].indexOf(t)?(f.errorMsg.start_time=[],f.errorMsg.end_time=[],new Date(f.viewModel.start_time).getTime()>new Date(f.viewModel.end_time).getTime()&&(f.viewModel.end_time=moment(f.viewModel.start_time).add(30,"m")),a=e.dateTimeValidation(f.viewModel.start_time,f.viewModel.end_time,"time",f.viewModel)):-1!==["start_date","end_date"].indexOf(t)?(f.errorMsg.start_date=[],f.errorMsg.end_date=[],new Date(f.viewModel.start_date).getTime()>new Date(f.viewModel.end_date).getTime()&&(f.viewModel.end_date=f.viewModel.start_date),a=e.dateTimeValidation(f.viewModel.start_date,f.viewModel.end_date,"date",f.viewModel)):"purpose"===t&&(a=e.dateTimeValidation(f.viewModel.start_date,f.viewModel.end_date,"date",f.viewModel)),f.model.hasOwnProperty(t)&&e.validateField(f.viewModel[t],t,f.viewModel._id).then(function(e){f.errorMsg[t]=e,f.errorMsg=angular.merge(f.errorMsg,a)}).catch(function(e){console.log(e)})},f.date={start_date:{opened:!1,open:c},end_date:{opened:!1,open:c}},f.time={start_time:{hstep:1,mstep:15,ismeridian:!0,toggleMode:function(){this.ismeridian=!this.ismeridian}},end_time:{hstep:1,mstep:15,ismeridian:!0,toggleMode:function(){this.ismeridian=!this.ismeridian}}},f.typeahead={host:{get:function(e){return s.all({q:e,"only-fields":"first_name,last_name,phone"}).then(function(e){return e.results.map(function(e){return{name:[e.last_name,e.first_name].join(" "),_id:e._id}})}).catch(function(e){console.log(e)})},onSelect:function(e){f.selected.host=e},editable:!1,disabled:!1},visitor:{get:function(e){return n.all({q:e,"only-fields":"first_name,last_name,phone"}).then(function(e){return e.results.map(function(e){return{name:[e.last_name,e.first_name].join(" "),_id:e._id}})}).catch(function(e){console.log(e)})},onSelect:function(e){f.selected.visitor=e},editable:!1,disabled:f.visitor.exists}},f.placeholder=r.placeholder,f.cancel=function(){t.go("appointments.all")},f.addMember=function(){var e=d.create("app/appointments/form/partials/visitor.html","TeamMembersCtrl",{vm:f},{size:"sm"},"formCtrl").result;e.then(function(e){var t=f.teamMembers.filter(function(t){return e._id===t._id});0===t.length&&f.teamMembers.push(e)}).catch(function(e){console.log(e)})}}]).controller("TeamMembersCtrl",["$scope","$modalInstance","data","visitorService","formService",function(e,t,a,i,r){var s=this,n=1;s.model=angular.copy(i.model),s.errorMsg={},s.viewModel={},s.column=12/n;for(var l in s.model)s.model.hasOwnProperty(l)&&-1===["last_name","first_name","phone"].indexOf(l)&&(s.model[l].hidden=!0),s.model.hasOwnProperty(l)&&-1!==["last_name","first_name","phone"].indexOf(l)&&(s.model[l].formType="typeahead-remote"),"phone"===l&&(s.model[l].template="app/appointments/form/partials/phone.html");s.phone={prefixes:r.phonePrefixes()},s.form=r.modelToForm(s.model,n),s.save=function(){s.isSaving=!0,s.viewModel._id?(s.isSaving=!1,t.close(s.viewModel)):(s.viewModel.phone=i.getPhone(s.viewModel["phone.prefix"],s.viewModel["phone.suffix"]),i.validate(s.viewModel).then(function(e){e=i.updateForPhone(e),e=i.updateForPrefix(e,s.viewModel["phone.prefix"]),utility.isEmptyObject(e)?(i.isEmpty(s.viewModel["company.name"])||(s.viewModel.company={name:s.viewModel["company.name"]}),i.isEmpty(s.viewModel["company.address"])||i.isEmpty(s.viewModel["company.name"])||(s.viewModel.company.address=s.viewModel["company.address"]),i.save(s.viewModel).then(function(e){s.isSaving=!1,t.close(e)}).catch(function(e){s.isSaving=!1,angular.merge(s.errorMsg,e)})):s.errorMsg=e}).catch(function(e){console.log(e)}))},s.cancel=function(){t.dismiss("closed")},s.validateField=function(e){if(s.errorMsg[e]="",s.model.hasOwnProperty(e)){if("phone.suffix"===e)"Others"===s.viewModel["phone.prefix"]?(s.model["phone.suffix"].minLength=6,s.model["phone.suffix"].maxLength=15):(s.model["phone.suffix"].maxLength=7,s.model["phone.suffix"].minLength=7);else if("phone.prefix"===e&&"Others"===s.viewModel["phone.prefix"])return[];i.validateField(s.model[e],s.viewModel[e],s.viewModel._id).then(function(t){s.errorMsg[e]="phone.prefix"===e&&t.length>0?["Please select from list"]:t}).catch(function(e){console.log(e)})}"phone.prefix"!==e&&"phone.suffix"!==e||i.isEmpty(s.viewModel["phone.prefix"])||i.isEmpty(s.viewModel["phone.suffix"])||i.validateField(s.viewModel[e],e,s.viewModel._id).then(function(e){s.errorMsg.phone=e.length?e:""}).catch(function(e){console.log(e)})},s.foundInList={},s.typeahead={last_name:{get:function(e){return i.all({q:e,"only-fields":"first_name,last_name,phone"}).then(function(e){return e.results.map(function(e){return s.foundInList[e._id]=e,{name:[e.last_name,e.first_name].join(" "),_id:e._id}})}).catch(function(e){console.log(e)})},onSelect:function(e){console.log(e)},editable:!0,disabled:!1},"phone.suffix":{get:function(e){var t=s.viewModel["phone.prefix"]||"";console.log(s.viewModel);var a=[t,e].join("");return i.all({q:a,"only-fields":"first_name,last_name,phone"}).then(function(e){return e.results.map(function(e){return s.foundInList[e._id]=e,{name:[[e.last_name,e.first_name].join(" "),e.phone].join("<br>"),_id:e._id}})}).catch(function(e){console.log(e)})},onSelect:function(e){s.viewModel=s.foundInList[e._id],s.viewModel["company.name"]=s.viewModel.company.name,s.viewModel["company.address"]=s.viewModel.company.address;var t=i.recoverPhone(s.viewModel.phone);s.viewModel=angular.merge({},s.viewModel,t)},editable:!0},first_name:{get:function(e){return i.all({q:e,"only-fields":"first_name,last_name,phone"}).then(function(e){return e.results.map(function(e){return s.foundInList[e._id]=e,{name:[[e.last_name,e.first_name].join(" "),e.phone].join("<br>"),_id:e._id}})}).catch(function(e){console.log(e)})},onSelect:function(e){s.viewModel=s.foundInList[e._id],s.viewModel["company.name"]=s.viewModel.company.name,s.viewModel["company.address"]=s.viewModel.company.address;var t=i.recoverPhone(s.viewModel.phone);s.viewModel=angular.merge({},s.viewModel,t)},editable:!0}}}]),angular.module("appointments").config(["$stateProvider",function(e){e.state("appointments.all",{url:"/all",parent:"appointments",templateUrl:"app/appointments/all/all.html",controller:"AppointmentsAllCtrl",controllerAs:"allCtrl",resolve:{currentState:["appointmentService",function(e){return e.getState().catch(function(){return{}})}]}})}]),angular.module("appointments").controller("AppointmentsAllCtrl",["appointmentService","changesService","userService","currentState","dialog","log","utility","table","$filter","permissions",function(e,t,a,i,r,s,n,l,o,d){function c(){f.pagination=v.pagination||{},f.pagination.maxSize=f.pagination.maxSize||100,f.pagination.itemsPerPage=f.pagination.itemsPerPage||10,f.pagination.currentPage=f.pagination.currentPage||1,f.orderByColumn=v.orderByColumn||{},0===Object.keys(v.orderByColumn||{}).length&&(f.orderByColumn.date_joined=f.orderByColumn.date_joined||{reverse:!0})}function m(t){return f.orderByColumn.hasOwnProperty(t)&&"[object Object]"===Object.prototype.toString.call(f.orderByColumn[t])?f.orderByColumn[t].reverse=!f.orderByColumn[t].reverse:(f.orderByColumn={},f.orderByColumn[t]={reverse:!0}),v.orderByColumn=f.orderByColumn,e.setState(v).catch(function(e){console.log(e)}),f.orderByColumn}function p(e){e=e||{};var t=e.column,a=e.page,i=e.filterParams,r={};if(r.page=angular.isDefined(f.pagination.currentPage)?f.pagination.currentPage:1,r.limit=angular.isDefined(f.pagination.itemsPerPage)?f.pagination.itemsPerPage:10,a&&(r.page=a),t){var s=m(t);r.order_by=s[t].reverse?t:["-",t].join("")}if(i&&"[object Object]"===Object.prototype.toString.call(i))for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n]);return r}function u(e){e.preventDefault(),e.stopPropagation(),this.opened=!this.opened}var f=this,v=i||{};f.permissions=d,f.items=[],f.search={},f.inProgress=!1,f.filterFields=l.appointments,c(),f.updateView=function(t){var a=t||{};"[object String]"===Object.prototype.toString.call(t)&&(a={column:t}),f.inProgress=!0;var i=p(a);e.all(i).then(function(t){f.items=t.results,f.pagination.totalItems=t.count,f.pagination.itemsPerPage=parseInt(f.pagination.itemsPerPage,10),f.pagination.numPages=Math.ceil(parseInt(f.pagination.totalItems,10)/parseInt(f.pagination.itemsPerPage,10)),v.pagination=f.pagination,v.orderByColumn=f.orderByColumn,v.lastCheckTime=(new Date).getTime(),e.setState(v).catch(function(e){console.log(e)}),f.inProgress=!1}).catch(function(e){f.inProgress=!1,s.error(e)})},f.status=e.status,f.updateView(),t.pollForChanges(f,e,"appointments"),f.remove=function(t){r.confirm("Do you want to remove this record permanently?").then(function(){e.remove(t).then(function(){f.updateView(),s.success("recordRemovedSuccessfully")}).catch(function(e){s.error(e.detail||e)})})},f.header=["Host Name","Visitors Name","Date","Start Time","End Time","Host Department","Floor"],f.getList=function(){var t=p("created","all");return e.all(t).then(function(e){return e.results.map(function(e){return{host:[e.host.first_name,e.host.last_name].join(" "),visitor:[e.visitor.first_name,e.visitor.last_name].join(" "),date:e.start_date,start_time:e.start_time,end_time:e.end_time,department:e.host.department.name,floor:e.host.department.floor}})})},f.filename=n.getFileName("appointments"),f.startSearch=function(){f.is_active_search=Object.keys(f.search).length>0;var e={filterParams:{}},t=Object.keys(f.search);if(t.length>0)for(var a in f.search)f.search.hasOwnProperty(a)&&void 0!==f.search[a]&&f.search[a].length>2?e.filterParams[a]=f.search[a]:f.search.hasOwnProperty(a)&&void 0!==f.search[a]&&-1!==["start_date","end_date"].indexOf(a)&&(e.filterParams[a]=o("date")(f.search[a],"yyyy-MM-dd"));Object.keys(e.filterParams).length>0?(e.filterParams.search=!0,f.updateView(e)):f.updateView()},f.clear=function(){f.search={},f.updateView()},f.searchPage=function(){var e={filterParams:{}};void 0!==f.q&&""!==f.q&&(e.filterParams.q=f.q,f.updateView(e))},f.date={start_date:{opened:!1,open:u},end_date:{opened:!1,open:u}}}]),angular.module("validation",["core"]),angular.module("validation").service("validationService",["$q",function(e){var t=this,a=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i,i=/^[A-Za-z0-9_]{3,20}$/;t.BASIC=function(e){e=e||{};var t={required:!0,pattern:"",checkLength:!1,minLength:0,maxLength:0,unique:!1,dbName:"",type:"basic"};for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t},t.INT=function(e){var t={required:!1,pattern:"/^[0-9]/",checkLength:!1,minLength:0,maxLength:0,unique:!1,dbName:"",type:"int"};for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t},t.EMAIL=function(e){var t={required:!1,pattern:a,checkLength:!1,unique:!1,dbName:"",fieldName:"",dataList:[],type:"email"};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},t.USERNAME=function(e){var t={required:!1,pattern:i,checkLength:!0,minLength:3,maxLength:20,unique:!0,type:"username"};for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t},t.validateRequired=function(e,a){var i=a||t.BASIC();return""!==e&&void 0!==e||!i.required?[]:["This field is required"]},t.validateStringLength=function(e,a){var i=a||t.BASIC(),r=[];return i.checkLength&&i.minLength>e.length&&r.push("character length is less than "+i.minLength),i.checkLength&&0!==i.maxLength&&e.length>i.maxLength&&r.push("you have exceeded the maximum characters allowed ("+i.maxLength+")"),r},t.validateInt=function(e,a){var i=a||t.BASIC(),r=[];return""!==i.pattern&&i.pattern.test(e)&&r.push("Only integers are allowed."),r},t.validateEmail=function(e,a){var i=a||t.EMAIL(),r=[];return t.isEmpty(e)||i.pattern.test(e)||r.push("invalid email provided"),r},t.validateUnique=function(a,i,r){var s=e.defer();if(i=i||{},i.unique&&i.hasOwnProperty("serviceInstance")&&!t.isEmpty(a)){var n={};return n[i.fieldName]=a,t.isEmpty(r)||(n["_id-ne"]=r),i.serviceInstance.all(n).then(function(e){return e.count>0?[[i.fieldName,"already exists, kindly provide another"].join(" ")]:[]})}return s.resolve([]),s.promise},t.validateFields=function(a,i,r){var s={};return angular.isObject(a)&&Object.keys(a).length>0&&Object.keys(a).forEach(function(e){s[e]=t.validateField(a[e],i[e],r)}),e.all(s)},t.validateField=function(e,a,i){var r=[],s=t.validateRequired(a,e),n=angular.isDefined(a)?t.validateStringLength(a,e):[],l="email"===e.type&&angular.isDefined(a)?t.validateEmail(a,e):[],o="int"===e.type&&angular.isDefined(a)?t.validateInt(a,e):[],d=r.concat(s,n,l,o);return t.validateUnique(a,e,i).then(function(e){return d.concat(e)})},t.isEmpty=function(e){return void 0===e||""===e||null===e},t.eliminateEmpty=function(e){var t={};for(var a in e)e.hasOwnProperty(a)&&e[a].length>0&&(t[a]=e[a]);return t},t.mergeErrorMsg=function(e,t){for(var a in t)t.hasOwnProperty(a)&&e.hasOwnProperty(a)?e[a]=e[a].concat(t[a]):t.hasOwnProperty(a)&&(e[a]=t[a]);return e}}]),angular.module("utility",[]),angular.module("utility").service("utility",["$filter","config",function(e,t){this.formatDate=function(a,i){var r=i||t.dateFormat;return e("date")(new Date(a),r)},this.takeFirst=function(e){return e[0]},this.extractDate=function(e){return new Date(this.formatDate(e))},this.isValidDate=function(e){return e&&null!==e&&"Invalid Date"!==new Date(e).toString()},this.isEmptyObject=function(e){return"[object Object]"===toString.call(e)&&0===Object.keys(e).length},this.contains=function(e,t){return-1!==e.indexOf(t)},this.capitalize=function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},this.hashBy=function(e,t){var a={};return e.forEach(function(e){var i=e[t];a[i]=e}),a},this.getUUID=function(){var e=Date.now();return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?a:7&a|8).toString(16)})},this.chunk=function(e,t){t=t||1;for(var a=[];e.length>0;)a.push(e.splice(0,t));return a},this.timeSince=function(e){if(!e||null===e||"Invalid Date"===new Date(e).toString())return"Never";"object"!=typeof e&&(e=new Date(e));var t,a=Math.floor((new Date-e)/1e3),i=Math.floor(a/31536e3);return i>=1?t="year":(i=Math.floor(a/2592e3),i>=1?t="month":(i=Math.floor(a/86400),i>=1?t="day":(i=Math.floor(a/3600),i>=1?t="hour":(i=Math.floor(a/60),i>=1?t="minute":(i=a,t="second"))))),(i>1||0===i)&&(t+="s"),i+" "+t},this.compileTemplate=function(e,t,a){function i(e){return(e+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")}var r="[object Object]"===Object.prototype.toString.call(e),s=r?e:{},n=void 0===a?"&&":a;return Object.keys(s).forEach(function(e){var a=i(n+e+n);t=t.replace(new RegExp(a,"g"),s[e])}),t},this.getFileName=function(t,a){t=(t||"").toLowerCase().replace(/ /g,"-"),a=a||".csv";var i=e("date")(new Date,"yyyy-MM-dd-HH-mm-ss");return t+"-"+i+a}}]),angular.module("utility").service("messenger",["dbService",function(e){var t=this,a="messenger";t.sendMessage=function(t){return e.db.post(a,t)},t.send={sms:function(e){return e.type="sms",e},email:function(e){e.type="email",sendMessage(e)}};var i="Hello &&first_name&& &&last_name&&,\n\nYour appointment with &&host_first_name&& &&host_last_name&& has been approved.\n\nYour appointment is scheduled for\n\nDate:&&date&& \nExpected Check in Time: &&start_time&&\n\n&&organization&&",r="Hello &&first_name&& &&last_name&&, your appointment with &&host_first_name&& &&host_last_name&& has been approved. Your appointment is scheduled for Date:&&date&& Expected Check in Time: &&start_time&&",s="Hello &&first_name&& &&last_name&&,\n\nYou have an appointment awaiting your approval\n\n&&organization&&",n="Hello &&first_name&& &&last_name&&, you have an appointment awaiting your approval";t.messageTemplates={appointments:{APPROVAL_EMAIL:i,APPROVAL_SMS:r,CREATED_EMAIL:s,CREATED_SMS:n}}}]),angular.module("viLoggedTable",[]),angular.module("viLoggedTable").service("table",function(){var e=this;e.users=[{filter:!0,field:"first_name",label:"First Name"},{filter:!0,field:"last_name",label:"Last Name"},{filter:!0,field:"username",label:"Username"},{filter:!0,field:"email",label:"Email"},{filter:!0,field:"department.name",label:"Department"},{filter:!1,field:"date_joined",label:"Date Created",type:"date"}],e.appointments=[{filter:!0,field:"host",label:"Host"},{filter:!0,field:"visitor",label:"Guest"},{filter:!0,field:"start_date",label:"Start Date",type:"date"},{filter:!0,field:"end_date",label:"End Date",type:"date"},{filter:!1,field:"start_time",label:"Start Time",type:"date"},{filter:!1,field:"end_time",label:"End Time",type:"date"},{filter:!1,field:"status",label:"Status"}],e.visitors=[{filter:!0,field:"first_name",label:"First Name"},{filter:!0,field:"last_name",label:"Last Name"},{filter:!0,field:"email",label:"Email"},{filter:!0,field:"phone",label:"Phone"},{filter:!0,field:"type.name",label:"Category"},{filter:!0,field:"company.name",label:"Company"},{filter:!1,field:"created",label:"Created Date"}]}),angular.module("sidebar",["core","config"]),angular.module("sidebar").service("sidebarService",["$state","authService",function(e,t){this.get=function(){for(var a=t.currentUser(),i=[],r={},s=e.get(),n=s.length;n--;){var l=_.cloneDeep(s[n]);if(l.hasOwnProperty("data")&&l.data.hasOwnProperty("label")&&l.data.hasOwnProperty("menu")&&!r.hasOwnProperty(l.data.label)&&l.data.menu){r[l.data.label]=!0;var o=l.data;o.link=l.data.link||l.name,"settings"===l.name&&(l.data.menu=a.is_superuser),-1!==["company","visitorsGroup","users","departments"].indexOf(l.name)&&(l.data.menu=a.is_superuser||a.is_staff),i.push(l.data)}}return i.sort(function(e,t){return e.order-t.order}),i}}]),angular.module("sidebar").controller("SidebarCtrl",["$state","config","sidebarService",function(e,t,a){this.name=t.name,this.items=a.get()}]),angular.module("ngVPrint",[]),angular.module("ngVPrint").directive("ngPrint",function(){function e(e,i,r){i.on("click",function(){var e=document.getElementById(r.printElementId);e&&t(e)}),window.onafterprint=function(){a.innerHTML=""}}function t(e){var t=e.cloneNode(!0);a.appendChild(t),window.print()}var a=document.getElementById("printSection");return a||(a=document.createElement("div"),a.id="printSection",document.body.appendChild(a)),{restrict:"A",link:e}}),angular.module("navbar",["core","config"]),angular.module("navbar").service("navbarService",["$state",function(e){this.get=function(){function t(e){return!e.abstract&&e.data&&e.data.label}function a(e){var t=!1,a=e.name.split(".")[0];return r[a]||(r[a]=t=!0),t}function i(e){return{name:e.name,label:e.data.label}}var r={},s=e.get();return s.filter(t).filter(a).map(i)}}]),angular.module("navbar").controller("NavbarCtrl",["$state","config","navbarService",function(e,t,a){this.name=t.name,this.items=a.get()}]),angular.module("mailer",[]),angular.module("mailer").service("mandrillService",["$http",function(e){function t(){var e=this;
e.to=[],this.setHTML=function(t){e.html=t},this.setText=function(t){e.text=t},this.setSubject=function(t){e.subject=t},this.setSender=function(t,a){e.from_email=t,e.from_name=a},this.addRecipients=function(t){e.to=e.to.concat(t)},this.addRecipient=function(t){e.to.push(t)}}var a={};this.setConfig=function(e){a=e},this.getConfig=function(){return a},this.Email=function(){return new t},this.send=function(t){var i={key:a.apiKey,message:t},r={method:"POST",url:a.apiUrl,data:i};return e(r)}}]),angular.module("mailer").service("mailerService",["mandrillService",function(e){var t={};this.setConfig=function(a){t=a,e.setConfig(t)},this.getConfig=function(){return t},this.Email=function(){return e.Email()},this.send=function(t){return e.send(t)}}]),angular.module("log").service("log",["$log","toastr","ERROR_MESSAGES","WARNING_MESSAGES","INFO_MESSAGES","SUCCESS_MESSAGES","$cookies",function(e,t,a,i,r,s,n){function l(e,a,i,r){angular.isObject(a)||(a={log:a,toastr:a});var s=i[e]||{message:""},n=[s.message];return r&&n.push(r),("error"===a.log||"warn"===a.log)&&n.push(s.remedy),n=n.join(". ")+".",t[a.toastr](n,s.title)}function o(e,t,a){var i=n.getObject("vi-persistent")||[];i.push({key:e,message:t,type:a}),n.putObject("vi-persistent",i)}function d(){for(var e=n.getObject("vi-persistent")||[],t=e.length;t--;){var a=e[t];c.hasOwnProperty(a.type)&&c[a.type](a.key,a.type,a.message)}n.remove("vi-persistent")}var c=this;c.error=function(e,i){return 1===arguments.length&&angular.isDefined(arguments[0])&&!a.hasOwnProperty(e)?t.error(arguments[0],"Error"):l(e,"error",a,i)},c.warning=function(e,t){var a={log:"warn",toastr:"warning"};return l(e,a,i,t)},c.info=function(e,t){return l(e,"info",r,t)},c.success=function(e,t){var a={log:"log",toastr:"success"};return l(e,a,s,t)},c.persist={error:function(e,t){return o(e,t,"error")},warn:function(e,t){return o(e,t,"warn")},success:function(e,t){return o(e,t,"success")},info:function(e,t){return o(e,t,"info")},load:d}}]),angular.module("form",["utility"]),angular.module("form").service("formService",["utility",function(e){var t=this;t.chunk=function(t,a){return a=a||2,e.chunk(t,a)},t.modelToForm=function(e,a,i){i=i||{};var r=[];for(var s in e)if(e.hasOwnProperty(s)&&!e[s].hasOwnProperty("hidden")||e[s].hasOwnProperty("hidden")&&e[s].hidden===!1){var n=i[s]||{};e[s].fieldName=e[s].fieldName||s,e[s].options=e[s].options||{},e[s].options=angular.merge({},e[s].options,n),r.push(e[s])}return t.chunk(r,a)},t.placeholder=function(e,t){var a=["Enter",e,"Here"].join(" ");return t||a},t.isEmpty=function(e){return void 0===e||""===e||null===e},t.phonePrefixes=function(){return["0701","0703","0705","0706","0708","0802","0803","0804","0805","0806","0807","0808","0809","0810","0811","0812","0813","0814","0815","0816","0817","0818","0819","0909","0902","0903","0905","Others"]},t.eliminateEmpty=function(e){var t={};for(var a in e)e.hasOwnProperty(a)&&e[a].length>0&&(t[a]=e[a]);return t},t.mergeErrorMsg=function(e,t){for(var a in t)t.hasOwnProperty(a)&&e.hasOwnProperty(a)?e[a]=e[a].concat(t[a]):t.hasOwnProperty(a)&&(e[a]=t[a]);return e}}]),angular.module("footer",["core","config"]),angular.module("footer").controller("FooterCtrl",["config",function(e){this.year=(new Date).getFullYear(),this.author=e.author,this.version=e.version}]),angular.module("eha-drag-n-drop",[]).directive("ehaDraggable",function(){return{scope:{dragStartHandler:"=dragStart"},link:function(e,t){console.log(e),t[0].addEventListener("dragstart",e.dragStartHandler,!1)}}}),angular.module("dialog",["dialogs.main"]).config(["$translateProvider",function(e){e.translations("en",{DIALOGS_YES:"Yes",DIALOGS_NO:"No"}),e.preferredLanguage("en"),e.useSanitizeValueStrategy("sanitize")}]),angular.module("dialog").service("dialog",["dialogs","$q",function(e,t){var a=this;a.confirm=function(a,i,r){var s=t.defer();i=i||"Confirmation Dialog",a=a||"",r=r||{};var n={size:"sm",animation:!0};return e.confirm(i,a,angular.merge({},r,n)).result.then(function(e){s.resolve(e)},function(e){s.reject(e)}),s.promise}}]),angular.module("db").service("pouchUtil",["$q",function(e){function t(e,t){function a(e){return e[t]}return e.rows.map(a)}this.key=function(e){return{startkey:e,endkey:e+"￰"}},this.pluckIDs=function(e){return t(e,"id")},this.pluckValues=function(e){return t(e,"value")},this.pluckDocs=function(e){return t(e,"doc")},this.rejectIfEmpty=function(t){return 0===t.length?e.reject({code:404,msg:"No document found"}):t}}]),angular.module("db").service("dbService",["config","driverService","utility","$rootScope",function(e,t,a,i){var r=this,s=t.get();r.get=function(e,t,a){return s.get(e,t,a)},r.all=function(e,t){return s.all(e,t)},r.save=function(e,t,i){return i=i||{},i.extra=i.hasOwnProperty("extra")?i.extra:!0,t.hasOwnProperty("_id")?i.extra&&(t.modified=(new Date).toJSON(),t.modified_by=r.currentUser()._id,t.created_by=t.created_by||r.currentUser()._id):(t._id=a.getUUID(),i.extra&&(t.created=(new Date).toJSON(),t.created_by=r.currentUser()._id)),s.put(e,t,i)},r.remove=function(e,t){return s.remove(e,t)},r.currentUser=function(){return i.currentUser},r.db=s,r.tables={APPOINTMENT:"appointment",APPOINTMENT_LOGS:"appointment-logs",COMPANIES:"company",DEPARTMENT:"department",ENTRANCE:"entrance",MESSENGER:"messenger",RESTRICTED_ITEMS:"restricted-items",USER:"user",VEHICLES:"vehicle",VISITOR:"visitor",VISITORS_TYPES:"visitor-types"}}]),angular.module("core",["ui.router","ui.bootstrap"]),angular.module("m.config",["config"]),angular.module("m.config").service("configService",["config","$window",function(e,t){function a(e){return void 0===e||""===e||null===e}function i(){var e=t.location.protocol,a=t.location.hostname,i=t.location.port;return[e,"//",a,":",i].join("")}var r=this;r.apiUrl=function(){var i=e.api.protocol||t.location.protocol;return a(e.api.url)?[i,"//",t.location.hostname,":",e.api.port,e.api.path].join(""):e.api.url},this.api={url:r.apiUrl(),baseUrl:i()}}]),angular.module("changes",[]),angular.module("changes").service("changesService",["dbService","$rootScope","$interval","config",function(e,t,a,i){var r="_changes",s=this;s.get=function(t,a){return e.get(r,t,a)},s.all=function(t){return e.all(r,t)},s.hasChanged=function(e,t){if(!e)return!1;var a={model:e,load:"changes",limit:1,order_by:"-created"};return t&&(a["last-checked"]=t),s.all(a).then(function(e){return e.count>0})},this.pollForChanges=function(e,r,n){t.resetTimer=a(function(){if(!e.inProgress){e.inProgress=!0;var t={};r.getState().then(function(e){return t=e||t,s.hasChanged(n,t.lastCheckTime)}).then(function(a){return a?void(e.hasOwnProperty("search")&&Object.keys(e.search)>0?e.startSearch():e.updateView()):(e.inProgress=!1,t.lastCheckTime=(new Date).getTime(),r.setState(t))}).catch(function(){return e.inProgress=!1,t.lastCheckTime=(new Date).getTime(),r.setState(t)})}},i.refreshIntervals||3e3)}}]),angular.module("vi.camera",["core"]),angular.module("vi.camera").service("cameraService",["$window",function(e){var t={},a=function(){return!!i()},i=function(){return navigator.getUserMedia=e.navigator.getUserMedia||e.navigator.webkitGetUserMedia||e.navigator.mozGetUserMedia||e.navigator.msGetUserMedia,navigator.getUserMedia};return{hasUserMedia:a(),getUserMedia:i,instance:t}}]),angular.module("vi.camera").directive("viCamera",["cameraService","$rootScope",function(e,t){return{restrict:"EA",replace:!0,transclude:!0,scope:{},controller:["$state","$scope","$timeout","$q",function(e,t,a,i){this.takeSnapshot=function(){var e=document.querySelector("canvas"),r=e.getContext("2d"),s=document.querySelector("video"),n=i.defer();return e.width=t.w,e.height=t.h,a(function(){r.fillRect(0,0,t.w,t.h),r.drawImage(s,0,0,t.w,t.h),n.resolve(e.toDataURL())},0),n.promise}}],template:'<div class="camera"><video class="camera" autoplay="" width="300px" /><div ng-transclude></div></div>',link:function(a,i,r){var s=r.width||280,n=r.height||300;if(e.hasUserMedia){var l=(e.getUserMedia(),document.querySelector("video")),o=function(a){e.instance.stream=a,t.$broadcast("camSuccess",{stream:a}),navigator.mozGetUserMedia?l.mozSrcObject=a:l.src=window.URL.createObjectURL(a),l.play()},d=function(e){console.error(e)};navigator.getUserMedia({video:{mandatory:{maxHeight:n,maxWidth:s}},audio:!1},o,d),a.w=s,a.h=n}}}}]).directive("cameraControlSnapshot",["$rootScope",function(e){return{restrict:"EA",require:"^viCamera",scope:!0,template:'<a class="btn btn-info" ng-model="formCtrl.viewModel.image" ng-change="takenSnapshot()" ng-click="takeSnapshot()"><i class="fa fa-eye"></i> Take Snapshot</a><button type="button" ng-disabled="!takenImg" style="margin-left: 10px" class="btn btn-danger" ng-click="closeCameraNow()"><i class="fa fa-times-circle-o"></i> Save Picture</button>',link:function(t,a,i,r){t.takeSnapshot=function(){r.takeSnapshot().then(function(t){e.takenImg=t,e.$broadcast("picTaken",{image:t})})}}}}]),angular.module("cache",["ngCookies"]),angular.module("cache").service("cache",["$cookies",function(e){var t=this,a="vi-cache-params";t.VIEW_KEY="",t.get=function(){var i=e.getObject(a)||{};return i.hasOwnProperty(t.VIEW_KEY)?i[t.VIEW_KEY]:{}},t.set=function(i,r){var s=e.getObject(a)||{};s=s.hasOwnProperty(t.VIEW_KEY)?s[t.VIEW_KEY]:{},s[i]=r;var n={};return n[t.VIEW_KEY]=s,e.putObject(a,n)},this.getView=function(){return t.VIEW_KEY}}]),angular.module("breadcrumbs",["core","config"]),angular.module("breadcrumbs").directive("viBreadcrumbs",["$log","breadcrumbService",function(){return{restrict:"AE",template:"this is the breadcrumbs",replace:!0,compile:function(){return function(){}}}}]),angular.module("breadcrumbs").service("breadcrumbsService",["$state","utility",function(e,t){function a(){for(var e={},t=r.length;t--;){var a=r[t];e[a.name]=a}return e}var i=this,r=e.get(),s=a();i.get=function(e){return s[e]||{}},i.all=function(){return s},i.getBreadCrumbs=function(e){var t=[],a=e.data||{};return"home"!==e.name&&e.hasOwnProperty("data")&&t.push({name:e.data.label,url:e.name,last:!0}),i.getParent(t,a.parent),t},i.getParent=function(e,a){var r=i.get(a),s=r.data||{};t.isEmptyObject(r)||(r.hasOwnProperty("data")&&e.unshift({name:r.data.label,url:r.data.link}),i.getParent(e,s.parent))}}]),angular.module("breadcrumbs").controller("BreadcrumbsCtrl",["$state","$rootScope","breadcrumbsService",function(e,t,a){var i=this;i.breadcrumbs=a.getBreadCrumbs(e.current),t.$on("$stateChangeStart",function(e,t){i.breadcrumbs=a.getBreadCrumbs(t)})}]),angular.module("auth",["core","utility","m.config"]),angular.module("auth").service("authService",["$q","$rootScope","log","dbService","$window","$cookies",function(e,t,a,i,r,s){var n=this;n.login=function(a,r){return i.db.post("login",{username:a,password:r}).then(function(a){if(!a)return e.reject(a);var i=a;return localforage.setItem("vi-token",i.token),localforage.setItem("vi-user",i.user),s.putObject("vi-token",i.token),t.currentUser=i.user,t.$broadcast("loggedIn",i),a})},n.logout=function(){localforage.removeItem("vi-token"),localforage.removeItem("vi-user"),t.currentUser={},t.token="",s.remove("vi-token"),r.location.href="#/login"},n.loggedIn=function(){return t.currentUser=t.currentUser||{},Object.keys(t.currentUser)>0},n.currentUser=function(){return t.currentUser},n.updateCurrentUser=function(e){var a=n.currentUser();if(e._id===a._id){for(var i in e)e.hasOwnProperty(i)&&(a[i]=e[i]);localforage.setItem("vi-user",a),t.currentUser=a}}}]),angular.module("acl",[]),angular.module("acl").service("aclService",["dbService","$q",function(e,t){function a(e,t){return e.is_superuser?{create:!0,remove:!0,update:!0,read:!0,"export":!0,tableSearch:!0}:!e.is_superuser&&e.is_staff?s.staff[t]||{}:s.members[t]||{}}var i=this,r="permissions",s={staff:{users:{create:!0,remove:!1,update:!0,read:!0,"export":!1,tableSearch:!0},visitors:{create:!0,remove:!1,update:!0,read:!0,"export":!1,tableSearch:!0},appointments:{create:!0,remove:!1,update:!0,read:!0,"export":!0,tableSearch:!0},settings:{create:!1,remove:!1,update:!1,read:!1}},members:{users:{create:!1,remove:!1,update:!1,read:!1,"export":!1,tableSearch:!1},visitors:{create:!0,remove:!1,update:!1,read:!1,"export":!1,tableSearch:!1},appointments:{create:!0,remove:!1,update:!0,read:!0,"export":!0,tableSearch:!0},settings:{create:!1,remove:!1,update:!1,read:!1}}};i.getPermissions=function(e,i){return e?t.when(a(e,i)):localforage.getItem("vi-user").then(function(e){return e=e||{},a(e,i)}).catch(function(){return{}})},i.get=function(t,a){return e.get(r,t,a)}}]),angular.module("visitorsGroup").config(["$stateProvider",function(e){e.state("visitorsGroup",{url:"/visitors-group",parent:"index","abstract":!0,templateUrl:"app/visitors-group/visitors-group.html",data:{label:"Visitor Categories",menu:!0,icon:"fa fa-sitemap",link:"visitorsGroup.all",order:5}})}]),angular.module("visitorsGroup").service("visitorsGroupService",["dbService","validationService","authService",function(e,t){var a=e.tables.VISITORS_TYPES,i=this;i.model={name:t.BASIC({required:!0,unique:!0,fieldName:"name",serviceInstance:i,label:"Group",formType:"text"}),black_listed:t.BASIC({required:!1,fieldName:"black_listed",serviceInstance:i,label:"Black Listed ?",formType:"checkbox"})},i.get=function(t){return e.get(a,t)},i.all=function(t,i){return e.all(a,t,i)},i.remove=function(t,i){return e.remove(a,t,i)},i.save=function(t,i){return e.save(a,t,i)},i.validateField=function(e,a,r){return t.validateField(i.model[a],e,r)},i.choices=function(){return i.all().then(function(e){for(var t=[],a=e.count;a--;){var i=e.results[a];t.push({value:i._id,text:i.name})}return t})},i.validate=function(e){return t.validateFields(i.model,e,e._id).then(function(e){return t.eliminateEmpty(angular.merge({},e))})}}]),angular.module("visitors").config(["$stateProvider",function(e){e.state("visitors",{url:"/visitors",parent:"index","abstract":!0,templateUrl:"app/visitors/visitors.html",data:{label:"Visitors",menu:!0,icon:"fa fa-street-view",link:"visitors.all",order:4},resolve:{permissions:["$rootScope","aclService",function(e,t){return t.getPermissions(e.currentUser,"visitors")}]}})}]),angular.module("visitors").service("visitorService",["dbService","validationService",function(e,t){function a(e){var t={};for(var a in e)e.hasOwnProperty(a)&&e[a].length>0&&(t[a]=e[a]);return t}var i="visitor",r=[i,"_cache"].join(""),s=this;s.model={first_name:t.BASIC({required:!0,fieldName:"first_name",pattern:/^[a-zA-Z]/,label:"First Name",formType:"text"}),last_name:t.BASIC({required:!0,fieldName:"last_name",pattern:/^[a-zA-Z]/,label:"Last Name",formType:"text"}),phone:t.BASIC({required:!0,unique:!0,fieldName:"phone",serviceInstance:s,label:"Phone",formType:"text",custom:!0,template:"app/visitors/form/partials/phone.html"}),email:t.EMAIL({required:!1,unique:!0,fieldName:"email",serviceInstance:s,label:"Email",formType:"text"}),gender:t.BASIC({required:!1,label:"Gender",fieldName:"gender",formType:"select",choices:[{value:"Male",text:"Male"},{value:"Female",text:"Female"}]}),"company.name":t.BASIC({required:!1,label:"Company Name",fieldName:"company.address",formType:"typeahead",custom:!0,template:"app/visitors/form/partials/company.html"}),"company.address":t.BASIC({required:!1,label:"Company Address",formType:"textarea",fieldName:"company.address"}),occupation:t.BASIC({required:!1,label:"Occupation",formType:"text",fieldName:"occupation"}),type:t.BASIC({required:!1,label:"Visitor Type",formType:"select",fieldName:"type"}),black_listed:t.BASIC({required:!1,label:"Black Listed?",formType:"checkbox",fieldName:"group"}),"phone.prefix":t.BASIC({required:!0,pattern:/^[0-9]/,label:"Phone Prefix",formType:"text",fieldName:"phone.prefix",hidden:!0}),"phone.suffix":t.BASIC({required:!0,checkLength:!0,maxLength:7,minLength:7,pattern:/^[0-9]/,label:"Phone Suffix",formType:"text",fieldName:"phone.suffix",hidden:!0})},s.get=function(t,a){return e.get(i,t,a)},s.all=function(t){return e.all(i,t)},s.remove=function(t,a){return e.remove(i,t,a)},s.save=function(t,a){return e.save(i,t,a)},s.validateField=function(e,a,i){return t.validateField(e,a,i)},s.validate=function(e){return t.validateFields(s.model,e,e._id).then(function(e){return a(angular.merge({},e))})},s.getPassCode=function(){},s.updateForPhone=function(e){return(e.hasOwnProperty("phone.prefix")||e.hasOwnProperty("phone.suffix"))&&(e.phone=[]),e},s.updateForPrefix=function(e,t){return e.hasOwnProperty("phone.prefix")&&"Others"===t&&(e["phone.prefix"]=[]),e},s.getPhone=function(e,t){var a=[];return s.isEmpty(e)||s.isEmpty(t)||("Others"!==e&&a.push(e),a.push(t)),a.join("")},s.recoverPhone=function(e){var t={};return e.length>7?(t["phone.prefix"]=e.slice(0,4),t["phone.suffix"]=e.slice(4,e.length)):e.length<=7&&(t["phone.prefix"]="Others",t["phone.suffix"]=e),t},s.isEmpty=t.isEmpty,this.setState=function(e){return localforage.setItem(r,e)},this.getState=function(){return localforage.getItem(r)}}]).service("visitorGroupsService",["dbService",function(e){var t=this,a="visitor-group",i=[a,"_cache"].join("");t.get=function(t,i){return e.get(a,t,i)},t.all=function(t){return e.all(a,t)},t.remove=function(t,i){return e.remove(a,t,i)},t.save=function(t,i){return e.save(a,t,i)},this.setState=function(e){return localforage.setItem(i,e)},this.getState=function(){return localforage.getItem(i)}}]),angular.module("users").config(["$stateProvider",function(e){e.state("users",{url:"/users",parent:"index","abstract":!0,templateUrl:"app/users/users.html",data:{label:"Users",menu:!0,icon:"fa fa-users",link:"users.all",order:2},resolve:{permissions:["$rootScope","aclService",function(e,t){return t.getPermissions(e.currentUser,"users")}]}})}]),angular.module("users").service("userService",["dbService","validationService","authService","$q","cache",function(e,t,a,i,r){function s(t){var a=i.defer(),r=[e.all(e.tables.APPOINTMENT,{host:t})];return i.all(r).then(function(e){var t=[];e[0].count>0&&t.push("User has been tied to appointments before, kindly delete the appointment"),0===t.length?a.resolve([]):a.reject(t.join("\n"))}).catch(function(e){a.reject(e)}),a.promise}var n="user",l=[n,"_cache"].join(""),o=this;o.model={username:t.USERNAME({required:!0,unique:!0,fieldName:"username",serviceInstance:o,label:"Username",formType:"text"}),email:t.EMAIL({required:!0,unique:!0,fieldName:"email",serviceInstance:o,label:"Email",formType:"text"}),password:t.BASIC({required:!0,fieldName:"password",serviceInstance:o,label:"Password",formType:"password"}),password2:t.BASIC({required:!0,fieldName:"password2",serviceInstance:o,label:"Confirm Password",formType:"password"}),first_name:t.BASIC({required:!0,fieldName:"first_name",pattern:"/^[a-zA-Z]/",label:"First Name",formType:"text"}),last_name:t.BASIC({required:!0,fieldName:"last_name",pattern:"/^[a-zA-Z]/",label:"Last Name",formType:"text"}),phone:t.BASIC({required:!0,unique:!0,fieldName:"phone",serviceInstance:o,label:"Phone",formType:"text"}),work_phone:t.BASIC({required:!1,unique:!0,fieldName:"work_phone",serviceInstance:o,label:"Work Phone",formType:"text"}),home_phone:t.BASIC({required:!1,unique:!0,fieldName:"home_phone",serviceInstance:o,label:"Home Phone",formType:"text"}),gender:t.BASIC({required:!1,label:"Gender",fieldName:"gender",formType:"select",choices:[{value:"Male",text:"Male"},{value:"Female",text:"Female"}]}),department:t.BASIC({required:!1,label:"Department",fieldName:"department",formType:"select",choices:[]}),is_superuser:t.BASIC({required:!1,label:"Super User",formType:"checkbox",fieldName:"is_superuser"}),is_staff:t.BASIC({required:!1,label:"Admin Access",formType:"checkbox",fieldName:"is_staff"}),is_active:t.BASIC({required:!1,label:"User Active",formType:"checkbox",fieldName:"is_active"})},o.get=function(t,a){return e.get(n,t,a)},o.all=function(t){return e.all(n,t)},o.remove=function(t,a){return s(t).then(function(){return e.remove(n,t,a)})},o.save=function(t,a){return e.save(n,t,a)},o.currentUser=function(){return a.currentUser()},o.updateCurrentUser=function(e){return a.updateCurrentUser(e)},o.validateField=function(e,a,i){return t.validateField(o.model[a],e,i)},o.validate=function(e){var a={};return e.hasOwnProperty("password")&&(""===e.password?a.password=["This field is required"]:e.password!==e.password2&&(a.password=["Passwords does not match"],a.password2=["Passwords does not match"])),t.validateFields(o.model,e,e._id).then(function(e){return t.eliminateEmpty(angular.merge({},e,a))})},o.validatePasswordMatch=function(e,a){var r=i.defer(),s={};return t.isEmpty(e)||t.isEmpty(a)||e===a||(s.password=["Passwords does not match"],s.password2=["Passwords does not match"]),r.resolve(s),r.promise},this.cache=function(){return r.VIEW_KEY=n,r},this.setState=function(e){return localforage.setItem(l,e)},this.getState=function(){return localforage.getItem(l)}}]),angular.module("settings",["core","db","utility","form"]),angular.module("settings").config(["$stateProvider",function(e){e.state("settings",{parent:"index",url:"/settings",templateUrl:"app/settings/settings.html",controller:"SettingsCtrl",controllerAs:"formCtrl",data:{label:"System Settings",menu:!0,link:"settings",icon:"fa fa-cogs",order:8},resolve:{permissions:["$rootScope","aclService",function(e,t){return t.getPermissions(e.currentUser,"users")}]}})}]),angular.module("settings").service("settingService",["validationService","dbService",function(e,t){var a=this,i="settings";a.ID=null,a.option={extra:!1},this.model={},a.get=function(e){return a.option=e||a.option,t.get(i,a.ID,a.option)},a.all=function(e){return a.option=e||a.option,t.all(i,a.option)},a.remove=function(){return t.remove(i,a.ID,a.option)},a.save=function(e,r){return e._id=a.ID,a.option=r||a.option,t.save(i,e,a.option)},a.validateField=function(t,i){return e.validateField(a.model[i],t)},a.validate=function(t){return e.validateFields(a.model,t,t._id).then(function(t){return e.eliminateEmpty(angular.merge({},t))})}}]).service("systemSettings",["validationService",function(e){var t=this;t.ID="system",t.COLUMN=1,t.model={dbSettingSource:e.BASIC({pattern:"/^[a-zA-Z]/",fieldName:"dbSource",serviceInstance:t,label:"Database Settings Source",formType:"select",choices:[{value:"environment",text:"Environment Variables"},{value:"system",text:"System Form"}]}),authSource:e.BASIC({pattern:"/^[a-zA-Z]/",fieldName:"authSource",serviceInstance:t,label:"Where to Authenticate Users",formType:"select",choices:[{value:"api",text:"System Database"},{value:"ldap",text:"LDAP Database"},{value:"any",text:"Any Available Source"}]}),refreshRate:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Page Refresh Rate",fieldName:"refreshRate",formType:"number",placeholder:"enter number in seconds"})},t.templateName="system.html",t.formHeader="System Settings"}]).service("emailSettings",["validationService",function(e){var t=this;t.ID="email",t.model={host:e.BASIC({pattern:"/^[a-zA-Z]/",fieldName:"host",serviceInstance:t,label:"Host",formType:"text"}),port:e.INT({fieldName:"port",serviceInstance:t,label:"Port",formType:"number"}),user:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Username",fieldName:"user",formType:"text"}),password:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Password",fieldName:"password",formType:"password"}),fromName:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Email From Name",fieldName:"fromName",formType:"text"}),replyTo:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Reply To Email",fieldName:"replyTo",formType:"text"}),use_tls:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Use TLS to send email",fieldName:"use_tls",formType:"checkbox","default":!0})},t.templateName="email.html",t.formHeader="Email Settings"}]).service("databaseSettings",["validationService",function(e){var t=this;t.ID="database",t.model={host:e.BASIC({pattern:"/^[a-zA-Z]/",fieldName:"host",serviceInstance:t,label:"Host",formType:"text"}),user:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Username",fieldName:"user",formType:"text"}),password:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Password",fieldName:"password",formType:"password"}),port:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Port",fieldName:"port",formType:"text"}),type:e.BASIC({pattern:"/^[a-zA-Z]/",label:"DB Server Type",fieldName:"type",formType:"select",choices:[{value:"mssql",text:"SQL Server"},{value:"postgres",text:"PostgresSQL"},{value:"sqlite",text:"Sqlite"},{value:"mysql",text:"MySQL"}]})},t.templateName="database.html",t.formHeader="Database Settings"}]).service("smsSettings",["validationService",function(e){var t=this;t.ID="sms",t.model={host:e.BASIC({pattern:"/^[a-zA-Z]/",fieldName:"host",serviceInstance:t,label:"Host",formType:"text"}),user:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Username",fieldName:"user",formType:"text"}),password:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Password",fieldName:"password",formType:"password"}),smsAPIURL:e.BASIC({pattern:"/^[a-zA-Z]/",label:"SMS API URL",fieldName:"smsAPIURL",formType:"text"})},t.templateName="sms.html",t.formHeader="SMS Settings"}]).service("ldapSettings",["validationService",function(e){var t=this;t.ID="ldap",t.model={host:e.BASIC({pattern:"/^[a-zA-Z]/",fieldName:"host",serviceInstance:t,label:"Host",formType:"text",placeholder:"IP or domain without ldap://"}),user:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Username",fieldName:"user",formType:"text"}),password:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Password",fieldName:"password",formType:"password"}),port:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Port",fieldName:"port",formType:"text",placeholder:"389"}),baseDN:e.BASIC({pattern:"/^[a-zA-Z]/",label:"Base Domain Name",fieldName:"baseDN",formType:"text",placeholder:"example.com"})},t.templateName="ldap.html",t.formHeader="LDAP Settings"}]),angular.module("settings").controller("SettingsCtrl",["settingService","formService","emailSettings","databaseSettings","ldapSettings","smsSettings","systemSettings","authService","$state","log",function(e,t,a,i,r,s,n,l,o,d){function c(){var a=f[p.active],i=a.COLUMN||u;p.templateName=a.templateName||"system.html",p.template=["app/settings/partials",p.templateName].join("/"),p.formHeader=a.formHeader,e.ID=a.ID,e.model=a.model,p.errorMsg={},p.viewModel={},p.column=12/i,p.model=a.model,p.form=t.modelToForm(p.model,u),e.get().then(function(e){p.viewModel=e}).catch(function(){})}var m=l.currentUser();m.is_superuser||m.is_staff||(d.error("unauthorizedAccess"),o.go("users.profile"));var p=this,u=2,f={email:a,database:i,sms:s,ldap:r,system:n};p.placeholder=t.placeholder,p.open=function(e){p.active=e||"system",c()},p.open(),e.all().then(function(){}).catch(function(){}),p.save=function(){p.isSaving=!0,e.save(p.viewModel).then(function(){p.isSaving=!1,d.success("entrySaved")}).catch(function(e){p.isSaving=!1,d.error("[object Object]"===Object.prototype.toString.call(e)&&e.hasOwnProperty("detail")?e.detail:"unknownError"),console.log(e)})}}]),angular.module("login",["core","config"]),angular.module("login").config(["$stateProvider",function(e){e.state("login",{url:"/login",views:{login:{templateUrl:"app/login/login.html",controller:"LoginCtrl",controllerAs:"loginCtrl"}}}).state("logout",{url:"logout",parent:"index",controller:["authService","log","$window",function(e,t,a){e.logout(),a.location.href="#/login",t.success("logoutSuccess")}]})}]),angular.module("login").service("loginService",["authService",function(e){var t=this;t.login=function(t,a){return e.login(t,a)}}]),angular.module("login").controller("LoginCtrl",["$state","config","loginService","$rootScope","log","$scope",function(e,t,a,i,r,s){function n(t){l.loginClicked=!1,s.loginMode=!1,r.success("authSuccess"),e.go(t.is_superuser||t.is_staff?"home":"users.profile")}var l=this;l.loginClicked=!1,i.loginMode=!0,l.credentials={},l.login=function(){l.loginClicked=!0,angular.isUndefined(l.credentials.username)&&angular.isUndefined(l.credentials.password)?(l.loginClicked=!1,r.error("authInvalid")):a.login(l.credentials.username,l.credentials.password).then(function(e){s.$on("serverResponse",function(e,t){s.data=t}),s.data&&401!==s.data.status?n(e.user):e&&e.detail?(l.loginClicked=!1,r.error(e.detail)):e&&e.token?n(e.user):(l.loginClicked=!1,r.error("authInvalid"))}).catch(function(e){l.loginClicked=!1,s.loginMode=!0,e&&e.detail?r.error(e.detail):e&&r.error("authInvalid")})}}]),angular.module("home",["core"]),angular.module("home").config(["$stateProvider",function(e){e.state("home",{parent:"index",url:"/",controller:"HomeCtrl",controllerAs:"homeCtrl",templateUrl:"app/home/home.html",data:{label:"Dashboard",menu:!0,icon:"fa fa-home",order:1},resolve:{permissions:["$rootScope","aclService",function(e,t){return t.getPermissions(e.currentUser,"users")}]}})}]),angular.module("home").service("homeService",["userService","appointmentService","visitorService",function(){}]),angular.module("viLogged",["ngSanitize","ngCookies","ngAnimate","core","angular-loading-bar","breadcrumbs","sidebar","navbar","footer","home","log","auth","login","users","changes","validation","departments","visitors","appointments","company","vi.camera","visitorsGroup","dialog","db","utility","ui.calendar","settings","cache","ngVPrint","ngCsv","acl","local"]).run(["$rootScope","$state","log","authService","$window","$interval",function(e,t,a,i,r,s){e.$on("loggedIn",function(t,a){e.currentUser=a.user}),e.$on("$stateChangeStart",function(){e.resetTimer&&s.cancel(e.resetTimer),"[object Object]"===Object.prototype.toString.call(e.currentUser)&&Object.keys(e.currentUser).length>0||localforage.getItem("vi-user").then(function(t){null!==t&&void 0!==t&&"[object Object]"===Object.prototype.toString.call(t)&&t._id?e.currentUser=t:i.logout()}).catch(function(){i.logout()})})}]).config(["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|chrome-extension):/)}]).config(["$httpProvider",function(e){e.interceptors.push(["$rootScope","$q",function(e,t){return{response:function(t){return e.$broadcast("serverResponse",t),t},responseError:function(a){return e.$broadcast("serverResponse",a),t.reject(a)}}}])}]).config(function(){localforage.config({name:"viLogged",version:1,size:4980736,storeName:"localStore",description:"local storage db for viLogged"})}).config(["cfpLoadingBarProvider",function(e){e.parentSelector="#site-loading-bar-custom",e.latencyThreshold=10}]),angular.module("viLogged").controller("HomeCtrl",["$window","log","utility","dialog","appointmentService","$rootScope","$state","$compile","$scope",function(e,t,a,i,r,s,n,l,o){function d(e){e=e||[];for(var t=[],a=e.length;a--;){var i=e[a];t.unshift({id:i._id,start:new Date([i.start_date,i.start_time].join(" ")),end:new Date([i.start_date,i.end_time].join(" ")),allDay:!1,title:[i.visitor.first_name,i.visitor.last_name,"and",i.host.first_name,i.host.last_name].join(" ")})}c.eventSources.push(t)}s.currentUser.is_superuser||s.currentUser.is_staff||n.go("users.profile");var c=this;c.eventSources=[],c.uiConfig={calendar:{height:390,editable:!0,header:{left:"month",center:"title",right:"today prev,next"},dayClick:function(e){console.log(e)},eventClick:function(e){n.go("appointments.detail",{_id:e.id})},eventDrop:function(e){console.log(e)},eventResize:function(e){console.log(e)},eventRender:function(e,t){t.attr({tooltip:e.title,"tooltip-append-to-body":!0}),l(t)(o)}}},c.getInProgress=function(){r.inProgress().then(function(e){c.inProgress=e.results})},c.getUpcoming=function(){r.upcoming().then(function(e){c.upcoming=e.results,d(c.upcoming)})},c.getAwaitingApproval=function(){r.awaitingApproval().then(function(e){c.awaitingApproval=e.results})},c.getInProgress(),c.getUpcoming(),c.getAwaitingApproval()}]),angular.module("departments").config(["$stateProvider",function(e){e.state("departments",{url:"/departments",parent:"index","abstract":!0,templateUrl:"app/departments/departments.html",data:{label:"Departments",menu:!0,icon:"fa fa-bank",link:"departments.all",order:6},resolve:{permissions:["$rootScope","aclService",function(e,t){return t.getPermissions(e.currentUser,"users")}]}})}]),angular.module("departments").service("departmentService",["dbService","validationService","$q",function(e,t,a){function i(t){var i=a.defer();return e.all(e.tables.USER,{department:t}).then(function(e){e.count>0?i.reject(["Department is still tied to some users","Kindly reassign Users to another department"].join("\n")):i.resolve("")
}).catch(function(e){i.reject(e)}),i.promise}var r="department",s=this;s.model={name:t.BASIC({pattern:"/^[a-zA-Z]/",required:!0,unique:!0,fieldName:"name",serviceInstance:s,label:"Department"}),floor:t.BASIC({required:!1,label:"Floor"})},s.choices=function(){return s.all().then(function(e){for(var t=[],a=e.count;a--;){var i=e.results[a];t.push({value:i._id,text:i.name})}return t})},s.get=function(t,a){return e.get(r,t,a)},s.all=function(t,a){return e.all(r,t,a)},s.remove=function(t,a){return i(t).then(function(){return e.remove(r,t,a)})},s.save=function(t,a){return e.save(r,t,a)},s.validateField=function(e,a){return t.validateField(s.model[a],e)},s.validate=function(e){return t.validateFields(s.model,e,e._id).then(function(e){return t.eliminateEmpty(angular.merge({},e))})}}]),angular.module("company").config(["$stateProvider",function(e){e.state("company",{url:"/company","abstract":!0,parent:"index",templateUrl:"app/company/company.html",data:{label:"Companies",menu:!0,order:7,link:"company.all",icon:"fa fa-building"},resolve:{permissions:["$rootScope","aclService",function(e,t){return t.getPermissions(e.currentUser,"users")}]}})}]),angular.module("company").service("companyService",["$q","dbService","validationService",function(e,t,a){var i="company",r=this;r.model={name:a.BASIC({pattern:"/^[a-zA-Z]/",required:!0,unique:!0,fieldName:"name",serviceInstance:r,label:"Company Name",formType:"text"}),address:a.BASIC({pattern:"/^[a-zA-Z]/",label:"Address",fieldName:"address",formType:"text"})},r.choices=function(){return r.all().then(function(e){for(var t=[],a=e.count;a--;){var i=e.results[a];t.push({value:i._id,text:i.name})}return t})},r.get=function(e,a){return t.get(i,e,a)},r.all=function(e){return t.all(i,e)},r.remove=function(e,a){return t.remove(i,e,a)},r.save=function(e,a){return t.save(i,e,a)},r.validateField=function(e,t){return a.validateField(r.model[t],e)},r.validate=function(e){return a.validateFields(r.model,e,e._id).then(function(e){return a.eliminateEmpty(angular.merge({},e))})}}]),angular.module("appointments").config(["$stateProvider",function(e){e.state("appointments",{url:"/appointments",parent:"index","abstract":!0,templateUrl:"app/appointments/appointments.html",data:{label:"Appointments",menu:!0,icon:"fa fa-newspaper-o",link:"appointments.all",order:3},resolve:{permissions:["$rootScope","aclService",function(e,t){return t.getPermissions(e.currentUser,"appointments")}]}})}]),angular.module("appointments").service("appointmentService",["dbService","validationService","cache","$filter","utility","messenger",function(e,t,a,i,r,s){function n(){return"BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//vilogged.com v1.0//EN\nBEGIN:VEVENT\nDTSTAMP:&&startDate&&\nORGANIZER;CN=&&visitorsName&&:MAILTO:&&visitorsMail&&\nSTATUS:CONFIRMED\nDTSTART:&&startDate&&\nDTEND:&&endDate&&\nSUMMARY:&&appointSummary&&\nDESCRIPTION:&&appointmentDesc&&\nX-ALT-DESC;FMTTYPE=text/html:&&appointmentDesc&&\nLOCATION:&&location&&\nEND:VEVENT\nEND:VCALENDAR"}var l=e.tables.APPOINTMENT,o=[l,"_cache"].join(""),d=this;d.model={visitor:t.BASIC({required:!0,fieldName:"visitor",label:"Visitor",formType:"typeahead-remote"}),host:t.BASIC({required:!0,fieldName:"host",label:"Host",formType:"typeahead-remote"}),start_date:t.BASIC({required:!0,fieldName:"start_date",pattern:"/^[a-zA-Z]/",label:"Appointment Start Date",formType:"date"}),end_date:t.BASIC({required:!0,fieldName:"end_date",pattern:"/^[a-zA-Z]/",label:"Appointment End Date",formType:"date"}),start_time:t.BASIC({required:!0,fieldName:"start_time",label:"Appointment Start time",formType:"time"}),end_time:t.BASIC({required:!0,fieldName:"end_time",serviceInstance:d,label:"Appointment End Time",formType:"time"}),representing:t.BASIC({required:!1,fieldName:"representing",serviceInstance:d,label:"You are Representing who?",formType:"text"}),purpose:t.BASIC({required:!1,label:"Purpose of Appointment",fieldName:"purpose",formType:"select",choices:[{value:"personal",text:"Personal"},{value:"official",text:"Official"},{value:"others",text:"Others"}]}),is_approved:t.BASIC({required:!1,label:"Approved",formType:"checkbox",fieldName:"is_approved",hidden:!0}),is_expired:t.BASIC({required:!1,label:"Expired",formType:"checkbox",fieldName:"is_expired",hidden:!0}),entrance:t.BASIC({required:!1,label:"Entrance",formType:"select",fieldName:"entrance"}),escort_required:t.BASIC({required:!1,label:"Escort Required ?",fieldName:"escort_required",formType:"checkbox"})},d.get=function(t,a){return e.get(l,t,a)},d.all=function(t){return e.all(l,t)},d.remove=function(t,a){return e.remove(l,t,a)},d.save=function(t,a){return e.save(l,t,a)},d.getLog=function(t,a){return e.get(e.tables.APPOINTMENT_LOGS,t,a)},d.allLogs=function(t){return e.all(e.tables.APPOINTMENT_LOGS,t)},d.saveLog=function(t,a){return e.save(e.tables.APPOINTMENT_LOGS,t,a)},d.validateField=function(e,a,i){return t.validateField(d.model[a],e,i)},d.validate=function(e){return t.validateFields(d.model,e,e._id).then(function(a){var i=d.dateTimeValidation(e.start_time,e.end_time,"time",e),r=d.dateTimeValidation(e.start_date,e.end_date,"date",e);return t.eliminateEmpty(angular.merge({},a,r,i))})},d.dateTimeValidation=function(e,a,r,s){var n={},l=[];if(t.isEmpty(e)||t.isEmpty(a)||(e=new Date(e),a=new Date(a),e.getTime()>a.getTime()?l.push("start "+r+" can't be greater than end time"):e.getTime()===a.getTime(),n["start_"+r]=l.length?l:[]),"personal"===s.purpose){var o=moment(new Date).weekday(),d=moment.weekdaysShort(o),c=i("date")(s.start_time,"HH:mm:ss").substr(0,2),m=i("date")(s.end_time,"HH:mm:ss").substr(0,2);"Tue"!==d&&"Thu"!==d?l.push("Personal visitors are only allowed on Tuesday and Thursday between 1pm and 3pm"):(13>c||c>15||m>15)&&l.push("Personal visits are only allowed between the hours of 1pm and 3pm on Tuesday and Thursday"),n.purpose=l.length?l:[]}return n},d.inProgress=function(e){e=e||{};var t=angular.merge({},{load:"in-progress"},e);return d.all(t)},d.upcoming=function(e){e=e||{};var t=angular.merge({},{load:"upcoming"},e);return d.all(t)},d.awaitingApproval=function(e){e=e||{};var t=angular.merge({},{load:"pending"},e);return d.all(t)},d.rejected=function(e){e=e||{};var t=angular.merge({},{load:"rejected"},e);return d.all(t)},d.status={REJECTED:0,UPCOMING:1,PENDING:2,EXPIRED:3,IN_PROGRESS:4},d.getStatus=function(e){if(e.hasOwnProperty("status")&&d.status.hasOwnProperty(e.status))return d.status[e.status];if(e.hasOwnProperty("status")&&null===e.status){var t=(new Date(e.start_date).getTime(),(new Date).getTime());new Date(e.end_date).getTime()>t}},this.cache=function(){return a.VIEW_KEY=l,a},this.setState=function(e){return localforage.setItem(o,e)},this.getState=function(){return localforage.getItem(o)},d.getOutlookCalender=function(e,t){var a=(e.start_date+" "+i("date")(e.start_time,"HH:mm:ss")).split(/[\s|:|-]/),s=(e.start_date+" "+i("date")(e.end_time,"HH:mm:ss")).split(/[\s|:|-]/),l=new Date(a[0],a[1]-1,a[2],a[3],a[4],a[5]).toJSON().replace(/[-|:]/g,"").split(".")[0]+"Z",o=new Date(s[0],s[1]-1,s[2],s[3],s[4],s[5]).toJSON().replace(/[-|:]/g,"").split(".")[0]+"Z",d={startDate:l,endDate:o,visitorsName:e.visitor.first_name,visitorsMail:e.visitor.email,appointSummary:"",appointmentDesc:"",location:t||""};return r.compileTemplate(d,n())},d.msgFields=function(e,t){var a={approval:{last_name:t.visitor.last_name,first_name:t.visitor.first_name,host_last_name:t.host.last_name,host_first_name:t.host.first_name,date:i("date")(t.start_date,"mediumDate"),start_time:i("date")(t.start_time,"HH:mm")},created:{last_name:t.host.last_name,first_name:t.host.first_name}};return a[e]},this.sms=function(e,t){var a,i,n=d.msgFields(t,e);return"approval"===t?(a=r.compileTemplate(n,s.messageTemplates.appointments.APPROVAL_SMS),i=e.visitor.phone):"created"===t&&(i=e.host.phone,a=r.compileTemplate(n,s.messageTemplates.appointments.CREATED_SMS)),s.send.sms({to:i,subject:"Appointment Created.",message:a})},this.email=function(e,t){var a,i,n=d.msgFields(t,e);return"approval"===t?(a=r.compileTemplate(n,s.messageTemplates.appointments.APPROVAL_EMAIL),i=e.visitor.email):"created"===t&&(i=e.host.email,a=r.compileTemplate(n,s.messageTemplates.appointments.CREATED_EMAIL)),s.send.sms({to:i,subject:"Appointment Created.",message:a})}}]),angular.module("viLogged").config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/"),e.state("root",{"abstract":!0,views:{root:{templateUrl:"app/index.html",controller:"IndexCtrl",controllerAs:"indexCtrl"}}}).state("index",{parent:"root","abstract":!0,views:{header:{templateUrl:"components/navbar/navbar.html",controller:"NavbarCtrl",controllerAs:"navbarCtrl"},sidenav:{templateUrl:"components/sidebar/sidebar.html",controller:"SidebarCtrl",controllerAs:"sidebarCtrl"},breadcrumbs:{templateUrl:"components/breadcrumbs/breadcrumbs.html",controller:"BreadcrumbsCtrl",controllerAs:"bcCtrl"},content:{},footer:{templateUrl:"components/footer/footer.html",controller:"FooterCtrl",controllerAs:"footerCtrl"}}})}]),angular.module("viLogged").controller("IndexCtrl",["$rootScope","log",function(e,t){function a(e){t.error("stateChangeError",e)}e.loginMode=!1,e.$on("$stateChangeError",a)}]),angular.module("viLogged").run(["$templateCache",function(e){e.put("app/index.html",'<div ui-view="header" id="navbar" class="navbar navbar-default navbar-collapse navbar-fixed-top"></div><div class="main-container" id="main-container"><div ui-view="sidenav" id="sidebar" class="sidebar responsive sidebar-fixed sidebar-scroll"></div><div class="main-content"><div class="main-content-inner"><div id="site-loading-bar-custom"></div><div ui-view="breadcrumbs"></div><div class="page-content"><div ui-view="content"><div ui-view=""></div></div></div></div></div></div>'),e.put("app/root.html","<ui-view></ui-view>"),e.put("app/appointments/appointments.html","<ui-view></ui-view>"),e.put("app/company/company.html","<ui-view></ui-view>"),e.put("app/departments/departments.html","<ui-view></ui-view>"),e.put("app/home/home.html",'<div class="row"><div class="12"></div></div><div class="row"><div class="col-md-8"><div class="row"><div class="col-sm-12"><div class="page-header">Appointments in Progress</div></div><div class="col-sm-12" ng-if="homeCtrl.inProgress.length === 0"><div class="alert alert-info">No data Found</div></div><div class="col-sm-12" ng-if="homeCtrl.inProgress.length > 0"><table class="table table-striped"><thead><tr><th>#</th><th>Host</th><th>Guest</th><th>Start Date</th><th>End Date</th><th>Start Time</th><th>End Time</th></tr></thead><tbody><tr ng-repeat="item in homeCtrl.inProgress"><td ng-bind="::$index+1"></td><td ng-bind="::item.host.last_name +\' \'+item.host.first_name"></td><td ng-bind="::item.visitor.last_name+\' \'+item.visitor.first_name"></td><td ng-bind="::item.start_date"></td><td ng-bind="::item.end_date"></td><td ng-bind="::item.start_time"></td><td ng-bind="::item.end_time"></td></tr></tbody></table></div></div><div class="row"><div class="col-sm-12"><div class="page-header">Upcoming Appointments</div></div><div class="col-sm-12" ng-if="homeCtrl.upcoming.length === 0"><div class="alert alert-info">No data Found</div></div><div class="col-sm-12" ng-if="homeCtrl.upcoming.length > 0"><table class="table table-striped"><thead><tr><th>#</th><th>Host</th><th>Guest</th><th>Start Date</th><th>End Date</th><th>Start Time</th><th>End Time</th></tr></thead><tbody><tr ng-repeat="item in homeCtrl.upcoming"><td ng-bind="::$index+1"></td><td ng-bind="::item.host.last_name +\' \'+item.host.first_name"></td><td ng-bind="::item.visitor.last_name+\' \'+item.visitor.first_name"></td><td ng-bind="::item.start_date"></td><td ng-bind="::item.end_date"></td><td ng-bind="::item.start_time"></td><td ng-bind="::item.end_time"></td></tr></tbody></table></div></div><div class="row"><div class="col-sm-12"><div class="page-header">Appointments Awaiting Approval</div></div><div class="col-sm-12" ng-if="homeCtrl.awaitingApproval.length === 0"><div class="alert alert-info">No data Found</div></div><div class="col-sm-12" ng-if="homeCtrl.awaitingApproval.length > 0"><table class="table table-striped"><thead><tr><th>#</th><th>Host</th><th>Guest</th><th>Start Date</th><th>End Date</th><th>Start Time</th><th>End Time</th></tr></thead><tbody><tr ng-repeat="item in homeCtrl.awaitingApproval"><td ng-bind="::$index+1"></td><td ng-bind="::item.host.last_name +\' \'+item.host.first_name"></td><td ng-bind="::item.visitor.last_name+\' \'+item.visitor.first_name"></td><td ng-bind="::item.start_date"></td><td ng-bind="::item.end_date"></td><td ng-bind="::item.start_time"></td><td ng-bind="::item.end_time"></td></tr></tbody></table></div></div></div><div class="col-md-4"><div ng-include="\'app/home/partials/calendar.html\'"></div></div></div>'),e.put("app/login/login.html",'<style>\n  #loading-bar .bar {\n    background: #000000;\n    top: 0;\n    left: 0;\n    height: 5px;\n  }\n</style><div id="site-loading-bar-custom"></div><div class="main-container"><div class="main-content"><div class="row"><div class="col-sm-10 col-sm-offset-1"><div class="login-container"><div class="center"></div><div class="space-6"></div><div class="position-relative"><div id="login-box" class="login-box visible widget-box no-border"><div class="widget-body"><div class="widget-main"><h4 class="header blue lighter bigger"><i class="ace-icon fa fa-coffee green"></i> Please Enter Your Information</h4><div class="space-6"></div><form ng-submit="loginCtrl.login()"><fieldset><label class="block clearfix"><span class="block input-icon input-icon-right"><input ng-model="loginCtrl.credentials.username" type="text" class="form-control" placeholder="Username"> <i class="ace-icon fa fa-user"></i></span></label> <label class="block clearfix"><span class="block input-icon input-icon-right"><input ng-model="loginCtrl.credentials.password" type="password" class="form-control" placeholder="Password"> <i class="ace-icon fa fa-lock"></i></span></label><div class="space"></div><div class="clearfix"><label class="inline"><input type="checkbox" class="ace"> <span class="lbl">Remember Me</span></label> <button ng-disabled="loginCtrl.loginClicked" type="submit" class="width-35 pull-right btn btn-sm btn-primary"><span ng-hide="loginCtrl.loginClicked"><i class="ace-icon fa fa-key"></i> <span class="bigger-110">Login</span></span> <span ng-show="loginCtrl.loginClicked"><i class="ace-icon fa fa-spinner fa-spin"></i> <span class="bigger-110">Login</span></span></button></div><div class="space-4"></div></fieldset></form><div class="space-6"></div></div></div></div></div></div></div></div></div></div>'),e.put("app/settings/settings.html",'<div class="row"><div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix">Systems Settings<div class="pull-right" ng-include="\'components/form/partials/elements/submit-small.html\'"></div></h1></div><form><div class="form-group"><div class="row"><div class="col-sm-12"><div id="recent-box" class="widget-box transparent"><div class="widget-header"><h4 class="widget-title lighter smaller"></h4><div class="widget-toolbar no-border"><ul id="recent-tab" class="nav nav-tabs"><li class="pointer" ng-class="{\'active\': formCtrl.active === \'database\'}" ng-click="formCtrl.open(\'database\')"><a data-toggle="tab">Database</a></li><li class="pointer" ng-class="{\'active\': formCtrl.active === \'ldap\'}" ng-click="formCtrl.open(\'ldap\')"><a data-toggle="tab">LDAP</a></li><li class="pointer" ng-class="{\'active\': formCtrl.active === \'sms\'}" ng-click="formCtrl.open(\'sms\')"><a data-toggle="tab">SMS</a></li><li class="pointer" ng-class="{\'active\': formCtrl.active === \'email\'}" ng-click="formCtrl.open(\'email\')"><a data-toggle="tab">Email</a></li><li class="pointer" ng-class="{\'active\': formCtrl.active === \'system\'}" ng-click="formCtrl.open(\'system\')"><a data-toggle="tab">System</a></li></ul></div></div><div class="widget-body" ng-include="formCtrl.template"></div></div></div></div></div><div class="row"><div class="col-sm-12" ng-include="\'components/form/partials/elements/submit.html\'"></div></div></form></div></div>'),e.put("app/users/users.html","<ui-view></ui-view>"),e.put("app/visitors/visitors.html","<ui-view></ui-view>"),e.put("app/visitors-group/visitors-group.html","<ui-view></ui-view>"),e.put("components/breadcrumbs/breadcrumbs.html",'<div id="breadcrumbs" class="breadcrumbs"><ul class="breadcrumb"><li><i class="ace-icon fa fa-home home-icon"></i> <a ui-sref="home">Home</a></li><li class="active" ng-repeat="item in bcCtrl.breadcrumbs"><a ng-if="!item.last" ui-sref="{{item.url}}" ng-bind="item.name"></a> <span ng-if="item.last" ng-bind="item.name"></span></li></ul></div>'),e.put("components/footer/footer.html",'<div class="footer"><div class="footer-inner"><div class="footer-content"></div></div></div>'),e.put("components/navbar/navbar.html",'<div class="navbar-container" id="navbar-container"><button type="button" class="navbar-toggle menu-toggler pull-left" id="menu-toggler" data-target="#sidebar"><span class="sr-only">Toggle sidebar</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button><div class="navbar-header pull-left"><a ui-sref="home" class="navbar-brand">viLogged VMS</a></div><div class="navbar-buttons navbar-header pull-right" role="navigation"><ul class="nav vi-nav"><li class="light-blue"><a data-toggle="dropdown" class="dropdown-toggle pointer"><img style="height: 32px; width: 32px;" ng-if="currentUser.image" class="nav-user-photo" ng-src="{{ currentUser.image }}"> <img ng-show="!currentUser.image" class="nav-user-photo" src="../../assets/avatars/avatar2.png"> <span class="user-info" ng-bind="currentUser.first_name || currentUser.last_name || currentUser.username"></span> <i class="ace-icon fa fa-caret-down"></i></a><ul class="user-menu dropdown-menu-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close"><li><a ui-sref="users.changePassword"><i class="ace-icon fa fa-cog"></i> Change Password</a></li><li><a ui-sref="users.profile"><i class="ace-icon fa fa-user"></i> Profile</a></li><li class="divider"></li><li><a ui-sref="logout"><i class="ace-icon fa fa-power-off"></i> Logout</a></li></ul></li></ul></div></div>'),e.put("components/sidebar/sidebar.html",'<ul class="nav nav-list"><li ng-repeat="item in sidebarCtrl.items"><a ui-sref="{{ item.link }}" ng-if="item.menu === true"><i class="menu-icon {{ item.icon }}"></i> <span class="menu-text" ng-bind="item.label"></span></a></li></ul>'),e.put("app/appointments/all/all.html",'<div class="page-header"><div class="row"><div class="col-sm-7"><h1>Appointments</h1></div><div class="col-sm-5"><div class="input-group"><input class="form-control" ng-model="allCtrl.q" ng-change="allCtrl.searchPage()"> <span ng-click="allCtrl.searchPage()" class="input-group-addon">Search</span></div></div></div></div><div class="row"><div class="col-sm-12"><div class="custom-form-save clearfix"><a class="btn btn-primary pull-right" ui-sref="appointments.add"><i class="fa fa-plus-circle"></i> Create</a> <a class="btn btn-primary pull-right margin-10-r pointer" ng-csv="allCtrl.getList()" csv-header="allCtrl.header" lazy-load="true" filename="{{ allCtrl.filename }}"><i class="fa fa-file-excel-o"></i> Export</a></div></div></div><div class="row" ng-if="allCtrl.items.length === 0 && !allCtrl.is_active_search"><div class="col-sm-12"><div class="alert alert-info"><i class="fa fa-exclamation-circle"></i> No Data Found</div></div></div><div class="row" ng-if="allCtrl.items.length > 0 || allCtrl.is_active_search"><div class="col-xs-12"><div class="row"><div class="col-xs-12"><table id="simple-table" class="table table-striped table-bordered table-hover"><thead><tr><th>#</th><th><span class="pointer block" ng-click="allCtrl.updateView(\'host\')">Host <span ng-show="allCtrl.orderByColumn[\'host\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'host\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'host\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'visitor\')">Visitor <span ng-show="allCtrl.orderByColumn[\'visitor\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'visitor\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'visitor\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'start_date\')">Start Date <span ng-show="allCtrl.orderByColumn[\'start_date\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'start_date\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'start_date\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'end_date\')">End Date <span ng-show="allCtrl.orderByColumn[\'end_date\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'end_date\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'end_date\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'start_time\')">Start Time <span ng-show="allCtrl.orderByColumn[\'start_time\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'start_time\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'start_time\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'end_time\')">End Time <span ng-show="allCtrl.orderByColumn[\'end_time\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'end_time\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'end_time\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'is_approved\')">Status <span ng-show="allCtrl.orderByColumn[\'is_approved\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'is_approved\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'is_approved\'].reverse}"></span></span></th><th>Acions</th></tr><tr><th></th><th ng-repeat="filterField in allCtrl.filterFields"><input ng-if="filterField.filter && (!filterField.type || filterField.type === \'text\')" class="form-control" ng-model="allCtrl.search[filterField.field]" ng-change="allCtrl.startSearch(filterField.field)"> <span ng-if="filterField.filter && filterField.type === \'date\'" class="form-control" uib-datepicker-popup="" ng-model="allCtrl.search[filterField.field]" ng-change="allCtrl.startSearch(filterField.field)" is-open="allCtrl.date[filterField.field].opened" ng-click="allCtrl.date[filterField.field].open($event)" close-text="Close"><i class="fa fa-calendar"></i></span></th><th><button class="btn btn-primary btn-xs pointer" ng-click="allCtrl.clear()">Clear Search</button></th></tr></thead><tbody><tr ng-repeat="item in allCtrl.items"><td ng-bind="$index + 1 + ((allCtrl.pagination.currentPage-1) * allCtrl.pagination.itemsPerPage)"></td><td><a ui-sref="appointments.detail({_id: item._id})" ng-bind="item.host.last_name+\' \'+item.host.first_name"></a></td><td ng-bind="item.visitor.last_name+\' \'+item.visitor.first_name"></td><td ng-bind="item.start_date"></td><td ng-bind="item.end_date"></td><td ng-bind="item.start_time"></td><td ng-bind="item.end_time"></td><td><span class="label" ng-class="{ \'label-success arrowed-in arrowed-in-right\': [allCtrl.status.UPCOMING, allCtrl.status.IN_PROGRESS].indexOf(item.status) >= 0, \'label-danger arrowed-right arrowed-in\': [allCtrl.status.REJECTED, allCtrl.status.EXPIRED].indexOf(item.status) >= 0, \'label-default arrowed arrowed-right\': item.status === allCtrl.status.PENDING }"><span ng-if="item.status === allCtrl.status.UPCOMING">Upcoming</span> <span ng-if="item.status === allCtrl.status.REJECTED">Rejected</span> <span ng-if="item.status === allCtrl.status.PENDING">Pending</span> <span ng-if="item.status === allCtrl.status.EXPIRED">Expired</span> <span ng-if="item.status === allCtrl.status.IN_PROGRESS">In Progress</span></span></td><td><div class="hidden-sm hidden-xs action-buttons"><a ng-if="item.status === allCtrl.status.UPCOMING" class="badge badge-info" ui-sref="appointments.checkin({_id: item._id})">Checkin</a> <a ng-if="item.status === allCtrl.status.IN_PROGRESS" class="badge badge-info" ui-sref="appointments.checkin({_id: item._id})">Check out</a> <a ui-sref="appointments.detail({_id: item._id})" class="blue"><i class="ace-icon fa fa-eye bigger-130"></i></a> <a ui-sref="appointments.edit({_id: item._id})" class="green"><i class="ace-icon fa fa-pencil bigger-130"></i></a> <span ng-click="allCtrl.remove(item._id)" class="red pointer" ng-if="allCtrl.permissions.remove"><i class="ace-icon fa fa-trash-o bigger-130"></i></span></div><div class="hidden-md hidden-lg"><div class="inline pos-rel"><button data-position="auto" data-toggle="dropdown" class="btn btn-minier btn-yellow dropdown-toggle" aria-expanded="false"><i class="ace-icon fa fa-caret-down icon-only bigger-120"></i></button><ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close" style=""><li><a title="" data-rel="tooltip" class="tooltip-info" ui-sref="appointments.detail({_id: item._id})" data-original-title="View"><span class="blue"><i class="ace-icon fa fa-search-plus bigger-120"></i></span></a></li><li><a title="" data-rel="tooltip" class="tooltip-success" ui-sref="appointments.edit({_id: item._id})" data-original-title="Edit"><span class="green"><i class="ace-icon fa fa-pencil-square-o bigger-120"></i></span></a></li><li><a title="" data-rel="tooltip" class="tooltip-error" ui-sref="appointments.remove({_id: item._id})" data-original-title="Delete"><span class="red"><i class="ace-icon fa fa-trash-o bigger-120"></i></span></a></li></ul></div></div></td></tr></tbody></table></div></div><div class="row"><div class="col-xs-11"><uib-pagination total-items="allCtrl.pagination.totalItems" ng-model="allCtrl.pagination.currentPage" max-size="allCtrl.pagination.maxSize" class="allCtrl.pagination-sm pull-right" boundary-links="true" rotate="false" ng-change="allCtrl.updateView()" items-per-page="allCtrl.pagination.itemsPerPage" num-pages="allCtrl.pagination.numPages"></uib-pagination></div><div class="col-xs-1"><label class="pull-right"><select ng-model="allCtrl.pagination.itemsPerPage" ng-change="allCtrl.updateView()" class="form-control input-sm"><option ng-selected="allCtrl.pagination.itemsPerPage === 10" value="10">10</option><option ng-selected="allCtrl.pagination.itemsPerPage === 25" value="25">25</option><option ng-selected="allCtrl.pagination.itemsPerPage === 50" value="50">50</option><option ng-selected="allCtrl.pagination.itemsPerPage === 100" value="100">100</option></select></label></div></div></div></div>'),e.put("app/appointments/form/form.html",'<div class="row"><div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix">Appointment Form<div class="pull-right" ng-include="\'components/form/partials/elements/submit-small.html\'"></div></h1></div><form><div class="form-group" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'" ng-if="!elem.custom"></div><div class="custom-form" ng-if="elem.custom" ng-include="elem.template"></div></div></div></div><div class="form-group"><div class="row"><div class="col-sm-12"><h3 class="page-header">Team Members (Visitor Group)</h3><div style="margin-bottom: 10px;" ng-include="\'app/appointments/form/partials/groups.html\'"></div><table class="table table-striped" ng-if="formCtrl.teamMembers.length > 0"><thead><tr><th>#</th><th>Last Name</th><th>First Name</th><th>Phone</th><th>Action</th></tr></thead><tbody><tr ng-repeat="item in formCtrl.teamMembers"><td ng-bind="$index + 1"></td><td ng-bind="item.last_name"></td><td ng-bind="item.first_name"></td><td ng-bind="item.phone"></td><td ng-click="formCtrl.removeMember(item)"><span><i class="ace-icon fa fa-trash bigger-130"></i></span></td></tr></tbody></table></div></div></div><div class="row"><div class="col-sm-12" ng-include="\'components/form/partials/elements/submit.html\'"></div></div></form></div></div>'),e.put("app/appointments/logs/checkin.html",'<div class="space-6"></div><div class="well well-sm clearfix"><div class="infobox infobox-blue"><div class="infobox-icon"><i class="ace-icon fa fa-calendar"></i></div><div class="infobox-data"><span class="infobox-data-content">Arrival Date</span><div class="infobox-content"><span ng-bind="::logCtrl.item.start_date"></span></div></div></div><div class="infobox infobox-brown"><div class="infobox-icon"><i class="ace-icon fa fa-clock-o"></i></div><div class="infobox-data"><span class="infobox-data-content">Arrival Time</span><div class="infobox-content"><span ng-bind="::logCtrl.item.start_time"></span></div></div></div><div class="infobox infobox-brown"><div class="infobox-icon"><i class="ace-icon fa fa-clock-o"></i></div><div class="infobox-data"><span class="infobox-data-content">Departure Time</span><div class="infobox-content"><span ng-bind="::logCtrl.item.end_time"></span></div></div></div><button class="infobox infobox-blue3 pointer" ng-click="logCtrl.printLabel()"><div class="infobox-icon"><i class="ace-icon fa fa-print"></i></div><div class="infobox-data"><span class="infobox-data-content"><h3>Print Badge</h3></span></div></button> <button class="btn btn-success pull-right" ng-click="logCtrl.checkIn(item)" ng-if="logCtrl.item.status === logCtrl.status.UPCOMING"><i class="fa fa-check-square-o"></i> Check In</button> <button class="btn btn-success pull-right" ng-click="logCtrl.checkOut(item)" ng-if="logCtrl.item.status === logCtrl.status.IN_PROGRESS"><i class="fa fa-check-square-o"></i> Check Out</button><div class="pull-right" ng-if="logCtrl.item.status === logCtrl.status.PENDING || logCtrl.item.status === logCtrl.status.REJECTED"><button class="btn btn-success" type="button" ng-click="logCtrl.updateApp(logCtrl.item, \'true\')"><i class="fa fa-check"></i> Approve</button> <button class="btn btn-danger" type="button" ng-click="logCtrl.updateApp(logCtrl.item, \'false\')"><i class="fa fa-times"></i> Reject</button></div></div><div class="hr hr12 dotted"></div><div class="row"><div class="col-sm-6"><div class="row"><div class="col-sm-12"><h3 class="page-header">Host Detail</h3></div></div><div class="row"><div class="col-sm-12"><div><div id="user-profile-1" class="user-profile row"><div class="col-sm-4 center"><div><span class="profile-picture"><img ng-if="!logCtrl.item.host.image" id="avatar" class="editable img-responsive" alt="" src="../assets/avatars/profile-pic.jpg"> <img style="max-height: 250px" ng-if="logCtrl.item.host.image" id="avatar" class="editable img-responsive" alt="" ng-src="{{ logCtrl.item.host.image }}"></span><div class="space-4"></div></div><div class="space-6"></div></div><div class="col-sm-8"><div class="profile-user-info profile-user-info-striped"><div class="profile-info-row"><div class="profile-info-name">First Name</div><div class="profile-info-value"><span class="editable" id="first_name" ng-bind="logCtrl.item.host.first_name"></span></div></div><div class="profile-info-row"><div class="profile-info-name">Last Name</div><div class="profile-info-value"><span class="editable" id="last_name" ng-bind="logCtrl.item.host.last_name"></span></div></div><div class="profile-info-row"><div class="profile-info-name">Username</div><div class="profile-info-value"><span class="editable" id="username" ng-bind="logCtrl.item.host.username"></span></div></div><div class="profile-info-row"><div class="profile-info-name">Email</div><div class="profile-info-value" ng-bind="logCtrl.item.host.email"></div></div><div class="profile-info-row"><div class="profile-info-name">Gender</div><div class="profile-info-value" ng-bind="logCtrl.item.host.gender"></div></div><div class="profile-info-row"><div class="profile-info-name">Joined</div><div class="profile-info-value"><span class="editable" id="signup" ng-bind="logCtrl.item.host.date_joined | date:\'yyyy/MM/dd\'">2010/06/20</span></div></div></div><div class="space-20"></div><div class="space-6"></div></div></div></div></div></div></div><div class="col-sm-6"><div class="row"><div class="col-sm-12"><h3 class="page-header">Guest Detail</h3></div></div><div class="row"><div class="col-sm-12"><div><div id="user-profile-1" class="user-profile row"><div class="col-sm-4 center"><div><span class="profile-picture"><img ng-if="!logCtrl.item.visitor.image" id="avatar" class="editable img-responsive" alt="" src="../assets/avatars/profile-pic.jpg"> <img style="max-height: 180px" ng-if="logCtrl.item.visitor.image" id="avatar" class="editable img-responsive" alt="" ng-src="{{ logCtrl.item.visitor.image }}"></span><div class="space-4"></div></div><div class="space-6"></div></div><div class="col-sm-8"><div class="profile-user-info profile-user-info-striped"><div class="profile-info-row"><div class="profile-info-name">First Name</div><div class="profile-info-value"><span class="editable" id="first_name" ng-bind="logCtrl.item.visitor.first_name"></span></div></div><div class="profile-info-row"><div class="profile-info-name">Last Name</div><div class="profile-info-value"><span class="editable" id="last_name" ng-bind="logCtrl.item.visitor.last_name"></span></div></div><div class="profile-info-row"><div class="profile-info-name">Email</div><div class="profile-info-value" ng-bind="logCtrl.item.visitor.email"></div></div><div class="profile-info-row"><div class="profile-info-name">Gender</div><div class="profile-info-value" ng-bind="logCtrl.item.visitor.gender"></div></div><div class="profile-info-row"><div class="profile-info-name">Created</div><div class="profile-info-value"><span class="editable" id="signup" ng-bind="logCtrl.item.visitor.created | date:\'yyyy/MM/dd\'">2010/06/20</span></div></div><div class="profile-info-row"><div class="profile-info-name"></div><div class="profile-info-value"><span class="editable" id="signup">&nbsp;</span></div></div></div><div class="space-20"></div><div class="space-6"></div></div></div></div></div></div></div></div><div class="row" ng-if="logCtrl.teamMembers.length > 0"><div class="col-sm-12"><h3 class="page-header">Team Members (Visitor Group)</h3><table class="table table-striped"><thead><tr><th>#</th><th>Last Name</th><th>First Name</th><th>Phone</th></tr></thead><tbody><tr ng-repeat="item in logCtrl.teamMembers"><td ng-bind="$index + 1"></td><td ng-bind="item.last_name"></td><td ng-bind="item.first_name"></td><td ng-bind="item.phone"></td></tr></tbody></table></div></div>'),e.put("app/appointments/profile/profile.html",'<div class="page-header"><h1>User Profile Page</h1></div><div class="row"><div class="col-xs-12"><div><div id="user-profile-1" class="user-profile row"><div class="col-xs-12 col-sm-3 center"><div><span class="profile-picture"><img style="max-height: 200px; max-width: 180px;" ng-if="!profileCtrl.profile.image" id="avatar" class="editable img-responsive" alt="" src="../assets/avatars/profile-pic.jpg"> <img ng-if="profileCtrl.profile.image" id="avatar" class="editable img-responsive" alt="" ng-src="profileCtrl.profile.image"></span><div class="space-4"></div><div class="width-80 label label-info label-xlg arrowed-in arrowed-in-right"><div class="inline position-relative"><a ui-sref="users.edit({_id: profileCtrl.profile._id})" class="user-title-label dropdown-toggle" data-toggle="dropdown"><i class="ace-icon fa fa-circle light-green"></i> &nbsp; <span class="white" ng-bind="profileCtrl.profile.last_name+ \' \'+ profileCtrl.profile.first_name"></span></a></div></div></div><div class="space-6"></div><div class="hr hr12 dotted"></div></div><div class="col-xs-12 col-sm-9"><div class="profile-user-info profile-user-info-striped"><div class="profile-info-row"><div class="profile-info-name">Username</div><div class="profile-info-value"><span class="editable" id="username" ng-bind="profileCtrl.profile.username"></span></div></div><div class="profile-info-row"><div class="profile-info-name">Email</div><div class="profile-info-value" ng-bind="profileCtrl.profile.email"></div></div><div class="profile-info-row"><div class="profile-info-name">Gender</div><div class="profile-info-value" ng-bind="profileCtrl.profile.gender"></div></div><div class="profile-info-row"><div class="profile-info-name">Joined</div><div class="profile-info-value"><span class="editable" id="signup" ng-bind="profileCtrl.profile.date_joined | date:\'yyyy/MM/dd\'">2010/06/20</span></div></div><div class="profile-info-row"><div class="profile-info-name">Last Online</div><div class="profile-info-value"><span class="editable" id="login">3 hours ago</span></div></div></div><div class="space-20"></div><div class="space-6"></div></div></div></div></div></div>'),e.put("app/company/all/all.html",'<div class="page-header"><h1>Companies</h1></div><div class="row"><div class="col-sm-12"><div class="custom-form-save clearfix"><a class="btn btn-primary pull-right" ui-sref="company.add"><i class="fa fa-plus-circle"></i> Create</a></div></div></div><div class="row"><div class="col-xs-12"><div class="row"><div class="col-xs-12"><table id="simple-table" class="table table-striped table-bordered table-hover"><thead><tr><th>#</th><th><span class="pointer block" ng-click="allCtrl.updateView(\'name\')">Company <span ng-show="allCtrl.orderByColumn[\'name\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'name\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'name\'].reverse}"></span></span></th><th>Address</th><th><span class="pointer block" ng-click="allCtrl.updateView(\'created\')">Date Created <span ng-show="allCtrl.orderByColumn[\'created\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'created\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'created\'].reverse}"></span></span></th><th>Acions</th></tr></thead><tbody><tr ng-repeat="item in allCtrl.companies"><td ng-bind="$index + 1 + ((allCtrl.pagination.currentPage-1) * allCtrl.pagination.itemsPerPage)"></td><td ng-bind="::item.name"></td><td ng-bind="::item.address"></td><td ng-bind="::item.created | date:\'yyyy-MM-dd\'"></td><td><div class="hidden-sm hidden-xs action-buttons"><a ui-sref="company.edit({_id: item._id})" class="green"><i class="ace-icon fa fa-pencil bigger-130"></i></a> <a ui-sref="company.remove({_id: item._id})" class="red"><i class="ace-icon fa fa-trash-o bigger-130"></i></a></div><div class="hidden-md hidden-lg"><div class="inline pos-rel"><button data-position="auto" data-toggle="dropdown" class="btn btn-minier btn-yellow dropdown-toggle" aria-expanded="false"><i class="ace-icon fa fa-caret-down icon-only bigger-120"></i></button><ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close" style=""><li><a title="" data-rel="tooltip" class="tooltip-success" ui-sref="company.edit({_id: item._id})" data-original-title="Edit"><span class="green"><i class="ace-icon fa fa-pencil-square-o bigger-120"></i></span></a></li><li><a title="" data-rel="tooltip" class="tooltip-error" ui-sref="company.remove({_id: item._id})" data-original-title="Delete"><span class="red"><i class="ace-icon fa fa-trash-o bigger-120"></i></span></a></li></ul></div></div></td></tr></tbody></table></div></div><div class="row"><div class="col-xs-11"><uib-pagination total-items="allCtrl.pagination.totalItems" ng-model="allCtrl.pagination.currentPage" max-size="allCtrl.pagination.maxSize" class="allCtrl.pagination-sm pull-right" boundary-links="true" rotate="false" ng-change="allCtrl.updateView()" items-per-page="allCtrl.pagination.itemsPerPage" num-pages="allCtrl.pagination.numPages"></uib-pagination></div><div class="col-xs-1"><label class="pull-right"><select ng-model="allCtrl.pagination.itemsPerPage" ng-change="allCtrl.updateView()" class="form-control input-sm"><option ng-selected="allCtrl.pagination.itemsPerPage === 10" value="10">10</option><option ng-selected="allCtrl.pagination.itemsPerPage === 25" value="25">25</option><option ng-selected="allCtrl.pagination.itemsPerPage === 50" value="50">50</option><option ng-selected="allCtrl.pagination.itemsPerPage === 100" value="100">100</option></select></label></div></div></div></div>'),e.put("app/company/form/form.html",'<div class="row"><div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix">Company<div class="pull-right" ng-include="\'components/form/partials/elements/submit-small.html\'"></div></h1></div><form><div class="form-grou" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'"></div></div></div></div><div class="row"><div class="col-sm-12" ng-include="\'components/form/partials/elements/submit.html\'"></div></div></form></div></div>'),e.put("app/departments/all/all.html",'<div class="page-header"><h1>Departments</h1></div><div class="row"><div class="col-sm-12"><div class="custom-form-save clearfix"><a class="btn btn-primary pull-right" ui-sref="departments.add"><i class="fa fa-plus-circle"></i> Create</a></div></div></div><div class="row"><div class="col-xs-12"><div class="row"><div class="col-xs-12"><table id="simple-table" class="table table-striped table-bordered table-hover"><thead><tr><th>#</th><th><span class="pointer block" ng-click="allCtrl.updateView(\'name\')">Department <span ng-show="allCtrl.orderByColumn[\'name\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'name\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'name\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'floor\')">Floor <span ng-show="allCtrl.orderByColumn[\'floor\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'floor\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'floor\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'created\')">Date Created <span ng-show="allCtrl.orderByColumn[\'created\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'created\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'created\'].reverse}"></span></span></th><th>Acions</th></tr></thead><tbody><tr ng-repeat="item in allCtrl.items"><td ng-bind="$index + 1 + ((allCtrl.pagination.currentPage-1) * allCtrl.pagination.itemsPerPage)"></td><td ng-bind="::item.name"></td><td ng-bind="::item.floor"></td><td ng-bind="::item.created | date:\'yyyy-MM-dd\'"></td><td><div class="hidden-sm hidden-xs action-buttons"><a ui-sref="departments.edit({_id: item._id})" class="green"><i class="ace-icon fa fa-pencil bigger-130"></i></a> <a ng-click="allCtrl.remove(item._id)" class="red pointer"><i class="ace-icon fa fa-trash-o bigger-130"></i></a></div><div class="hidden-md hidden-lg"><div class="inline pos-rel"><button data-position="auto" data-toggle="dropdown" class="btn btn-minier btn-yellow dropdown-toggle" aria-expanded="false"><i class="ace-icon fa fa-caret-down icon-only bigger-120"></i></button><ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close" style=""><li><a title="" data-rel="tooltip" class="tooltip-info" ui-sref="departments.detail({_id: item._id})" data-original-title="View"><span class="blue"><i class="ace-icon fa fa-search-plus bigger-120"></i></span></a></li><li><a title="" data-rel="tooltip" class="tooltip-success" ui-sref="departments.edit({_id: item._id})" data-original-title="Edit"><span class="green"><i class="ace-icon fa fa-pencil-square-o bigger-120"></i></span></a></li><li><a title="" data-rel="tooltip" class="tooltip-error" ng-click="allCtrl.remove(item._id)" data-original-title="Delete"><span class="red"><i class="ace-icon fa fa-trash-o bigger-120"></i></span></a></li></ul></div></div></td></tr></tbody></table></div></div><div class="row"><div class="col-xs-11"><uib-pagination total-items="allCtrl.pagination.totalItems" ng-model="allCtrl.pagination.currentPage" max-size="allCtrl.pagination.maxSize" class="allCtrl.pagination-sm pull-right" boundary-links="true" rotate="false" ng-change="allCtrl.updateView()" items-per-page="allCtrl.pagination.itemsPerPage" num-pages="allCtrl.pagination.numPages"></uib-pagination></div><div class="col-xs-1"><label class="pull-right"><select ng-model="allCtrl.pagination.itemsPerPage" ng-change="allCtrl.updateView()" class="form-control input-sm"><option ng-selected="allCtrl.pagination.itemsPerPage === 10" value="10">10</option><option ng-selected="allCtrl.pagination.itemsPerPage === 25" value="25">25</option><option ng-selected="allCtrl.pagination.itemsPerPage === 50" value="50">50</option><option ng-selected="allCtrl.pagination.itemsPerPage === 100" value="100">100</option></select></label></div></div></div></div>'),e.put("app/departments/profile/profile.html",'<div class="page-header"><h1>User Profile Page</h1></div><div class="row"><div class="col-xs-12"><div><div id="user-profile-1" class="user-profile row"><div class="col-xs-12 col-sm-3 center"><div><span class="profile-picture"><img style="max-height: 200px; max-width: 180px;" ng-if="!profileCtrl.profile.image" id="avatar" class="editable img-responsive" alt="" src="../assets/avatars/profile-pic.jpg"> <img ng-if="profileCtrl.profile.image" id="avatar" class="editable img-responsive" alt="" ng-src="profileCtrl.profile.image"></span><div class="space-4"></div><div class="width-80 label label-info label-xlg arrowed-in arrowed-in-right"><div class="inline position-relative"><a ui-sref="users.edit({_id: profileCtrl.profile._id})" class="user-title-label dropdown-toggle" data-toggle="dropdown"><i class="ace-icon fa fa-circle light-green"></i> &nbsp; <span class="white" ng-bind="profileCtrl.profile.last_name+ \' \'+ profileCtrl.profile.first_name"></span></a></div></div></div><div class="space-6"></div><div class="hr hr12 dotted"></div></div><div class="col-xs-12 col-sm-9"><div class="profile-user-info profile-user-info-striped"><div class="profile-info-row"><div class="profile-info-name">Username</div><div class="profile-info-value"><span class="editable" id="username" ng-bind="profileCtrl.profile.username"></span></div></div><div class="profile-info-row"><div class="profile-info-name">Email</div><div class="profile-info-value" ng-bind="profileCtrl.profile.email"></div></div><div class="profile-info-row"><div class="profile-info-name">Gender</div><div class="profile-info-value" ng-bind="profileCtrl.profile.gender"></div></div><div class="profile-info-row"><div class="profile-info-name">Joined</div><div class="profile-info-value"><span class="editable" id="signup" ng-bind="profileCtrl.profile.date_joined | date:\'yyyy/MM/dd\'">2010/06/20</span></div></div><div class="profile-info-row"><div class="profile-info-name">Last Online</div><div class="profile-info-value"><span class="editable" id="login">3 hours ago</span></div></div></div><div class="space-20"></div><div class="widget-box transparent"><div class="widget-header widget-header-small"><h4 class="widget-title blue smaller"><i class="ace-icon fa fa-rss orange"></i> Recent Activities</h4><div class="widget-toolbar action-buttons"><a href="#" data-action="reload"><i class="ace-icon fa fa-refresh blue"></i></a> &nbsp; <a href="#" class="pink"><i class="ace-icon fa fa-trash-o"></i></a></div></div><div class="widget-body"><div class="widget-main padding-8"></div></div></div><div class="space-6"></div></div></div></div></div></div>'),e.put("app/departments/form/form.html",'<div class="row"><div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix">Department Profile Form<div class="pull-right" ng-include="\'components/form/partials/elements/submit-small.html\'"></div></h1></div><form><div class="form-grou" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'"></div></div></div></div><div class="row"><div class="col-sm-12" ng-include="\'components/form/partials/elements/submit.html\'"></div></div></form></div></div>'),e.put("app/home/partials/calendar.html",'<div ui-calendar="homeCtrl.uiConfig.calendar" ng-model="homeCtrl.eventSources"></div>'),e.put("app/settings/partials/database.html",'<div class="row"><div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix" ng-bind="formCtrl.formHeader"></h1></div><form><div class="form-grou" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'"></div></div></div></div></form></div></div>'),e.put("app/settings/partials/email.html",'<div class="row"><div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix" ng-bind="formCtrl.formHeader"></h1></div><form><div class="form-grou" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'"></div></div></div></div></form></div></div>'),e.put("app/settings/partials/ldap.html",'<div class="row"><div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix" ng-bind="formCtrl.formHeader"></h1></div><form><div class="form-grou" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'"></div></div></div></div></form></div></div>'),e.put("app/settings/partials/sms.html",'<div class="row"><div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix" ng-bind="formCtrl.formHeader"></h1></div><form><div class="form-grou" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'"></div></div></div></div></form></div></div>'),e.put("app/settings/partials/system.html",'<div class="row"><div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix" ng-bind="formCtrl.formHeader"></h1></div><form><div class="form-grou" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'"></div></div></div></div></form></div></div>'),e.put("app/users/all/all.html",'<div class="page-header"><div class="row"><div class="col-sm-7"><h1>Users</h1></div><div class="col-sm-5"><div class="input-group"><input class="form-control" ng-model="allCtrl.q" ng-change="allCtrl.searchPage()"> <span ng-click="allCtrl.searchPage()" class="input-group-addon">Search</span></div></div></div></div><div class="row"><div class="col-sm-12"><div class="custom-form-save clearfix"><a class="btn btn-primary pull-right" ui-sref="users.add" ng-if="allCtrl.permissions.create"><i class="fa fa-plus-circle"></i> Create</a> <a class="btn btn-primary pull-right margin-10-r pointer" ng-csv="allCtrl.getList()" csv-header="allCtrl.header" lazy-load="true" filename="{{ allCtrl.filename }}"><i class="fa fa-file-excel-o"></i> Export</a></div></div></div><div class="row"><div class="col-xs-12"><div class="row"><div class="col-xs-12"><table id="simple-table" class="table table-striped table-bordered table-hover"><thead><tr><th>#</th><th><span class="pointer block" ng-click="allCtrl.updateView(\'first_name\')">First Name <span ng-show="allCtrl.orderByColumn[\'first_name\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'first_name\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'first_name\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'last_name\')">Last Name <span ng-show="allCtrl.orderByColumn[\'last_name\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'last_name\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'last_name\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'username\')">Username <span ng-show="allCtrl.orderByColumn[\'username\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'username\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'username\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'email\')">Email <span ng-show="allCtrl.orderByColumn[\'email\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'email\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'email\'].reverse}"></span></span></th><th>Department</th><th><span class="pointer block" ng-click="allCtrl.updateView(\'date_joined\')">Date Created <span ng-show="allCtrl.orderByColumn[\'date_joined\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'date_joined\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'date_joined\'].reverse}"></span></span></th><th>Acions</th></tr><tr><th></th><th ng-repeat="filterField in allCtrl.filterFields"><input ng-if="filterField.filter" class="form-control" ng-model="allCtrl.search[filterField.field]" ng-change="allCtrl.startSearch(filterField.field)"></th><th><button class="btn btn-primary btn-xs pointer" ng-click="allCtrl.clear()">Clear Search</button></th></tr></thead><tbody><tr ng-repeat="item in allCtrl.items"><td ng-bind="$index + 1 + ((allCtrl.pagination.currentPage-1) * allCtrl.pagination.itemsPerPage)"></td><td ng-bind="item.first_name"></td><td ng-bind="item.last_name"></td><td ng-bind="item.username"></td><td ng-bind="item.email"></td><td ng-bind="item.department.name"></td><td ng-bind="item.date_joined | date:\'yyyy-MM-dd\'"></td><td><div class="hidden-sm hidden-xs action-buttons" ng-if="allCtrl.permissions.read"><a ui-sref="users.detail({_id: item._id})" class="blue"><i class="ace-icon fa fa-eye bigger-130"></i></a> <a ui-sref="users.edit({_id: item._id})" class="green" ng-if="allCtrl.permissions.update"><i class="ace-icon fa fa-pencil bigger-130"></i></a> <a ng-click="allCtrl.remove(item._id)" class="red pointer" ng-if="allCtrl.permissions.remove"><i class="ace-icon fa fa-trash-o bigger-130"></i></a></div><div class="hidden-md hidden-lg"><div class="inline pos-rel"><button data-position="auto" data-toggle="dropdown" class="btn btn-minier btn-yellow dropdown-toggle" aria-expanded="false"><i class="ace-icon fa fa-caret-down icon-only bigger-120"></i></button><ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close" style=""><li><a title="" data-rel="tooltip" class="tooltip-info" ui-sref="users.detail({_id: item._id})" data-original-title="View"><span class="blue"><i class="ace-icon fa fa-search-plus bigger-120"></i></span></a></li><li><a title="" data-rel="tooltip" class="tooltip-success" ui-sref="users.edit({_id: item._id})" data-original-title="Edit"><span class="green"><i class="ace-icon fa fa-pencil-square-o bigger-120"></i></span></a></li><li><a title="" data-rel="tooltip" class="tooltip-error" ng-click="allCtrl.remove(item._id)" data-original-title="Delete"><span class="red"><i class="ace-icon fa fa-trash-o bigger-120"></i></span></a></li></ul></div></div></td></tr></tbody></table></div></div><div class="row"><div class="col-xs-11"><uib-pagination total-items="allCtrl.pagination.totalItems" ng-model="allCtrl.pagination.currentPage" max-size="allCtrl.pagination.maxSize" class="allCtrl.pagination-sm pull-right" boundary-links="true" rotate="false" ng-change="allCtrl.updateView()" items-per-page="allCtrl.pagination.itemsPerPage" num-pages="allCtrl.pagination.numPages"></uib-pagination></div><div class="col-xs-1"><label class="pull-right"><select ng-model="allCtrl.pagination.itemsPerPage" ng-change="allCtrl.updateView()" class="form-control input-sm"><option ng-selected="allCtrl.pagination.itemsPerPage === 10" value="10">10</option><option ng-selected="allCtrl.pagination.itemsPerPage === 25" value="25">25</option><option ng-selected="allCtrl.pagination.itemsPerPage === 50" value="50">50</option><option ng-selected="allCtrl.pagination.itemsPerPage === 100" value="100">100</option></select></label></div></div></div></div>'),e.put("app/users/form/form.html",'<div class="row"><div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix">User Profile Form<div class="pull-right" ng-include="\'components/form/partials/elements/submit-small.html\'"></div></h1></div><form><div ng-if="!formCtrl.passwordMode" ng-include="\'app/visitors/form/partials/image.html\'"></div><div class="form-group" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'"></div></div></div></div><div class="row"><div class="col-sm-12" ng-include="\'components/form/partials/elements/submit.html\'"></div></div></form></div></div>'),e.put("app/users/profile/profile.html",'<div class="page-header"><h1>User Profile Page</h1></div><div class="row"><div class="col-xs-12"><div><div id="user-profile-1" class="user-profile row"><div class="col-xs-12 col-sm-3 center"><div><span class="profile-picture"><img style="max-height: 200px; max-width: 180px;" ng-if="!profileCtrl.profile.image" id="avatar" class="editable img-responsive" alt="" src="../assets/avatars/profile-pic.jpg"> <img ng-if="profileCtrl.profile.image" id="avatar" class="editable img-responsive" alt="" ng-src="{{ profileCtrl.profile.image }}"></span><div class="space-4"></div><div class="width-80 label label-info label-xlg arrowed-in arrowed-in-right"><div class="inline position-relative"><a ui-sref="users.edit({_id: profileCtrl.profile._id})" class="user-title-label dropdown-toggle" data-toggle="dropdown"><i class="ace-icon fa fa-circle light-green"></i> &nbsp; <span class="white" ng-bind="profileCtrl.profile.last_name+ \' \'+ profileCtrl.profile.first_name"></span></a></div></div></div><div class="space-6"></div><div class="hr hr12 dotted"></div></div><div class="col-xs-12 col-sm-9"><div class="profile-user-info profile-user-info-striped"><div class="profile-info-row"><div class="profile-info-name">Username</div><div class="profile-info-value"><span class="editable" id="username" ng-bind="profileCtrl.profile.username"></span></div></div><div class="profile-info-row"><div class="profile-info-name">Email</div><div class="profile-info-value" ng-bind="profileCtrl.profile.email"></div></div><div class="profile-info-row"><div class="profile-info-name">Gender</div><div class="profile-info-value" ng-bind="profileCtrl.profile.gender"></div></div><div class="profile-info-row"><div class="profile-info-name">Department</div><div class="profile-info-value" ng-bind="profileCtrl.profile.department.name"></div></div><div class="profile-info-row"><div class="profile-info-name">Joined</div><div class="profile-info-value"><span class="editable" id="signup" ng-bind="profileCtrl.profile.date_joined | date:\'yyyy/MM/dd\'">2010/06/20</span></div></div><div class="profile-info-row"><div class="profile-info-name">Last Online</div><div class="profile-info-value"><span class="editable" id="login" ng-bind="::profileCtrl.timeSince(profileCtrl.profile.last_login)"></span></div></div></div><div class="space-20"></div><div class="widget-box transparent"><div class="widget-header widget-header-small"><h4 class="widget-title blue smaller"><i class="ace-icon fa fa-rss orange"></i> Recent Activities</h4><div class="widget-toolbar action-buttons"></div></div><div class="widget-body"><div class="widget-main padding-8"><div class="row"><div class="col-sm-12"><div class="page-header"><i class="fa fa-calendar-o"></i> Appointments Awaiting Approval</div></div><div class="col-sm-12" ng-if="profileCtrl.awaitingApproval.length === 0"><div class="alert alert-info">No data Found</div></div><div class="col-sm-12" ng-if="profileCtrl.awaitingApproval.length > 0"><table class="table table-striped"><thead><tr><th>#</th><th>Guest</th><th>Start Date</th><th>End Date</th><th>Start Time</th><th>End Time</th><th>Action</th></tr></thead><tbody><tr ng-repeat="item in profileCtrl.awaitingApproval"><td ng-bind="::$index+1"></td><td ng-bind="::item.visitor.last_name+\' \'+item.visitor.first_name"></td><td ng-bind="::item.start_date"></td><td ng-bind="::item.end_date"></td><td ng-bind="::item.start_time"></td><td ng-bind="::item.end_time"></td><td><button class="btn btn-success btn-sm" type="button" ng-click="profileCtrl.updateApp(item, \'true\')"><i class="fa fa-check"></i></button> <button class="btn btn-danger btn-sm" type="button" ng-click="profileCtrl.updateApp(item, \'false\')"><i class="fa fa-times"></i></button></td></tr></tbody></table></div></div><div class="row"><div class="col-sm-12"><div class="page-header"><i class="fa fa-calendar-o"></i> Rejected Appointments</div></div><div class="col-sm-12" ng-if="profileCtrl.rejected.length === 0"><div class="alert alert-info">No data Found</div></div><div class="col-sm-12" ng-if="profileCtrl.rejected.length > 0"><table class="table table-striped"><thead><tr><th>#</th><th>Guest</th><th>Start Date</th><th>End Date</th><th>Start Time</th><th>End Time</th><th>Action</th></tr></thead><tbody><tr ng-repeat="item in profileCtrl.rejected"><td ng-bind="::$index+1"></td><td ng-bind="::item.visitor.last_name+\' \'+item.visitor.first_name"></td><td ng-bind="::item.start_date"></td><td ng-bind="::item.end_date"></td><td ng-bind="::item.start_time"></td><td ng-bind="::item.end_time"></td><td><button class="btn btn-success btn-sm" type="button" ng-click="profileCtrl.updateApp(item, \'true\')"><i class="fa fa-check"></i></button></td></tr></tbody></table></div></div><div class="row"><div class="col-sm-12"><div class="page-header"><i class="fa fa-calendar-o"></i> Appointments in Progress</div></div><div class="col-sm-12" ng-if="profileCtrl.inProgress.length === 0"><div class="alert alert-info">No data Found</div></div><div class="col-sm-12" ng-if="profileCtrl.inProgress.length > 0"><table class="table table-striped"><thead><tr><th>#</th><th>Guest</th><th>Start Date</th><th>End Date</th><th>Start Time</th><th>End Time</th></tr></thead><tbody><tr ng-repeat="item in profileCtrl.inProgress"><td ng-bind="::$index+1"></td><td ng-bind="::item.visitor.last_name+\' \'+item.visitor.first_name"></td><td ng-bind="::item.start_date"></td><td ng-bind="::item.end_date"></td><td ng-bind="::item.start_time"></td><td ng-bind="::item.end_time"></td></tr></tbody></table></div></div><div class="row"><div class="col-sm-12"><div class="page-header"><i class="fa fa-calendar-o"></i> Upcoming Appointments</div></div><div class="col-sm-12" ng-if="profileCtrl.upcoming.length === 0"><div class="alert alert-info">No data Found</div></div><div class="col-sm-12" ng-if="profileCtrl.upcoming.length > 0"><table class="table table-striped"><thead><tr><th>#</th><th>Guest</th><th>Start Date</th><th>End Date</th><th>Start Time</th><th>End Time</th></tr></thead><tbody><tr ng-repeat="item in profileCtrl.upcoming"><td ng-bind="::$index+1"></td><td ng-bind="::item.visitor.last_name+\' \'+item.visitor.first_name"></td><td ng-bind="::item.start_date"></td><td ng-bind="::item.end_date"></td><td ng-bind="::item.start_time"></td><td ng-bind="::item.end_time"></td></tr></tbody></table></div></div></div></div></div><div class="space-6"></div></div></div></div></div></div>'),e.put("app/visitors/all/all.html",'<div class="page-header"><div class="row"><div class="col-sm-7"><h1>Visitors</h1></div><div class="col-sm-5"><div class="input-group"><input class="form-control" ng-model="allCtrl.q" ng-change="allCtrl.searchPage()"> <span ng-click="allCtrl.searchPage()" class="input-group-addon">Search</span></div></div></div></div><div class="row"><div class="col-sm-12"><div class="custom-form-save clearfix"><a class="btn btn-primary pull-right" ui-sref="visitors.add"><i class="fa fa-plus-circle"></i> Create</a> <a class="btn btn-primary pull-right margin-10-r pointer" ng-csv="allCtrl.getList()" csv-header="allCtrl.header" lazy-load="true" filename="{{ allCtrl.filename }}"><i class="fa fa-file-excel-o"></i> Export</a></div></div></div><div class="row"><div class="col-xs-12"><div class="row"><div class="col-xs-12"><table id="simple-table" class="table table-striped table-bordered table-hover"><thead><tr><th>#</th><th><span class="pointer block" ng-click="allCtrl.updateView(\'first_name\')">First Name <span ng-show="allCtrl.orderByColumn[\'first_name\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'first_name\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'first_name\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'last_name\')">Last Name <span ng-show="allCtrl.orderByColumn[\'last_name\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'last_name\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'last_name\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'email\')">Email <span ng-show="allCtrl.orderByColumn[\'email\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'email\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'email\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'phone\')">Phone <span ng-show="allCtrl.orderByColumn[\'phone\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'phone\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'phone\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'type.name\')">Type <span ng-show="allCtrl.orderByColumn[\'type.name\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'type.name\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'type.name\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'company.name\')">Company <span ng-show="allCtrl.orderByColumn[\'company.name\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'company.name\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'company.name\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'created\')">Date Created <span ng-show="allCtrl.orderByColumn[\'created\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'created\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'created\'].reverse}"></span></span></th><th>Acions</th></tr><tr><th></th><th ng-repeat="filterField in allCtrl.filterFields"><input ng-if="filterField.filter && (!filterField.type || filterField.type === \'text\')" class="form-control" ng-model="allCtrl.search[filterField.field]" ng-change="allCtrl.startSearch(filterField.field)"> <span ng-if="filterField.filter && filterField.type === \'date\'" class="form-control" uib-datepicker-popup="" ng-model="allCtrl.search[filterField.field]" ng-change="allCtrl.startSearch(filterField.field)" is-open="allCtrl.date[filterField.field].opened" ng-click="allCtrl.date[filterField.field].open($event)" close-text="Close"><i class="fa fa-calendar"></i></span></th><th><button class="btn btn-primary btn-xs pointer" ng-click="allCtrl.clear()">Clear Search</button></th></tr></thead><tbody><tr ng-repeat="visitor in allCtrl.items"><td ng-bind="$index + 1 + ((allCtrl.pagination.currentPage-1) * allCtrl.pagination.itemsPerPage)"></td><td ng-bind="visitor.first_name"></td><td ng-bind="visitor.last_name"></td><td ng-bind="visitor.email"></td><td ng-bind="visitor.phone"></td><td ng-bind="visitor.type.name"></td><td ng-bind="visitor.company.name"></td><td ng-bind="visitor.created | date:\'yyyy-MM-dd\'"></td><td><div class="hidden-sm hidden-xs action-buttons"><a class="text-danger" title="Create Appointment" ui-sref="appointments.add({visitor: visitor._id})"><i class="ace-icon fa fa-calendar"></i></a> <a ui-sref="visitors.detail({_id: visitor._id})" class="blue"><i class="ace-icon fa fa-eye bigger-130"></i></a> <a ui-sref="visitors.edit({_id: visitor._id})" class="green"><i class="ace-icon fa fa-pencil bigger-130"></i></a> <span ng-click="allCtrl.remove(visitor._id)" class="red pointer"><i class="ace-icon fa fa-trash-o bigger-130"></i></span></div><div class="hidden-md hidden-lg"><div class="inline pos-rel"><button data-position="auto" data-toggle="dropdown" class="btn btn-minier btn-yellow dropdown-toggle" aria-expanded="false"><i class="ace-icon fa fa-caret-down icon-only bigger-120"></i></button><ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close" style=""><li><a title="" data-rel="tooltip" class="tooltip-info" ui-sref="visitors.detail({_id: visitor._id})" data-original-title="View"><span class="blue"><i class="ace-icon fa fa-search-plus bigger-120"></i></span></a></li><li><a title="" data-rel="tooltip" class="tooltip-success" ui-sref="visitors.edit({_id: visitor._id})" data-original-title="Edit"><span class="green"><i class="ace-icon fa fa-pencil-square-o bigger-120"></i></span></a></li><li><a title="" data-rel="tooltip" class="tooltip-error" ui-sref="visitors.remove({_id: visitor._id})" data-original-title="Delete"><span class="red"><i class="ace-icon fa fa-trash-o bigger-120"></i></span></a></li></ul></div></div></td></tr></tbody></table></div></div><div class="row"><div class="col-xs-11"><uib-pagination total-items="allCtrl.pagination.totalItems" ng-model="allCtrl.pagination.currentPage" max-size="allCtrl.pagination.maxSize" class="allCtrl.pagination-sm pull-right" boundary-links="true" rotate="false" ng-change="allCtrl.updateView()" items-per-page="allCtrl.pagination.itemsPerPage" num-pages="allCtrl.pagination.numPages"></uib-pagination></div><div class="col-xs-1"><label class="pull-right"><select ng-model="allCtrl.pagination.itemsPerPage" ng-change="allCtrl.updateView()" class="form-control input-sm"><option ng-selected="allCtrl.pagination.itemsPerPage === 10" value="10">10</option><option ng-selected="allCtrl.pagination.itemsPerPage === 25" value="25">25</option><option ng-selected="allCtrl.pagination.itemsPerPage === 50" value="50">50</option><option ng-selected="allCtrl.pagination.itemsPerPage === 100" value="100">100</option></select></label></div></div></div></div>'),e.put("app/visitors/form/form.html",'<div class="row"><div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix">Visitors Profile Form<div class="pull-right" ng-include="\'components/form/partials/elements/submit-small.html\'"></div></h1></div><form><div ng-include="\'app/visitors/form/partials/image.html\'"></div><div class="form-group" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'" ng-if="!elem.custom"></div><div class="custom-form" ng-if="elem.custom" ng-include="elem.template"></div></div></div></div><div class="row"><div class="col-sm-12" ng-include="\'components/form/partials/elements/submit.html\'"></div></div></form></div></div>'),e.put("app/visitors/profile/profile.html",'<div class="page-header"><h1>Visitor Profile Page</h1></div><div class="row"><div class="col-xs-12"><div><div id="user-profile-1" class="user-profile row"><div class="col-xs-12 col-sm-3 center"><div><span class="profile-picture"><img style="max-height: 200px; max-width: 180px;" ng-if="!profileCtrl.profile.image" id="avatar" class="editable img-responsive" alt="" src="../assets/avatars/profile-pic.jpg"> <img ng-if="profileCtrl.profile.image" id="avatar" class="editable img-responsive" alt="" ng-src="{{ profileCtrl.profile.image }}"></span><div class="space-4"></div><div class="width-80 label label-info label-xlg arrowed-in arrowed-in-right"><div class="inline position-relative"><a ui-sref="visitors.edit({_id: profileCtrl.profile._id})" class="user-title-label dropdown-toggle" data-toggle="dropdown"><i class="ace-icon fa fa-circle light-green"></i> &nbsp; <span class="white" ng-bind="profileCtrl.profile.last_name+ \' \'+ profileCtrl.profile.first_name"></span></a></div></div></div><div class="space-6"></div><div class="hr hr12 dotted"></div></div><div class="col-xs-12 col-sm-9"><div class="profile-user-info profile-user-info-striped"><div class="profile-info-row"><div class="profile-info-name">First Name</div><div class="profile-info-value"><span class="editable" id="firstname" ng-bind="profileCtrl.profile.first_name"></span></div></div><div class="profile-info-row"><div class="profile-info-name">Last Name</div><div class="profile-info-value"><span class="editable" id="lastname" ng-bind="profileCtrl.profile.last_name"></span></div></div><div class="profile-info-row"><div class="profile-info-name">Email</div><div class="profile-info-value" ng-bind="profileCtrl.profile.email"></div></div><div class="profile-info-row"><div class="profile-info-name">Gender</div><div class="profile-info-value" ng-bind="profileCtrl.profile.gender"></div></div><div class="profile-info-row"><div class="profile-info-name">Created</div><div class="profile-info-value"><span class="editable" id="signup" ng-bind="profileCtrl.profile.created | date:\'yyyy/MM/dd\'">2010/06/20</span></div></div><div class="profile-info-row"><div class="profile-info-name">Last Online</div><div class="profile-info-value"><span class="editable" id="login">3 hours ago</span></div></div></div><div class="space-20"></div><div class="widget-box transparent"><div class="widget-header widget-header-small"><h4 class="widget-title blue smaller"><i class="ace-icon fa fa-rss orange"></i> Recent Activities</h4><div class="widget-toolbar action-buttons"><a href="#" data-action="reload"><i class="ace-icon fa fa-refresh blue"></i></a> &nbsp; <a href="#" class="pink"><i class="ace-icon fa fa-trash-o"></i></a></div></div><div class="widget-body"><div class="widget-main padding-8"></div></div></div><div class="space-6"></div></div></div></div></div></div>'),e.put("app/visitors-group/all/all.html",'<div class="page-header"><h1>Visitor Categories</h1></div><div class="row"><div class="col-sm-12"><div class="custom-form-save clearfix"><a class="btn btn-primary pull-right" ui-sref="visitorsGroup.add"><i class="fa fa-plus-circle"></i> Create</a></div></div></div><div class="row"><div class="col-xs-12"><div class="row"><div class="col-xs-12"><table id="simple-table" class="table table-striped table-bordered table-hover"><thead><tr><th>#</th><th><span class="pointer block" ng-click="allCtrl.updateView(\'name\')">Category <span ng-show="allCtrl.orderByColumn[\'first_name\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'name\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'name\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'black_listed\')">Black Listed <span ng-show="allCtrl.orderByColumn[\'black_listed\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'black_listed\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'black_listed\'].reverse}"></span></span></th><th><span class="pointer block" ng-click="allCtrl.updateView(\'created\')">Date Created <span ng-show="allCtrl.orderByColumn[\'created\']" ng-class="{\'fa fa-long-arrow-up\': allCtrl.orderByColumn[\'created\'].reverse, \'fa fa-long-arrow-down\': !allCtrl.orderByColumn[\'created\'].reverse}"></span></span></th><th>Acions</th></tr></thead><tbody><tr ng-repeat="item in allCtrl.items"><td ng-bind="$index + 1 + ((allCtrl.pagination.currentPage-1) * allCtrl.pagination.itemsPerPage)"></td><td ng-bind="::item.name"></td><td ng-bind="::item.black_listed"></td><td ng-bind="::item.created | date:\'yyyy-MM-dd\'"></td><td><div class="hidden-sm hidden-xs action-buttons"><a ui-sref="visitorsGroup.edit({_id: item._id})" class="green"><i class="ace-icon fa fa-pencil bigger-130"></i></a> <a ui-sref="visitorsGroup.remove({_id: item._id})" class="red"><i class="ace-icon fa fa-trash-o bigger-130"></i></a></div><div class="hidden-md hidden-lg"><div class="inline pos-rel"><button data-position="auto" data-toggle="dropdown" class="btn btn-minier btn-yellow dropdown-toggle" aria-expanded="false"><i class="ace-icon fa fa-caret-down icon-only bigger-120"></i></button><ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close" style=""><li><a title="" data-rel="tooltip" class="tooltip-info" ui-sref="visitorsGroup.detail({_id: item._id})" data-original-title="View"><span class="blue"><i class="ace-icon fa fa-search-plus bigger-120"></i></span></a></li><li><a title="" data-rel="tooltip" class="tooltip-success" ui-sref="visitorsGroup.edit({_id: item._id})" data-original-title="Edit"><span class="green"><i class="ace-icon fa fa-pencil-square-o bigger-120"></i></span></a></li><li><a title="" data-rel="tooltip" class="tooltip-error" ui-sref="visitorsGroup.remove({_id: item._id})" data-original-title="Delete"><span class="red"><i class="ace-icon fa fa-trash-o bigger-120"></i></span></a></li></ul></div></div></td></tr></tbody></table></div></div><div class="row"><div class="col-xs-11"><uib-pagination total-items="allCtrl.pagination.totalItems" ng-model="allCtrl.pagination.currentPage" max-size="allCtrl.pagination.maxSize" class="allCtrl.pagination-sm pull-right" boundary-links="true" rotate="false" ng-change="allCtrl.updateView()" items-per-page="allCtrl.pagination.itemsPerPage" num-pages="allCtrl.pagination.numPages"></uib-pagination></div><div class="col-xs-1"><label class="pull-right"><select ng-model="allCtrl.pagination.itemsPerPage" ng-change="allCtrl.updateView()" class="form-control input-sm"><option ng-selected="allCtrl.pagination.itemsPerPage === 10" value="10">10</option><option ng-selected="allCtrl.pagination.itemsPerPage === 25" value="25">25</option><option ng-selected="allCtrl.pagination.itemsPerPage === 50" value="50">50</option><option ng-selected="allCtrl.pagination.itemsPerPage === 100" value="100">100</option></select></label></div></div></div></div>'),e.put("app/visitors-group/form/form.html",'<div class="col-sm-8 col-sm-offset-2"><div class="page-header"><h1 class="clearfix">Visitors Group Form<div class="pull-right" ng-include="\'components/form/partials/elements/submit-small.html\'"></div></h1></div><form><div class="form-grou" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'"></div></div></div></div><div class="row"><div class="col-sm-12" ng-include="\'components/form/partials/elements/submit.html\'"></div></div></form></div>'),e.put("app/visitors-group/profile/profile.html",'<div class="page-header"><h1>User Profile Page</h1></div><div class="row"><div class="col-xs-12"><div><div id="user-profile-1" class="user-profile row"><div class="col-xs-12 col-sm-3 center"><div><span class="profile-picture"><img style="max-height: 200px; max-width: 180px;" ng-if="!profileCtrl.profile.image" id="avatar" class="editable img-responsive" alt="" src="../assets/avatars/profile-pic.jpg"> <img ng-if="profileCtrl.profile.image" id="avatar" class="editable img-responsive" alt="" ng-src="profileCtrl.profile.image"></span><div class="space-4"></div><div class="width-80 label label-info label-xlg arrowed-in arrowed-in-right"><div class="inline position-relative"><a ui-sref="users.edit({_id: profileCtrl.profile._id})" class="user-title-label dropdown-toggle" data-toggle="dropdown"><i class="ace-icon fa fa-circle light-green"></i> &nbsp; <span class="white" ng-bind="profileCtrl.profile.last_name+ \' \'+ profileCtrl.profile.first_name"></span></a></div></div></div><div class="space-6"></div><div class="hr hr12 dotted"></div></div><div class="col-xs-12 col-sm-9"><div class="profile-user-info profile-user-info-striped"><div class="profile-info-row"><div class="profile-info-name">Username</div><div class="profile-info-value"><span class="editable" id="username" ng-bind="profileCtrl.profile.username"></span></div></div><div class="profile-info-row"><div class="profile-info-name">Email</div><div class="profile-info-value" ng-bind="profileCtrl.profile.email"></div></div><div class="profile-info-row"><div class="profile-info-name">Gender</div><div class="profile-info-value" ng-bind="profileCtrl.profile.gender"></div></div><div class="profile-info-row"><div class="profile-info-name">Joined</div><div class="profile-info-value"><span class="editable" id="signup" ng-bind="profileCtrl.profile.date_joined | date:\'yyyy/MM/dd\'">2010/06/20</span></div></div><div class="profile-info-row"><div class="profile-info-name">Last Online</div><div class="profile-info-value"><span class="editable" id="login">3 hours ago</span></div></div></div><div class="space-20"></div><div class="widget-box transparent"><div class="widget-header widget-header-small"><h4 class="widget-title blue smaller"><i class="ace-icon fa fa-rss orange"></i> Recent Activities</h4><div class="widget-toolbar action-buttons"><a href="#" data-action="reload"><i class="ace-icon fa fa-refresh blue"></i></a> &nbsp; <a href="#" class="pink"><i class="ace-icon fa fa-trash-o"></i></a></div></div><div class="widget-body"><div class="widget-main padding-8"></div></div></div><div class="space-6"></div></div></div></div></div></div>'),e.put("components/form/partials/form-field.html",'<label ng-bind="elem.label"></label> <strong class="text-danger" ng-if="elem.required">*</strong><div class="form-input" ng-include="\'components/form/partials/elements/\'+(elem.formType || \'text\')+\'.html\'"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[elem.fieldName].length"><span ng-repeat="error in formCtrl.errorMsg[elem.fieldName]"><i class="fa fa-exclamation-triangle"></i> {{ error }}</span></div>'),e.put("app/appointments/form/partials/groups.html",'<button class="btn btn-primary btn-lg" ng-click="formCtrl.addMember()"><i class="ace-icon fa fa-plus-circle bigger-160"></i> Add</button>'),e.put("app/appointments/form/partials/phone.html",'<label ng-bind="elem.label"></label> <strong class="text-danger" ng-if="elem.required">*</strong><div class="form-input"><div class="row"><div class="col-sm-3"><div ng-include="\'app/appointments/form/partials/phone/prefix.html\'"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'phone.prefix\'].length"><span ng-repeat="error in formCtrl.errorMsg[\'phone.prefix\']"><i class="fa fa-exclamation-triangle"></i> {{ error }}</span></div></div><div class="col-sm-9"><div ng-include="\'app/appointments/form/partials/phone/suffix.html\'"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'phone.suffix\'].length"><span ng-repeat="error in formCtrl.errorMsg[\'phone.suffix\']"><i class="fa fa-exclamation-triangle"></i> {{ error }}</span></div></div></div></div><input type="hidden" ng-model="formCtrl.viewModel.phone" ng-bind="formCtrl.phone.prefix + formCtrl.phone.suffix"><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'phone\'].length"><span ng-repeat="error in formCtrl.errorMsg[\'phone\']"><i class="fa fa-exclamation-triangle"></i> {{ error }}</span></div>'),e.put("app/appointments/form/partials/visitor.html",'<div style="padding: 10px;"><form><div class="form-group" ng-repeat="form in formCtrl.form"><div class="row"><div ng-repeat="elem in form" class="col-sm-{{formCtrl.column}}"><div class="custom-form" ng-include="\'components/form/partials/form-field.html\'" ng-if="!elem.custom"></div><div class="custom-form" ng-if="elem.custom" ng-include="elem.template"></div></div></div></div><div class="row"><div class="col-xs-6"><button ng-click="formCtrl.cancel()" type="button" class="btn btn-danger btn-block"><i class="fa fa-times-circle"></i> Cancel</button></div><div class="col-xs-6"><button ng-click="formCtrl.save()" type="button" class="btn btn-primary btn-block"><i class="fa fa-plus-circle"></i> Add</button></div></div></form></div>'),e.put("app/appointments/logs/partials/pass-template.html",'<div class="clearfix"><button class="btn btn-primary" ng-click="printThis()" id="print-area"><i class="fa fa-print"></i> Print</button></div><div id="printThisElement" style="margin:10px auto 20px; !important; width: 320px; padding: 10px;"><style>\n    .printable {\n      width: 300px;\n      height: 470px;\n      border: 2px solid #000;\n      padding-left: 10px !important;\n      padding-right: 10px !important;\n    }\n    .badge-header h2{\n      text-align: center;\n      padding: 0;\n      margin: 0;\n    }\n  </style><div class="printable"><div class="badge-header"><h2 style="">Visitor</h2></div><div><div><div style="width: 100%; margin-top: 5% !important; margin-bottom: 5%; max-height: 210px"><h3 style="text-align: center; font-weight: bold">{{ appointment.purpose | uppercase }}</h3><img ng-if="((appointment).visitor).image" ng-src="{{ appointment.visitor.image }}" alt="" width="100%" style="margin:auto !important; width: 244px; height: 150px; display: block" class="img-responsive"> <img ng-if="!((appointment).visitor).image" ng-src="../../assets/avatars/place_holder.jpg" alt="" style="margin:auto !important; width: 244px; height: 150px; display: block" class="img-responsive"></div></div><div style="font-size: 16px;"><div style="margin-bottom: 10px !important;">Name: {{ appointment.visitor.first_name }} {{ appointment.visitor.last_name }}</div><div>Host: {{ appointment.host.first_name }} {{ appointment.host.last_name }}</div><div>Department: {{ (((appointment).host).department).name }}</div><div ng-if="((((appointment).host).department).floor) !== null">Floor: <strong>{{ ((((appointment).host).department).floor) }}</strong></div><div style="text-align: center">{{ appointment.start_date | date: \'dd/MM/yyyy\' }} {{ appointment.start_time | date: \'HH:mm\' }} - {{ appointment.end_time | date: \'HH:mm\' }}</div></div><div style="clear: both"></div></div><img id="barcode" style="max-height:80px; margin-top: 10px !important; width:100%"></div></div>'),e.put("app/departments/form/partials/edit.html",""),e.put("app/departments/form/partials/wizard.html",'<form name="userProfile"><div class="row"><div class="col-sm-6"><div class="custom-form"><label>Username</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.username" placeholder="Enter Username here"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'username\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'username\']" ng-bind="error"></span></div></div></div><div class="col-sm-6"><div class="custom-form"><label>Email</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.email" placeholder="Enter Email here"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'email\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'email\']" ng-bind="error"></span></div></div></div></div><div class="row"><div class="col-sm-6"><div class="custom-form"><label>Password</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.password" type="password" placeholder="Enter password"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'password\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'password\']" ng-bind="error"></span></div></div></div><div class="col-sm-6"><div class="custom-form"><label>Confirm Password</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.password2" type="password" placeholder="Enter password again"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'password2\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'password2\']" ng-bind="error"></span></div></div></div></div><div class="row"><div class="col-sm-6"><div class="custom-form"><label>First Name</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.first_name" placeholder="Enter First Name here"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'first_name\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'first_name\']" ng-bind="error"></span></div></div></div><div class="col-sm-6"><div class="custom-form"><label>Last Name</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.last_name" placeholder="Enter Last Name here"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'last_name\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'last_name\']" ng-bind="error"></span></div></div></div></div><div class="row"><div class="col-sm-6"><div class="custom-form"><label>Phone</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.phone" placeholder="Enter Phone here"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'phone\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'phone\']" ng-bind="error"></span></div></div></div><div class="col-sm-6"><div class="custom-form"><label>Work Phone</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.work_phone" placeholder="Enter Work phone here"></div></div></div></div><div class="row"><div class="col-sm-6"><div class="custom-form"><label>Home Phone</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.home_phone" placeholder="Enter Work Phone here"></div></div></div><div class="col-sm-6"><div class="custom-form"><label>Department</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.department.name" placeholder="Enter Department here"></div></div></div></div><div class="row"><div class="col-sm-12"><hr><div class="custom-form-save clearfix"><button ng-click="formCtrl.save()" class="btn btn-success btn-lg pull-right"><i class="fa fa-save"></i> Save</button></div></div></div></form>'),e.put("app/users/form/partials/edit.html",""),e.put("app/users/form/partials/image.html",'<div class="row"><div class="col-sm-3 col-sm-offset-9"><span class="margin-10-b">Click image to edit</span> <span class="profile-picture pointer" ng-click="formCtrl.openImageDialog()"><img ng-if="!formCtrl.viewModel.image" class="editable img-responsive" alt="" src="../assets/avatars/place_holder.jpg"> <img ng-if="formCtrl.viewModel.image" id="avatar" class="editable img-responsive" alt="" ng-src="{{ formCtrl.viewModel.image }}"></span></div></div>'),e.put("app/users/form/partials/wizard.html",'<form name="userProfile"><div class="row"><div class="col-sm-6"><div class="custom-form"><label>Username</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.username" placeholder="Enter Username here"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'username\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'username\']" ng-bind="error"></span></div></div></div><div class="col-sm-6"><div class="custom-form"><label>Email</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.email" placeholder="Enter Email here"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'email\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'email\']" ng-bind="error"></span></div></div></div></div><div class="row"><div class="col-sm-6"><div class="custom-form"><label>Password</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.password" type="password" placeholder="Enter password"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'password\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'password\']" ng-bind="error"></span></div></div></div><div class="col-sm-6"><div class="custom-form"><label>Confirm Password</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.password2" type="password" placeholder="Enter password again"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'password2\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'password2\']" ng-bind="error"></span></div></div></div></div><div class="row"><div class="col-sm-6"><div class="custom-form"><label>First Name</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.first_name" placeholder="Enter First Name here"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'first_name\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'first_name\']" ng-bind="error"></span></div></div></div><div class="col-sm-6"><div class="custom-form"><label>Last Name</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.last_name" placeholder="Enter Last Name here"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'last_name\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'last_name\']" ng-bind="error"></span></div></div></div></div><div class="row"><div class="col-sm-6"><div class="custom-form"><label>Phone</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.phone" placeholder="Enter Phone here"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'phone\']"><i class="fa fa-exclamation-triangle"></i> <span ng-repeat="error in formCtrl.errorMsg[\'phone\']" ng-bind="error"></span></div></div></div><div class="col-sm-6"><div class="custom-form"><label>Work Phone</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.work_phone" placeholder="Enter Work phone here"></div></div></div></div><div class="row"><div class="col-sm-6"><div class="custom-form"><label>Home Phone</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.home_phone" placeholder="Enter Work Phone here"></div></div></div><div class="col-sm-6"><div class="custom-form"><label>Department</label><div class="form-input"><input class="form-control" ng-model="formCtrl.profile.department.name" placeholder="Enter Department here"></div></div></div></div><div class="row"><div class="col-sm-12"><hr><div class="custom-form-save clearfix"><button ng-click="formCtrl.save()" class="btn btn-success btn-lg pull-right"><i class="fa fa-save"></i> Save</button></div></div></div></form>'),e.put("app/visitors/form/partials/company.html",'<label ng-bind="elem.label"></label> <strong class="text-danger" ng-if="elem.required">*</strong><div class="form-input" ng-include="\'app/visitors/form/partials/company/company.html\'"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[elem.fieldName].length"><span ng-repeat="error in formCtrl.errorMsg[elem.fieldName]"><i class="fa fa-exclamation-triangle"></i> {{ error }}</span></div>'),e.put("app/visitors/form/partials/image.html",'<div class="row"><div class="col-sm-3 col-sm-offset-9"><span class="margin-10-b">Click image to edit</span> <span class="profile-picture pointer" ng-click="formCtrl.openImageDialog()"><img ng-if="!formCtrl.viewModel.image" class="editable img-responsive" alt="" src="../assets/avatars/place_holder.jpg"> <img ng-if="formCtrl.viewModel.image" id="avatar" class="editable img-responsive" alt="" ng-src="{{ formCtrl.viewModel.image }}"></span></div></div>'),e.put("app/visitors/form/partials/phone.html",'<label ng-bind="elem.label"></label> <strong class="text-danger" ng-if="elem.required">*</strong><div class="form-input"><div class="row"><div class="col-sm-3"><div ng-include="\'app/visitors/form/partials/phone/prefix.html\'"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'phone.prefix\'].length"><span ng-repeat="error in formCtrl.errorMsg[\'phone.prefix\']"><i class="fa fa-exclamation-triangle"></i> {{ error }}</span></div></div><div class="col-sm-9"><div ng-include="\'app/visitors/form/partials/phone/suffix.html\'"></div><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'phone.suffix\'].length"><span ng-repeat="error in formCtrl.errorMsg[\'phone.suffix\']"><i class="fa fa-exclamation-triangle"></i> {{ error }}</span></div></div></div></div><input type="hidden" ng-model="formCtrl.viewModel.phone" ng-bind="formCtrl.phone.prefix + formCtrl.phone.suffix"><div class="text-danger error-div" ng-if="formCtrl.errorMsg[\'phone\'].length"><span ng-repeat="error in formCtrl.errorMsg[\'phone\']"><i class="fa fa-exclamation-triangle"></i> {{ error }}</span></div>'),e.put("components/form/partials/elements/checkbox.html",'<div><label class="switch"><input ng-model="formCtrl.viewModel[elem.fieldName]" ng-change="formCtrl.validateField(elem.fieldName)" type="checkbox"> <i></i></label></div>'),e.put("components/form/partials/elements/date.html",'<div class="input-group"><input type="text" class="form-control" uib-datepicker-popup="" ng-model="formCtrl.viewModel[elem.fieldName]" ng-change="formCtrl.validateField(elem.fieldName)" is-open="formCtrl.date[elem.fieldName].opened" min-date="minDate" max-date="maxDate" ng-click="formCtrl.date[elem.fieldName].open($event)" close-text="Close"> <span class="input-group-addon" ng-click="formCtrl.date[elem.fieldName].open($event)"><i class="fa fa-calendar"></i></span></div>'),e.put("components/form/partials/elements/multi-select.html",'<input class="form-control" ng-model="formCtrl.viewModel[elem.fieldName]" ng-blur="formCtrl.validateField(elem.fieldName)" placeholder="{{ formCtrl.placeholder(elem.label, elem.placeholder) }}">'),e.put("components/form/partials/elements/number.html",'<input type="number" class="form-control" ng-model="formCtrl.viewModel[elem.fieldName]" ng-blur="formCtrl.validateField(elem.fieldName)" ng-disabled="formCtrl.typeahead[elem.fieldName].disabled" placeholder="{{ formCtrl.placeholder(elem.label, elem.placeholder) }}">'),e.put("components/form/partials/elements/password.html",'<input type="password" class="form-control" ng-model="formCtrl.viewModel[elem.fieldName]" ng-blur="formCtrl.validateField(elem.fieldName)" ng-disabled="formCtrl.typeahead[elem.fieldName].disabled" placeholder="{{ formCtrl.placeholder(elem.label, elem.placeholder) }}">'),e.put("components/form/partials/elements/select.html",'<select class="form-control" ng-model="formCtrl.viewModel[elem.fieldName]" ng-change="formCtrl.validateField(elem.fieldName)"><option value=""></option><option ng-repeat="option in elem.choices" ng-bind="option.text" value="{{ option.value }}"></option></select>'),e.put("components/form/partials/elements/submit-small.html",'<div class="custom-form-save clearfix"><button ng-disabled="formCtrl.isSaving" ng-click="formCtrl.save()" class="btn btn-success btn-xs pull-right"><span ng-hide="formCtrl.isSaving"><i class="fa fa-save"></i> Save</span> <span ng-show="formCtrl.isSaving"><i class="fa fa-spinner fa-spin"></i> Saving</span></button> <button type="button" ng-click="formCtrl.cancel()" class="btn btn-danger btn-xs pull-right margin-10-r"><i class="fa fa-times"></i> Cancel</button></div>'),e.put("components/form/partials/elements/submit.html",'<hr><div class="custom-form-save clearfix"><button ng-disabled="formCtrl.isSaving" ng-click="formCtrl.save()" class="btn btn-success btn-lg pull-right"><span ng-hide="formCtrl.isSaving"><i class="fa fa-save"></i> Save</span> <span ng-show="formCtrl.isSaving"><i class="fa fa-spinner fa-spin"></i> Saving</span></button> <button type="button" ng-click="formCtrl.cancel()" class="btn btn-danger btn-lg pull-left margin-10-l"><i class="fa fa-times"></i> Cancel</button></div>'),e.put("components/form/partials/elements/text.html",'<input class="form-control" ng-model="formCtrl.viewModel[elem.fieldName]" ng-blur="formCtrl.validateField(elem.fieldName)" ng-disabled="formCtrl.typeahead[elem.fieldName].disabled" placeholder="{{ formCtrl.placeholder(elem.label, elem.placeholder) }}">'),e.put("components/form/partials/elements/textarea.html",'<textarea class="form-control" ng-model="formCtrl.viewModel[elem.fieldName]" ng-blur="formCtrl.validateField(elem.fieldName)" placeholder="{{ formCtrl.placeholder(elem.label, elem.placeholder) }}">\n</textarea>'),e.put("components/form/partials/elements/time.html",'<uib-timepicker ng-model="formCtrl.viewModel[elem.fieldName]" ng-change="formCtrl.validateField(elem.fieldName)" hour-step="formCtrl.time[elem.fieldName].hstep" minute-step="formCtrl.time[elem.fieldName].mstep" show-meridian="formCtrl.time[elem.fieldName].ismeridian"></uib-timepicker>'),e.put("components/form/partials/elements/typeahead-remote.html",'<input type="text" class="form-control" ng-model="formCtrl.viewModel[elem.fieldName]" placeholder="{{ formCtrl.placeholder(elem.label, elem.placeholder) }}" ng-blur="formCtrl.validateField(elem.fieldName)" uib-typeahead="data.name for data in formCtrl.typeahead[elem.fieldName].get($viewValue)" typeahead-loading="loadingRemoteData" typeahead-on-select="formCtrl.typeahead[elem.fieldName].onSelect($item, $model, $label)" typeahead-editable="formCtrl.typeahead[elem.fieldName].editable"> <i ng-show="loadingRemoteData" class="fa fa-refresh"></i>'),e.put("components/form/partials/elements/typeahead.html",'<input type="text" class="form-control" ng-model="formCtrl.viewModel[elem.fieldName]" placeholder="{{ formCtrl.placeholder(elem.label, elem.placeholder) }}" uib-typeahead="data for data in formCtrl.typeahead[elem.fieldName].list | filter:$viewValue" typeahead-loading="loadingRemoteData" typeahead-on-select="formCtrl.typeahead[elem.fieldName].onSelect($item, $model, $label)"> <i ng-show="loadingRemoteData" class="fa fa-refresh"></i>'),e.put("app/appointments/form/partials/phone/prefix.html",'<input type="text" ng-model="formCtrl.viewModel[\'phone.prefix\']" style="border: 1px #EEEEEE solid" placeholder="0803" typeahead-editable="false" ng-blur="formCtrl.validateField(\'phone.prefix\')" uib-typeahead="prefix for prefix in formCtrl.phone.prefixes | filter:$viewValue | limitTo:8" class="form-control">'),e.put("app/appointments/form/partials/phone/suffix.html",'<input type="text" class="form-control" style="border: 1px #EEEEEE solid" placeholder="7886565" ng-blur="formCtrl.validateField(\'phone.suffix\')" ng-model="formCtrl.viewModel[\'phone.suffix\']" typeahead-editable="true" typeahead-loading="loadingRemoteData" typeahead-on-select="formCtrl.typeahead[\'phone.suffix\'].onSelect($item, $model, $label)" uib-typeahead="data.name for data in formCtrl.typeahead[\'phone.suffix\'].get($viewValue)"> <i ng-show="loadingRemoteData" class="fa fa-refresh"></i>'),e.put("app/departments/form/partials/forms/contact.html",""),e.put("app/departments/form/partials/forms/password.html",""),e.put("app/departments/form/partials/forms/user-detail.html",""),e.put("app/users/form/partials/camera/camera.html",'<div style="padding: 20px;"><div class="row"><div class="col-sm-12"><div class="row"><div class="col-sm-6 center"><div style="padding: 10px"><label for="image">Image</label><div><span ng-if="formCtrl.upload.status">Activate Camera</span> <span ng-if="!formCtrl.upload.status">Activate Image Upload</span> <label class="switch"><input ng-model="formCtrl.upload.status" type="checkbox"> <i></i></label></div></div></div><div class="col-sm-6 center"><button class="btn btn-danger btn-lg btn-block" type="button" ng-click="closeWindow()">Cancel <i class="fa fa-times-circle-o"></i></button><div class="clearfix"></div></div></div><div class="row"><div class="col-sm-6"><div class="margin-10-r clearfix"><div class="pull-right"><div ng-if="formCtrl.upload.status"><div style="margin-bottom: 10px;"><input id="image" type="file" ng-model-instant="" onchange="angular.element(this).scope().setFiles(this, \'image\')"></div><div><button ng-if="formCtrl.upload.status" ng-click="closeCameraNow()" class="btn btn-info btn-block">Save and Close <i class="fa fa-save"></i></button></div></div><div ng-if="!formCtrl.upload.status"><div vi-camera=""><div camera-control-snapshot=""></div></div></div></div></div></div><div class="col-sm-6"><div class="margin-10-l clearfix"><div class="pull-left"><div ng-if="formCtrl.upload.status"><img ng-if="formCtrl.viewModel.image" ng-src="{{ formCtrl.viewModel.image }}"></div><div ng-if="!formCtrl.upload.status"><div ng-if="!takeImage"><img class="editable img-responsive" alt="" src="../assets/avatars/place_holder.jpg"></div><canvas></canvas></div></div></div></div></div></div></div></div>'),e.put("app/visitors/form/partials/camera/camera.html",'<div style="padding: 20px;"><div class="row"><div class="col-sm-12"><div class="row"><div class="col-sm-6 center"><div style="padding: 10px"><label for="image">Image</label><div><span ng-if="formCtrl.upload.status">Activate Camera</span> <span ng-if="!formCtrl.upload.status">Activate Image Upload</span> <label class="switch"><input ng-model="formCtrl.upload.status" type="checkbox"> <i></i></label></div></div></div><div class="col-sm-6 center"><button class="btn btn-danger btn-lg btn-block" type="button" ng-click="closeWindow()">Cancel <i class="fa fa-times-circle-o"></i></button><div class="clearfix"></div></div></div><div class="row"><div class="col-sm-6"><div class="margin-10-r clearfix"><div class="pull-right"><div ng-if="formCtrl.upload.status"><div style="margin-bottom: 10px;"><input id="image" type="file" ng-model-instant="" onchange="angular.element(this).scope().setFiles(this, \'image\')"></div><div><button ng-if="formCtrl.upload.status" ng-click="closeCameraNow()" class="btn btn-info btn-block">Save and Close <i class="fa fa-save"></i></button></div></div><div ng-if="!formCtrl.upload.status"><div vi-camera=""><div camera-control-snapshot=""></div></div></div></div></div></div><div class="col-sm-6"><div class="margin-10-l clearfix"><div class="pull-left"><div ng-if="formCtrl.upload.status"><img ng-if="formCtrl.viewModel.image" ng-src="{{ formCtrl.viewModel.image }}"></div><div ng-if="!formCtrl.upload.status"><div ng-if="!takeImage"><img class="editable img-responsive" alt="" src="../assets/avatars/place_holder.jpg"></div><canvas></canvas></div></div></div></div></div></div></div></div>'),e.put("app/users/form/partials/forms/contact.html",""),e.put("app/users/form/partials/forms/password.html",""),e.put("app/users/form/partials/forms/user-detail.html",""),e.put("app/visitors/form/partials/company/company.html",'<input type="text" ng-model="formCtrl.viewModel[\'company.name\']" placeholder="Enter Company name" uib-typeahead="company for company in formCtrl.getCompanies($viewValue)" typeahead-loading="loadingCompanies" typeahead-on-select="formCtrl.updateCompany($item, $model, $label)" class="form-control"> <i ng-show="loadingCompanies" class="fa fa-refresh"></i>'),e.put("app/visitors/form/partials/phone/prefix.html",'<input type="text" ng-model="formCtrl.viewModel[\'phone.prefix\']" style="border: 1px #EEEEEE solid" placeholder="0803" typeahead-editable="false" ng-blur="formCtrl.validateField(\'phone.prefix\')" uib-typeahead="prefix for prefix in formCtrl.phone.prefixes | filter:$viewValue | limitTo:8" class="form-control">'),e.put("app/visitors/form/partials/phone/suffix.html",'<input type="text" class="form-control" style="border: 1px #EEEEEE solid" placeholder="7886565" ng-blur="formCtrl.validateField(\'phone.suffix\')" ng-model="formCtrl.viewModel[\'phone.suffix\']">')
}]);